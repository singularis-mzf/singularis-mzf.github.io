<!doctype html>
<html lang="cs">
<head profile="http://www.w3.org/2005/10/profile">
<meta charset="UTF-8">

<title>Diskové oddíly − Linux: Kniha kouzel</title>

<link rel="stylesheet" type="text/css" href="lkk-20210117.css">
<link rel="alternate stylesheet" type="text/css" href="lkk-20210117-vk-svetly.css" title="Vysoký kontrast: světlá varianta">
<link rel="alternate stylesheet" type="text/css" href="lkk-20210117-vk-tmavy.css" title="Vysoký kontrast: tmavá varianta">
<link rel="alternate stylesheet" type="text/css" href="lkk-20210117-tmavy.css" title="Tmavý motiv">
<link rel="icon" type="image/png" href="obrazky/favicon.png">
</head>
<body>
<div id="nahore"></div>
<header>
<span class="left"><a href="index.htm"><img src="obrazky/favicon.png" width="16" height="16" alt=""></a> Linux: Kniha kouzel, vanilková příchuť 1.15 (17. ledna 2021)</span>
<span class="right"><span class="ico1"></span><span class="ico2"></span><span class="ico3"></span></span>
</header>
<nav class="menuokna">
<a href="#menukapitoly" class="menu"><span class="prvnipismeno">K</span>apitoly</a>
<a href="#menuosnova" class="menu"><span class="prvnipismeno">O</span>snova</a>
<a href="#menustitky" class="menu"><span class="prvnipismeno">Š</span>títky</a>
<a href="#menunapoveda" class="menu"><span class="prvnipismeno">N</span>ápověda</a>
<a href="datum-cas-kalendar.htm" rel="prev" title="4. Datum, čas a kalendář" accesskey="p" class="predchozi">Předchozí&nbsp;kapitola</a>
<a href="index.htm" class="prehled"><span class="prvnipismeno">P</span>řehled kapitol</a>
<a href="docker.htm" rel="next" title="6. Docker" accesskey="n" class="nasledujici">Následující&nbsp;kapitola</a>
</nav>

<div class="slogan">Veškerá moc příkazové řádky/příkazového řádku přehledně, pro začátečníky i&nbsp;pokročilé</div>

<!--
<nav class="horni">
<div class="slogan">Veškerá moc příkazové řádky/příkazového řádku přehledně, pro začátečníky i&nbsp;pokročilé</div>
<span class="prev">
<a href="datum-cas-kalendar.htm" rel="prev" title="4. Datum, čas a kalendář" accesskey="p">Předchozí&nbsp;kapitola</a>&nbsp;|
</span><a href="index.htm" accesskey="i">Přehled</a><span class="next"><!- -
- ->&nbsp;| <a href="docker.htm" rel="next" title="6. Docker" accesskey="n">Následující&nbsp;kapitola</a>
</span>
</nav>
-->


<article>

<h1 class="kapitola">5. <img src="obrazky/ik/diskove-oddily.png" alt="" width="64" height="64"> Diskové oddíly</h1>
<div class="varovani">
Řada 1.x vanilkové příchuti Linuxu: Knihy kouzel je od 1. října 2020
do 1. března 2023 ve stavu dlouhodobé pasivní údržby;
nahlášené chyby budou opravovány, ale aktivní vývoj se již věnuje novější
vývojové řadě určené pro novější verze operačního systému a programů.
Pokud nejste vázáni na starší verze programů, doporučuji vyhledat novou
verzi z aktivně vyvíjené vývojové řady.
</div>
<div class="stitky"><a href="x-stitky.htm#slvm">LVM</a>
<a href="x-stitky.htm#sodkldcprostor">odkládací prostor</a>
<a href="x-stitky.htm#srmdisk">ramdisk</a>
<a href="x-stitky.htm#ssystm">systém</a>
<a href="x-stitky.htm#stemtickokruh">tematický okruh</a>
</div>
<h2 id="cast1"><a href="#cast1"><span class="cislo">1.</span> Úvod</a></h2>
<p class="ponadpisu">
Tato kapitola se zabývá dělením pevného disku na oddíly, jejich formátováním (zejména souborové systémy ext4, FAT32 a NTFS), údržbou a připojováním (ručním i automatickým). Zabývá se také prací s ramdisky, odkládacím prostorem a LVM.

</p><p>
Tato verze kapitoly nepokrývá připojovaní souborových systémů obyčejnými uživateli;
šifrování a nastavování kvót a další typy systému souborů, např. BTRFS a ZFS.
Rovněž nepokrývá síťové souborové systémy, vypalování DVD ani práci s ISO obrazy CD a DVD.
Rovněž nepokrývá práci se systémem souborů SquashFS. U LVM nepokrývá „layouty“ a „snapshoty“.
</p>

<h2 id="cast2"><a href="#cast2"><span class="cislo">2.</span> Definice</a></h2>

<h3 id="cast2x1"><span><a href="#cast2x1" title="kapitola 6 (Diskové oddíly), sekce 2 (Definice), podsekce 1 (Obecné definice)"><sup>2/</sup>1 Obecné definice</a></span></h3>
<ul><li><b>Systém souborů</b> je něco, co nabízí adresářovou strukturu kompatibilní se způsobem, jakým Linux nahlíží na adresáře a soubory. Některé systémy souborů jsou „fyzické“ (uložené na skutečném zařízení), jiné jsou čistě virtuální (generované za běhu ovladačem v jádře).
</li><li><b>Virtuální souborový systém</b> (VFS) je způsob, jakým Linux nahlíží na strukturu souborů v počítači; není to skutečný systém souborů. Existuje pouze jeden, je pouze pro čtení a neobsahuje nic jiného než prázdný počáteční kořenový adresář. Při startu systému je na tento adresář připojen kořenový adresář kořenového systému souborů.
</li><li><b>Připojení</b> systému souborů znamená, že systém vezme existující adresář ve VFS (takzvaný <b>přípojný bod</b>, anglicky „mount point“) a „překryje“ ho kořenovým adresářem připojovaného systému souborů včetně jeho vlastnictví, příznaků a přístupových práv. Celá adresářová struktura připojeného systému souborů se pak stane součástí VFS, dostupnou přes daný přípojný bod. Naopak původní překrytý adresář (včetně svého obsahu) tímto z VFS odpadne. Opačným úkonem je <b>odpojení</b> systému souborů; při něm dojde k opětovnému zpřístupnění původního adresáře. Zvláštním (ale komplikovaným a méně častým) případem je připojení jiného než kořenového adresáře systému souborů.
</li><li><b>Typ systému souborů</b> je buď způsob uložení souborů a adresářů na diskovém oddílu (např. „ext4“) nebo druh ovladače, který poskytuje nějakým způsobem získanou adresářovou strukturu (např. „tmpfs“). Zvláštním typem systému souborů je „swap“, tedy odkládací oddíl, protože ten adresářovou strukturu neposkytuje.
</li><li>K identifikaci konkrétního systému souborů se používají: <b>UUID</b>, což je identifikátor souborového systému přidělovaný při formátování (tzn. dalším formátováním se změní); ne všechny souborové systémy mají nějakou formu UUID, ale ext4, FAT32 a NTFS ano; <b>PARTUUID</b>, což je identifikátor oddílu na disku, je-li dělen metodou GPT (na discích dělených starší metodou MBR se emuluje, u logických oddílů LVM není dostupný vůbec); <b>jmenovka</b>, což je textový identifikátor souborového systému přidělovaný uživatelem, zpravidla při formátování. Poslední možností je cesta k idenfikátoru zařízení v /dev, např. „/dev/sda1“.
</li></ul>
<h3 id="cast2x2"><span><a href="#cast2x2" title="kapitola 6 (Diskové oddíly), sekce 2 (Definice), podsekce 2 (LVM)"><sup>2/</sup>2 LVM</a></span></h3>
<p class="ponadpisu">
LVM (logical volume management) je metoda rozložení oddílů na pevném disku, která má
odstínit uživatele od fyzického rozložení dat a poskytnout nové možnosti, např. rozložení
jednoho oddílu přes několik fyzických disků nebo snadné přesouvání oddílů a změnu jejich velikosti, často i bez nutnosti restartu počítače.
</p>
<ul><li><b>Logický oddíl</b> je v LVM obdoba běžného diskového oddílu (tzn. je možno ho naformátovat a používat k ukládání dat); na rozdíl od něj ale nemá pevné fyzické umístění na disku, jeho fyzické umístění je vymezené skupinou svazků, ve které je vytvořen. Logický oddíl LVM je dostupný pod cestou „/dev/<i class="dopln">skupina-svazků</i>/<i class="dopln">název-oddílu</i>“.
</li><li><b>Skupina svazků</b> je v LVM neprázdná pojmenovaná skupina fyzických svazků k vytváření logických oddílů. Data každého logického oddílu se fyzicky nacházejí pouze na fyzických svazcích příslušných do stejné skupiny.
</li><li><b>Fyzický svazek</b> je v LVM blokové zařízení (celý disk nebo jeho oddíl), které je nastavené a naformátované k ukládání dat logických oddílů. Nemůže to být logický oddíl.
</li></ul>
<h3 id="cast2x3"><span><a href="#cast2x3" title="kapitola 6 (Diskové oddíly), sekce 2 (Definice), podsekce 3 (Co a kam připojit)"><sup>2/</sup>3 Co a kam připojit</a></span></h3>
<p class="ponadpisu">
V následujících zaklínadlech platí:
</p><p>
<i class="dopln">co-připojit</i> může být:
</p>
<ul><li>UUID souborového systému ve tvaru „UUID=61bbd562-0694-4561-a8e2-4ccfd004a660“.
</li><li>PARTUUID ve tvaru „PARTUUID=0337a362-e7b3-4c50-a81d-9a5d45755e75“.
</li><li>Jmenovka ve tvaru LABEL=&quot;Jmenovka&quot; pro připojení diskového oddílu s danou jmenovkou.
</li><li>Cesta diskového oddílu či zařízení (např. „/dev/sda1“). Tento tvar je vhodný pouze u logických oddílů LVM či při jednorázovém připojování příkazem „mount“. V ostatních případech se nedoporučuje, protože cesta k diskovému oddílu se může změnit po každém restartu v závislosti na počtu oddílů, připojeném hardware apod.
</li><li>U některých typů souborových systémů je to jiný řetězec (např. „tmpfs“, „none“ apod.)
</li><li>Existuje ještě tvar pro síťový souborový systém, viz manuálovou stránku „man 5 fstab“.
</li></ul><p>
<i class="dopln">kam-připojit</i> může být:
</p>
<ul><li>Absolutní cesta k adresáři, který v dané chvíli ve VFS existuje, ale není ještě přípojným bodem. (V příkazu „mount“ lze zadat i relativní cestu.)
</li><li>„none“ pro odkládací prostor.
</li></ul><p>
<i class="dopln">typ-soub-sys</i> je identifikátor typu systému souborů (např. ext4, vfat, ntfs, tmpfs apod.) Lze použít i „auto“; systém se pak pokusí typ systému souborů detekovat automaticky.
</p><p>
<i class="dopln">volby-připojení</i> jsou seznam čárkami oddělených voleb nebo klíčové slovo „defaults“, které má význam „rw,suid,dev,exec,auto,nouser,async“.
</p>

<h2 id="cast3"><a href="#cast3"><span class="cislo">3.</span> Zaklínadla</a></h2>

<h3 id="cast3x1"><span><a href="#cast3x1" title="kapitola 6 (Diskové oddíly), sekce 3 (Zaklínadla), podsekce 1 (Položky v /etc/fstab)"><sup>3/</sup>1 Položky v /etc/fstab</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1465493174"><span><a href="#z1465493174">↥</a></span></span>připojit <b>kořenový</b> systém souborů (obecně/příklad)<span class="cislo">#1 </span><sup><a href="#kapdiskoveoddilyppc1" id="kapdiskoveoddilyppcr1" title="Poznámka: Připojení kořenového systému souborů by mělo být v /etc/fstab první řádkou kromě komentářů a prázdných řádek.">(1)</a></sup></div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">co-připojit</i> / <i class="dopln">typ-soub-sys</i> <i class="dopln">volby-připojení</i> 0 1</div>
<div class="radekzaklinadla">UUID=&quot;61bbd562-0694-4561-a8e2-4ccfd004a660&quot;<span class="tab" style="width:7ch">&#9;</span>/<span class="tab" style="width:7ch">&#9;</span>ext4<span class="tab" style="width:7ch">&#9;</span>errors=remount-ro,discard,nouser_xattr<span class="tab" style="width:3ch">&#9;</span>0<span class="tab" style="width:7ch">&#9;</span>1</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z2097136607"><span><a href="#z2097136607">⊂</a></span></span><b>připojit</b> jiný než kořenový systém souborů (obecně/příklad)<span class="cislo">#2 </span><sup><a href="#kapdiskoveoddilyppc2" id="kapdiskoveoddilyppcr2" title="2 v posledním poli zapne automatickou kontrolu souboru systémů při startu; tato volba je vhodná pro místní souborové systémy. 0 v posledním poli automatickou kontrolu vypne, ta je vhodná především pro výměnná média a síťové systémy souborů. Rovněž je vhodná pro místní systémy souborů připojované výhradně pro čtení.">(2)</a></sup></div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">co-připojit</i> <i class="dopln">kam-připojit</i> <i class="dopln">typ-soub-sys</i> <i class="dopln">volby-připojení</i> 0 <i class="dopln">2-nebo-0</i></div>
<div class="radekzaklinadla">/dev/skupina/muj-oddil ext4 defaults 0 2</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1679693027"><span><a href="#z1679693027">❘</a></span></span>připojit <b>ramdisk</b><span class="cislo">#3 </span><sup><a href="#kapdiskoveoddilyppc3" id="kapdiskoveoddilyppcr3" title="Velikost se udává nejčastěji v mebibajtech (s příponou M – např. „256M“) nebo gibibajtech (s příponou G – např. „10G“).">(3)</a></sup></div><div class="radky">
<div class="radekzaklinadla">tmpfs <i class="dopln">kam-připojit</i> tmpfs size=<i class="dopln">velikost</i><span class="volznak">[</span>,nosuid<span class="volznak">]</span><span class="volznak">[</span>,nodev<span class="volznak">]</span><span class="volznak">[</span>,noexec<span class="volznak">]</span><span class="volznak">[</span>,mode=<i class="dopln">práva-číselně</i><span class="volznak">]</span><span class="volznak">[</span>,uid=<i class="dopln">UID-vlastníka</i><span class="volznak">]</span><span class="volznak">[</span>,gid=<i class="dopln">GID-skupiny</i><span class="volznak">]</span><span class="volznak">[</span>,<i class="dopln">další,volby</i><span class="volznak">]</span> 0 0</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1242293117"><span><a href="#z1242293117">╌</a></span></span>připojit <b>odkládací</b> oddíl/odkládací soubor<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">co-připojit</i> none swap sw 0 0</div>
<div class="radekzaklinadla"><i class="dopln">/cesta/k/souboru</i> none swap sw 0 0</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z2132362182"><span><a href="#z2132362182">◜</a></span></span>připojit <b>adresář</b> z již připojeného systému souborů na nové místo<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">/původní/adresář /nový/adresář none bind 0 0</div>
</div></div>

<h3 id="cast3x2"><span><a href="#cast3x2" title="kapitola 6 (Diskové oddíly), sekce 3 (Zaklínadla), podsekce 2 (Připojení a odpojení systému souborů)"><sup>3/</sup>2 Připojení a odpojení systému souborů</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1903233041"><span><a href="#z1903233041">ⵞ</a></span></span><b>připojit</b> systém souborů uvedený v /etc/fstab (alternativy)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> mount <i class="dopln">kam-připojit</i></div>
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> mount <i class="dopln">co-připojit</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1798735265"><span><a href="#z1798735265">⊛</a></span></span>připojit systém souborů libovolně (obecně/příklad)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sudo mount -t <i class="dopln">typ-soub-sys</i> -o <i class="dopln">volby,připojení</i> <i class="dopln">/co/připojit</i> <i class="dopln">/kam/připojit</i></div>
<div class="radekzaklinadla">sudo mount -t ext4 -o defaults,nosuid,nodev,lazytime,discard UUID=61bbd562-0694-4561-a8e2-4ccfd004a660 /mnt/abc</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z135782631"><span><a href="#z135782631">⣴</a></span></span>odpojit systém souborů a <b>vysunout</b> zařízení (alternativy)<span class="cislo">#3 </span><sup><a href="#kapdiskoveoddilyppc4" id="kapdiskoveoddilyppcr4" title="Příkaz „eject“ pro jistotu používejte se sudo, popř. vyzkoušejte, zda bez něj ve vašem konkrétním případě funguje. Často se mi stává, že i uživateli, který je ve skupinách „cdrom“ a „plugdev“ selže s chybou „Nemohu otevřít zařízení“ a zatím se mi nepodařilo zjistit, jaké tam platí pravidlo.">(4)</a></sup></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> eject <span class="volznak">[</span>-v<span class="volznak">]</span> <i class="dopln">/dev/oddíl</i></div>
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> eject <span class="volznak">[</span>-v<span class="volznak">]</span> <i class="dopln">/dev/zařízení</i></div>
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> eject <span class="volznak">[</span>-v<span class="volznak">]</span> <i class="dopln">/cesta/přípojného/bodu</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z275425907"><span><a href="#z275425907">↘</a></span></span><b>odpojit</b> systém souborů<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> umount <i class="dopln">kam-připojit</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1738641934"><span><a href="#z1738641934">┠</a></span></span>připojit <b>adresář</b> z již připojeného systému souborů na nový přípojný bod<span class="cislo">#5 </span><sup><a href="#kapdiskoveoddilyppc5" id="kapdiskoveoddilyppcr5" title="Poznámka: Tímto příkazem se vytvoří nové, nezávislé připojení existujícího systému souborů.">(5)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo mount --bind <i class="dopln">/cesta/k/adresáři</i> <i class="dopln">/nový/přípojný/bod</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z220739479"><span><a href="#z220739479">⁀</a></span></span><b>přesunout</b> systém souborů na jiný přípojný bod (alternativa 1)<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">sudo mount --bind <i class="dopln">/původní/přípojný/bod</i> <i class="dopln">/nový/přípojný/bod</i></div>
<div class="radekzaklinadla">sudo umount <i class="dopln">/původní/přípojný/bod</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z2003712383"><span><a href="#z2003712383">┡</a></span></span>přesunout systém souborů na jiný přípojný bod (alternativa 2)<span class="cislo">#7 </span></div><div class="radky">
<div class="radekzaklinadla">sudo mount --make-private <i class="dopln">/nadřazený/přípojný/bod</i> &amp;&amp;</div>
<div class="radekzaklinadla">sudo mount --move <i class="dopln">/původní/přípojný/bod</i> <i class="dopln">/nový/přípojný/bod</i></div>
</div></div>

<h3 id="cast3x3"><span><a href="#cast3x3" title="kapitola 6 (Diskové oddíly), sekce 3 (Zaklínadla), podsekce 3 (Již připojené systémy souborů (vypsat/zjistit údaje))"><sup>3/</sup>3 Již připojené systémy souborů (vypsat/zjistit údaje)</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z303772227"><span><a href="#z303772227">⎛</a></span></span><b>vypsat</b> (pro člověka/pro skript)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">findmnt -D -t nofuse.gvfsd-fuse,nodevtmpfs,nosquashfs</div>
<div class="radekzaklinadla">findmnt -nu -o SOURCE | egrep '^/' | LC_ALL=C sort -u</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z559338566"><span><a href="#z559338566">╩</a></span></span>vypsat seznam přípojných bodů<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">findmnt -ln -o TARGET</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1129970280"><span><a href="#z1129970280">⨚</a></span></span>velikost dostupného (<b>volného</b>) místa (pro člověka/pro skript)<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">df -h <i class="dopln">/přípojný/bod</i></div>
<div class="radekzaklinadla">findmnt -bnu -o AVAIL <i class="dopln">/přípojný/bod</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z822269857"><span><a href="#z822269857">ຮ</a></span></span><b>typ</b> souborového systému<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">findmnt -nu -o FSTYPE <i class="dopln">/přípojný/bod</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z31270373"><span><a href="#z31270373">⢡</a></span></span><b>UUID</b>/<b>PARTUUID</b>/<b>jmenovka</b><span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">findmnt -nu -o UUID <i class="dopln">/přípojný/bod</i></div>
<div class="radekzaklinadla">findmnt -nu -o PARTUUID <i class="dopln">/přípojný/bod</i></div>
<div class="radekzaklinadla">findmnt -nu -o LABEL <i class="dopln">/přípojný/bod</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1461922741"><span><a href="#z1461922741">✲</a></span></span>je připojený jen pro čtení?<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">findmnt -nu -o OPTIONS <i class="dopln">/přípojný/bod</i> | tr ,\\n \\n, | fgrep -x ro</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1543042477"><span><a href="#z1543042477">≸</a></span></span>zjistit <b>kapacitu</b> systému souborů (pro člověka/pro skript)<span class="cislo">#7 </span></div><div class="radky">
<div class="radekzaklinadla">df -h <i class="dopln">/přípojný/bod</i></div>
<div class="radekzaklinadla">findmnt -bnu -o SIZE <i class="dopln">/přípojný/bod</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z254491126"><span><a href="#z254491126">䷇</a></span></span>zjistit <b>zdrojové</b> zařízení z přípojného bodu/naopak<span class="cislo">#8 </span></div><div class="radky">
<div class="radekzaklinadla">findmnt -nu -o SOURCE <i class="dopln">/přípojný/bod</i></div>
<div class="radekzaklinadla">findmnt -nu -o TARGET <i class="dopln">/dev/disknebooddíl</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z603566318"><span><a href="#z603566318">⣒</a></span></span>zjistit <b>volby připojení</b><span class="cislo">#9 </span></div><div class="radky">
<div class="radekzaklinadla">findmnt -nu -o OPTIONS <i class="dopln">/přípojný/bod</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1599399905"><span><a href="#z1599399905">⇑</a></span></span>zjistit velikost použité části souborového systému (pro člověka/pro skript)<span class="cislo">#10 </span></div><div class="radky">
<div class="radekzaklinadla">df -h <i class="dopln">/přípojný/bod</i></div>
<div class="radekzaklinadla">findmnt -bnu -o USED <i class="dopln">/přípojný/bod</i></div>
</div></div>

<h3 id="cast3x4"><span><a href="#cast3x4" title="kapitola 6 (Diskové oddíly), sekce 3 (Zaklínadla), podsekce 4 (Oddíly a zařízení (vypsat/zjistit údaje))"><sup>3/</sup>4 Oddíly a zařízení (vypsat/zjistit údaje)</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z988852288"><span><a href="#z988852288">❱</a></span></span><b>UUID</b>/<b>PARTUUID</b>/<b>jmenovka</b> oddílu<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> lsblk -ln -o UUID <i class="dopln">/dev/oddíl</i></div>
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> lsblk -ln -o PARTUUID <i class="dopln">/dev/oddíl</i></div>
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> lsblk -ln -o LABEL <i class="dopln">/dev/oddíl</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z822269857x"><span><a href="#z822269857x">ຮ</a></span></span><b>typ</b> souborového systému<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> lsblk -ln -o FSTYPE <i class="dopln">/dev/oddíl</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1770574508"><span><a href="#z1770574508">ᕹ</a></span></span>vypsat místní zařízení a oddíly (pro člověka/pro skript)<span class="cislo">#3 </span><sup><a href="#kapdiskoveoddilyppc6" id="kapdiskoveoddilyppcr6" title="Poznámka: vypsaný seznam může obsahovat i zařízení nedostupná či k ukládání dat nevhodná. Buďte při jejich zkoumání opatrní.">(6)</a></sup></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span><i>sudo</i><span class="volznak">]</span> lsblk <span class="volznak">[</span>--all<span class="volznak">]</span></div>
<div class="radekzaklinadla"><span class="volznak">[</span><i>sudo</i><span class="volznak">]</span> lsblk -ln -o NAME | sed -E 's!--!\x00!g;s!-!/!g;s!\x00!-!g;s!^!/dev/!' | LC_ALL=C sort</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1004382607"><span><a href="#z1004382607">╴</a></span></span>přesná <b>velikost</b> oddílu/disku v bajtech<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">sudo blockdev --getsize64 <i class="dopln">/dev/oddíl</i></div>
<div class="radekzaklinadla">sudo blockdev --getsize64 <i class="dopln">/dev/disk</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1200466299"><span><a href="#z1200466299">᚛</a></span></span>je oddíl či zařízení jen pro čtení?<span class="cislo">#5 </span><sup><a href="#kapdiskoveoddilyppc7" id="kapdiskoveoddilyppcr7" title="Odpověď 0 znamená, že zařízení je i pro zápis; odpověď 1 znamená, že je jen pro čtení.">(7)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo blockdev --getro <i class="dopln">/dev/oddíl-nebo-zařízení</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z913147416"><span><a href="#z913147416">△</a></span></span>zjistit velikost fyzického bloku/logického sektoru (v bajtech)<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">sudo blockdev --getbsz <i class="dopln">/dev/zařízení</i></div>
<div class="radekzaklinadla">sudo blockdev --getss <i class="dopln">/dev/zařízení</i></div>
</div></div>

<h3 id="cast3x5"><span><a href="#cast3x5" title="kapitola 6 (Diskové oddíly), sekce 3 (Zaklínadla), podsekce 5 (Formátování)"><sup>3/</sup>5 Formátování</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z878563309"><span><a href="#z878563309">⢧</a></span></span>formátovat na <b>ext4</b> (obecně/příklad)<span class="cislo">#1 </span><sup><a href="#kapdiskoveoddilyppc8" id="kapdiskoveoddilyppcr8" title="Maximální velikost jmenovky je 16 bajtů.">(8)</a>,&nbsp;<a href="#kapdiskoveoddilyppc9" id="kapdiskoveoddilyppcr9" title="Parametr -U přijímá také speciální hodnoty „random“ (vygenerovat náhodné UUID), „time“ (vygenerovat UUID závislé na čase), „clear“ (zrušit UUID).">(9)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo mke2fs -t ext4 <span class="volznak">[</span>-c<span class="volznak">[</span>c<span class="volznak">]</span><span class="volznak">]</span> -v <span class="volznak">[</span>-E root_owner=<i class="dopln">UID</i>:<i class="dopln">GID</i><span class="volznak">]</span> <span class="volznak">[</span>-L <i class="dopln">jmenovka</i><span class="volznak">]</span> <span class="volznak">[</span>-U <i class="dopln">UUID</i><span class="volznak">]</span> <span class="volznak">[</span>-d <i class="dopln">cesta</i><span class="volznak">]</span> <span class="volznak">[</span>-F<span class="volznak">]</span> <i class="dopln">/dev/zařízení-nebo-oddíl</i></div>
<div class="radekzaklinadla">sudo mke2fs -t ext4 -c -v -U 977bda6f-ce11-4549-9325-c48c360069ef /dev/sda3</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z116551276"><span><a href="#z116551276">⨑</a></span></span>formátovat na <b>FAT32</b> (obecně/příklad)<span class="cislo">#2 </span><sup><a href="#kapdiskoveoddilyppc10" id="kapdiskoveoddilyppcr10" title="Poznámka: jmenovka systémů FAT může být maximálně 11 znaků dlouhá!">(10)</a>,&nbsp;<a href="#kapdiskoveoddilyppc11" id="kapdiskoveoddilyppcr11" title="Pro formátování na FAT16 či FAT12 nahraďte hodnotu 32 u parametru -F. Tyto staré souborové systémy se dnes už ale v praxi nepoužívají.">(11)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo mkfs.fat -F 32 <span class="volznak">[</span>-c<span class="volznak">]</span> <span class="volznak">[</span>-h <i class="dopln">počet-skrytých-sektorů</i><span class="volznak">]</span> <span class="volznak">[</span>-n &quot;<i class="dopln">JMENOVKA</i>&quot;<span class="volznak">]</span> <span class="volznak">[</span>-v<span class="volznak">]</span> <i class="dopln">/dev/oddíl</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1883378611"><span><a href="#z1883378611">☩</a></span></span>formátovat na <b>NTFS</b> (obecně/příklad)<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">sudo mkntfs <span class="volznak">[</span>-f<span class="volznak">]</span> <span class="volznak">[</span>-v<span class="volznak">]</span> <span class="volznak">[</span>-L <i class="dopln">jmenovka</i><span class="volznak">]</span> <span class="volznak">[</span>-C<span class="volznak">]</span> <span class="volznak">[</span>-U<span class="volznak">]</span> <i class="dopln">/dev/zařízení-nebo-oddíl</i></div>
<div class="radekzaklinadla">sudo mkntfs -f -v -L MůjDisk /dev/sda3</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1485527849"><span><a href="#z1485527849">ຊ</a></span></span>změnit velikost souborového systému ext4<span class="cislo">#4 </span><sup><a href="#kapdiskoveoddilyppc12" id="kapdiskoveoddilyppcr12" title="Velikost se zadává s příponou (např. „2048M“ nebo „4G“). Pokud ji nezadáte, souborový systém se zvětší tak, aby pokud možno zaplnil celý oddíl. Tip: velikost souborového systému lze obvykle změnit i tehdy, když je souborový systém připojený.">(12)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo e2fsck -f <i class="dopln">/dev/oddíl</i></div>
<div class="radekzaklinadla">sudo resize2fs <i class="dopln">/dev/oddíl</i> <span class="volznak">[</span><i class="dopln">velikost</i><span class="volznak">]</span></div>
</div></div>

<h3 id="cast3x6"><span><a href="#cast3x6" title="kapitola 6 (Diskové oddíly), sekce 3 (Zaklínadla), podsekce 6 (Odkládací oddíly a soubory)"><sup>3/</sup>6 Odkládací oddíly a soubory</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1025588810"><span><a href="#z1025588810">⇓</a></span></span><b>připojit</b> odkládací oddíl či soubor (obecně/příklady)<span class="cislo">#1 </span><sup><a href="#kapdiskoveoddilyppc13" id="kapdiskoveoddilyppcr13" title="Pro odkládací oddíl či soubor platí totéž, co pro běžné diskové oddíly — aby se připojil automaticky při startu systému, musí být odpovídající záznam zapsaný v /etc/fstab!">(13)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo swapon <i class="dopln">co-připojit</i><span class="tritecky"></span></div>
<div class="radekzaklinadla">sudo swapon /mujswap</div>
<div class="radekzaklinadla">sudo swapon UUID=&quot;977bda6f-ce11-4549-9325-c48c360069ef&quot;</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1192105587"><span><a href="#z1192105587">⊇</a></span></span><b>odpojit</b> odkládací oddíl či soubor/všechny odkládací prostory<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sudo swapoff <i class="dopln">co-připojit</i><span class="tritecky"></span></div>
<div class="radekzaklinadla">sudo swapoff -a<span class="volznak">[</span>v<span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z148845296"><span><a href="#z148845296">‖</a></span></span><b>vypsat</b> aktivní odkládací oddíly a soubory<span class="cislo">#3 </span><sup><a href="#kapdiskoveoddilyppc14" id="kapdiskoveoddilyppcr14" title="Bez sudo vynechá jmenovky a UUID.">(14)</a></sup></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> swapon --show<span class="volznak">[</span>=NAME,USED,SIZE,PRIO,LABEL,UUID<span class="volznak">]</span> <span class="volznak">[</span>--noheadings<span class="volznak">]</span> <span class="volznak">[</span>--bytes<span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1476940009"><span><a href="#z1476940009">䷳</a></span></span><b>vytvořit</b> odkládací soubor<span class="cislo">#4 </span><sup><a href="#kapdiskoveoddilyppc15" id="kapdiskoveoddilyppcr15" title="Velikost můžete zadat také v megabajtech (s příponou „M“) či gigabajtech (s příponou „G“).">(15)</a></sup></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> fallocate -l <i class="dopln">velikost-v-bajtech</i> <i class="dopln">název-souboru</i></div>
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> chmod 600 <i class="dopln">název-souboru</i></div>
<div class="radekzaklinadla"><span class="volznak">[</span>sudo<span class="volznak">]</span> mkswap <i class="dopln">název-souboru</i></div>
<div class="radekzaklinadla">sudo chown root:root <i class="dopln">název-souboru</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1724912524"><span><a href="#z1724912524">⊓</a></span></span><b>smazat</b> odpojený odkládací soubor<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">sudo rm <i class="dopln">název-souboru</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z803239525"><span><a href="#z803239525">⋌</a></span></span><b>naformátovat</b> odkládací oddíl<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">sudo mkswap <span class="volznak">[</span>-L <i class="dopln">jmenovka</i><span class="volznak">]</span> <span class="volznak">[</span>-U <i class="dopln">požadované-UUID</i><span class="volznak">]</span> <i class="dopln">/dev/oddíl</i></div>
</div></div>

<h3 id="cast3x7"><span><a href="#cast3x7" title="kapitola 6 (Diskové oddíly), sekce 3 (Zaklínadla), podsekce 7 (Dělení disku)"><sup>3/</sup>7 Dělení disku</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1333992918"><span><a href="#z1333992918">—</a></span></span>GUI (grafické uživatelské rozhraní)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">sudo gparted</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona L" id="z1557705266"><span><a href="#z1557705266">⏜</a></span></span>TUI (textové uživatelské rozhraní)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sudo cfdisk <i class="dopln">/dev/zařízení</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1911108519"><span><a href="#z1911108519">䷧</a></span></span>CLI (ovládání z terminálu)<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">sudo fdisk <i class="dopln">/dev/zařízení</i></div>
</div></div>

<h3 id="cast3x8"><span><a href="#cast3x8" title="kapitola 6 (Diskové oddíly), sekce 3 (Zaklínadla), podsekce 8 (Jmenovka (nastavit))"><sup>3/</sup>8 Jmenovka (nastavit)</a></span></h3>
<p class="ponadpisu">
Poznámka: při nastavování jmenovky musí být souborový systém zpravidla odpojený!
</p>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1864154398"><span><a href="#z1864154398">⊸</a></span></span>nastavit/smazat jmenovku <b>odkládacího</b> oddílu<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">sudo swaplabel -L &quot;<i class="dopln">novájmenovka</i>&quot; <i class="dopln">/dev/oddíl</i></div>
<div class="radekzaklinadla">sudo swaplabel -L &quot;&quot; <i class="dopln">/dev/oddíl</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1012785440"><span><a href="#z1012785440">❤</a></span></span>nastavit/smazat jmenovku <b>ext4</b><span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sudo e2label <i class="dopln">/dev/oddíl</i> &quot;<i class="dopln">novájmenovka</i>&quot;</div>
<div class="radekzaklinadla">sudo e2label <i class="dopln">/dev/oddíl</i> &quot;&quot;</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1618557033"><span><a href="#z1618557033">✯</a></span></span>nastavit/smazat jmenovku <b>FAT32</b><span class="cislo">#3 </span><sup><a href="#kapdiskoveoddilyppc16" id="kapdiskoveoddilyppcr16" title="Jmenovka souborového systému FAT32 může mít nejvýše 11 znaků. Z důvodu kompatibility by měla být tvořena pouze velkými písmeny anglické abecedy, číslicemi, pomlčkami a podtržítky. Ostatní typy systému souborů mají omezení na jmenovku podstatně volnější.">(16)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo fatlabel <i class="dopln">/dev/oddíl</i> &quot;<i class="dopln">novájmenovka</i>&quot;</div>
<div class="radekzaklinadla">sudo fatlabel <i class="dopln">/dev/oddíl</i> &quot;&quot;</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1558536042"><span><a href="#z1558536042">⨎</a></span></span>nastavit/smazat jmenovku <b>NTFS</b><span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">sudo ntfslabel <span class="volznak">[</span>--new-serial<span class="volznak">]</span> <span class="volznak">[</span>--verbose<span class="volznak">]</span> <i class="dopln">/dev/oddíl</i> &quot;<i class="dopln">novájmenovka</i>&quot;</div>
<div class="radekzaklinadla">sudo ntfslabel <span class="volznak">[</span>--new-serial<span class="volznak">]</span> <span class="volznak">[</span>--verbose<span class="volznak">]</span><i class="dopln">/dev/oddíl</i> &quot;&quot;</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1250352102"><span><a href="#z1250352102">┅</a></span></span>zjistit jmenovku jakéhokoliv oddílu<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">lsblk -ln -o LABEL <i class="dopln">/dev/oddíl</i></div>
<div class="radekzaklinadla">lsblk -ln -o LABEL <i class="dopln">/dev/oddíl</i></div>
</div></div>

<h3 id="cast3x9"><span><a href="#cast3x9" title="kapitola 6 (Diskové oddíly), sekce 3 (Zaklínadla), podsekce 9 (Degrafmentace, kontrola, TRIM apod.)"><sup>3/</sup>9 Degrafmentace, kontrola, TRIM apod.</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1016368653"><span><a href="#z1016368653">ມ</a></span></span><b>zkontrolovat</b> a opravit souborový systém<span class="cislo">#1 </span><sup><a href="#kapdiskoveoddilyppc17" id="kapdiskoveoddilyppcr17" title="Příkaz „fsck“ pravděpodobně lze použít i se souborovým systémem v souboru, ale nezkoušel/a jsem to.">(17)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo fsck <span class="volznak">[</span>-V<span class="volznak">]</span> <i class="dopln">/dev/oddíl</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1479816234"><span><a href="#z1479816234">➶</a></span></span>najít chybné bloky (obecně/příklad)<span class="cislo">#2 </span><sup><a href="#kapdiskoveoddilyppc18" id="kapdiskoveoddilyppcr18" title="Poznámka: Tento příkaz chybné bloky najde, ale neudělá nic proto, aby se je systém souborů nesnažil používat.">(18)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo badblocks <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span> <span class="volznak">[</span>-w<span class="volznak">]</span> <i class="dopln">/dev/zařízení-nebo-oddíl</i></div>
<div class="radekzaklinadla">sudo badblocks -vv /dev/sda1</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z974279839"><span><a href="#z974279839">⢡</a></span></span>oznámit zařízení nevyužité bloky souborového systému (operace TRIM)(konkrétní soub.systém/všechny dostupné)<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">sudo fstrim <span class="volznak">[</span>-v<span class="volznak">]</span> <i class="dopln">/přípojný/bod</i></div>
<div class="radekzaklinadla">sudo fstrim -a <span class="volznak">[</span>-v<span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z2051448597"><span><a href="#z2051448597">╥</a></span></span>zkontrolovat <b>fragmentaci</b> oddílu typu ext4<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">sudo e4defrag -c <i class="dopln">/dev/oddíl</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z112863918"><span><a href="#z112863918">∼</a></span></span>defragmentovat oddíl typu ext4 (pozor!)<span class="cislo">#5 </span><sup><a href="#kapdiskoveoddilyppc19" id="kapdiskoveoddilyppcr19" title="Pokud jste začátečník, nedefragmentujte oddíly typu ext4! Obvykle to není potřeba.">(19)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo e4defrag <i class="dopln">/dev/oddíl</i></div>
</div></div>

<h3 id="cast3x10"><span><a href="#cast3x10" title="kapitola 6 (Diskové oddíly), sekce 3 (Zaklínadla), podsekce 10 (Ostatní)"><sup>3/</sup>10 Ostatní</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1061808262"><span><a href="#z1061808262">⣴</a></span></span><b>zálohovat</b> diskový oddíl do souboru (přímo/komprimovaný)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">sudo dd if=<i class="dopln">/dev/oddíl</i> of=<i class="dopln">cesta</i> <span class="volznak">[</span>status=progress<span class="volznak">]</span></div>
<div class="radekzaklinadla">sudo dd if=<i class="dopln">/dev/oddíl</i> <span class="volznak">[</span>status=progress<span class="volznak">]</span> | gzip -n<span class="volznak">[</span>9<span class="volznak">]</span> &gt;<i class="dopln">cesta.gz</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z172336570"><span><a href="#z172336570">①</a></span></span><b>obnovit</b> diskový oddíl (přímo/komprimovaný)<span class="cislo">#2 </span><sup><a href="#kapdiskoveoddilyppc20" id="kapdiskoveoddilyppcr20" title="Pozor! Tato operace je velmi nebezpečná! Pokud zadáte chybný cílový oddíl, daný oddíl se nevratně přepíše daty určenými pro ten správný. Pokud velikost zálohy neodpovídá přesně velikosti cílového oddílu, nemusí být oddíl po obnově dobře použitelný. Tento příkaz používejte s velkou opatrností!">(20)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo dd if=<i class="dopln">cesta</i> of=/dev/<i class="dopln">oddíl</i> <span class="volznak">[</span>status=progress<span class="volznak">]</span></div>
<div class="radekzaklinadla">gunzip -cd <i class="dopln">cesta.gz</i> | sudo dd of=<i class="dopln">/dev/oddíl</i> <span class="volznak">[</span>status=progress<span class="volznak">]</span></div>
</div></div>

<h2 id="cast4"><a href="#cast4"><span class="cislo">4.</span> Zaklínadla (LVM)</a></h2>

<h3 id="cast4x1"><span><a href="#cast4x1" title="kapitola 6 (Diskové oddíly), sekce 4 (Zaklínadla (LVM)), podsekce 1 (Fyzické svazky)"><sup>4/</sup>1 Fyzické svazky</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z403615852"><span><a href="#z403615852">☝</a></span></span><b>vytvořit</b> z celého zařízení/jeho oddílu<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">sudo pvcreate <i class="dopln">/dev/zařízení</i> <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
<div class="radekzaklinadla">sudo pvcreate <i class="dopln">/dev/oddíl</i> <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1140116989"><span><a href="#z1140116989">⇔</a></span></span><b>smazat</b><span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sudo pvremove <i class="dopln">/dev/zařízení-nebo-oddíl</i> <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z439129064"><span><a href="#z439129064">⌇</a></span></span><b>zkontrolovat</b><span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">sudo pvck <i class="dopln">/dev/zařízení-nebo-oddíl</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z303772227x"><span><a href="#z303772227x">⎛</a></span></span><b>vypsat</b> (pro člověka/pro skript)<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">sudo pvs</div>
<div class="radekzaklinadla">sudo pvs --noheadings | sed -E 's/^\s*(\S+)\s.*$/\1/'</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1986402032"><span><a href="#z1986402032">≊</a></span></span>uvolnit všechno místo na fyzickém svazku<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">sudo pvmove <i class="dopln">/dev/zařízení-nebo-oddíl</i></div>
</div></div>

<h3 id="cast4x2"><span><a href="#cast4x2" title="kapitola 6 (Diskové oddíly), sekce 4 (Zaklínadla (LVM)), podsekce 2 (Skupiny svazků)"><sup>4/</sup>2 Skupiny svazků</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z826910072"><span><a href="#z826910072">≅</a></span></span><b>vytvořit</b><span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">sudo vgcreate <i class="dopln">id-skupiny</i> <i class="dopln">/dev/fyzický-svazek</i><span class="tritecky"></span> <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1545174120"><span><a href="#z1545174120">⢦</a></span></span><b>přidat</b> fyzický svazek do skupiny<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sudo vgextend <i class="dopln">id-skupiny</i> <i class="dopln">/dev/fyzický-svazek</i><span class="tritecky"></span> <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1679290219"><span><a href="#z1679290219">⇎</a></span></span><b>odebrat</b> fyzický svazek ze skupiny<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">sudo pvmove <i class="dopln">/dev/fyzický-svazek</i></div>
<div class="radekzaklinadla">sudo vgreduce <i class="dopln">id-skupiny</i> <i class="dopln">/dev/fyzický-svazek</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1432048416"><span><a href="#z1432048416">⠂</a></span></span><b>přejmenovat</b><span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">sudo vgrename <i class="dopln">id-skupiny</i> <i class="dopln">nove-id-skupiny</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z303772227xx"><span><a href="#z303772227xx">⎛</a></span></span><b>vypsat</b> (pro člověka/pro skript)<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">sudo vgs</div>
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1140116989x"><span><a href="#z1140116989x">⇔</a></span></span><b>smazat</b><span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">sudo lvremove <i class="dopln">id-skupiny</i></div>
<div class="radekzaklinadla">sudo vgremove <i class="dopln">id-skupiny</i></div>
</div></div>

<h3 id="cast4x3"><span><a href="#cast4x3" title="kapitola 6 (Diskové oddíly), sekce 4 (Zaklínadla (LVM)), podsekce 3 (Logické oddíly)"><sup>4/</sup>3 Logické oddíly</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z429491941"><span><a href="#z429491941">⨒</a></span></span><b>vytvořit</b> (velikost zadat: absolutně/v procentech velikosti skupiny/v procentech velikosti volného místa/všechno volné místo)<span class="cislo">#1 </span><sup><a href="#kapdiskoveoddilyppc21" id="kapdiskoveoddilyppcr21" title="Pro přesnější určení rozměru můžete zadat velikost oddílu v mebibajtech místo gibibajtů (místo přípony „G“ uveďte příponu „M“), ale v takovém případě počítejte s možností, že systém zadanou hodnotu mírně zaokrouhlí nahoru.">(21)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo lvcreate <i class="dopln">id-skupiny</i> --name <i class="dopln">id-oddílu</i> --size <i class="dopln">gibibajtů</i>G <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">/dev/fyzický-svazek</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">sudo lvcreate <i class="dopln">id-skupiny</i> --name <i class="dopln">id-oddílu</i> --extents <i class="dopln">procenta</i>%VG <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
<div class="radekzaklinadla">sudo lvcreate <i class="dopln">id-skupiny</i> --name <i class="dopln">id-oddílu</i> --extents <i class="dopln">procenta</i>%FREE <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
<div class="radekzaklinadla">sudo lvcreate <i class="dopln">id-skupiny</i> --name <i class="dopln">id-oddílu</i> --extents 100%FREE <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z303772227xxx"><span><a href="#z303772227xxx">⎛</a></span></span><b>vypsat</b> (pro člověka/pro skript)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sudo lvs</div>
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z827537278"><span><a href="#z827537278">ⱶ</a></span></span><b>zvětšit</b> (na velikost/relativně)<span class="cislo">#3 </span><sup><a href="#kapdiskoveoddilyppc22" id="kapdiskoveoddilyppcr22" title="Volba --resizefs je podporována pouze pro některé typy systému souborů, zejména pro ext4.">(22)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo lvextend <i class="dopln">id-skupiny</i>/<i class="dopln">id-oddílu</i> --size <i class="dopln">gibibajtů</i>G <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
<div class="radekzaklinadla">sudo lvextend <i class="dopln">id-skupiny</i>/<i class="dopln">id-oddílu</i> --size +<i class="dopln">gibibajtů</i>G <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span> <span class="volznak">[</span>--resizefs<span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z119416888"><span><a href="#z119416888">❉</a></span></span><b>zmenšit</b> (na velikost/relativně)<span class="cislo">#4 </span><sup><a href="#kapdiskoveoddilyppc23" id="kapdiskoveoddilyppcr23" title="Pozor! Pokud je na zmenšovaném oddíle souborový systém, musíte ho před zmenšením oddílu zmenšit na odpovídající velikost, jinak dojde ke ztrátě dat! To neplatí, použijete-li zde parametr --resizefs.">(23)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo lvreduce <i class="dopln">id-skupiny</i>/<i class="dopln">id-oddílu</i> --size <i class="dopln">gibibajtů</i>G <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
<div class="radekzaklinadla">sudo lvreduce <i class="dopln">id-skupiny</i>/<i class="dopln">id-oddílu</i> --size +<i class="dopln">gibibajtů</i>G <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span> <span class="volznak">[</span>--resizefs<span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z182782088"><span><a href="#z182782088">⡺</a></span></span><b>přejmenovat</b> oddíl<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">sudo lvrename <i class="dopln">id-skupiny</i>/<i class="dopln">id-oddílu</i> <i class="dopln">nové-id-oddílu</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z686943150"><span><a href="#z686943150">≾</a></span></span><b>smazat</b> oddíl/všechny oddíly ve skupině<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">sudo lvremove <i class="dopln">id-skupiny</i>/<i class="dopln">id-oddílu</i> <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
<div class="radekzaklinadla">sudo lvremove <i class="dopln">id-skupiny</i> <span class="volznak">[</span>-v<span class="volznak">[</span>v<span class="volznak">]</span><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z588421104"><span><a href="#z588421104">☁</a></span></span>přesunout do jiné skupiny svazků<span class="cislo">#7 </span></div><div class="radky">
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
</div></div>

<h3 id="cast4x4"><span><a href="#cast4x4" title="kapitola 6 (Diskové oddíly), sekce 4 (Zaklínadla (LVM)), podsekce 4 (Ostatní)"><sup>4/</sup>4 Ostatní</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1217005040"><span><a href="#z1217005040">⋈</a></span></span>aktualizovat systémový přehled LVM podle připojených zařízení<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">sudo lvscan --mknodes</div>
</div></div>

<h2 id="cast5"><a href="#cast5"><span class="cislo">5.</span> Parametry příkazů</a></h2>

<h3 id="cast5x1"><span><a href="#cast5x1" title="kapitola 6 (Diskové oddíly), sekce 5 (Parametry příkazů), podsekce 1 (Volby připojení)"><sup>5/</sup>1 Volby připojení</a></span></h3>
<p class="ponadpisu">
Nejdůležitější volby připojení pro všechny typy systému souborů:
</p>
<table class="parametryprikazu"><tbody><tr><td>◉ rw ○ ro</td><td>Připojit pro čtení i zápis/jen pro čtení.</td></tr>

<tr><td>◉ dev ○ nodev</td><td>Povolit/zakázat speciální zařízení na připojeném systému souborů. (Doporučuji vždy „nodev“.)</td></tr>

<tr><td>◉ exec ○ noexec</td><td>Povolit/zakázat spouštění souborů z připojeného systému souborů.</td></tr>

<tr><td>◉ suid ○ nosuid</td><td>Povolit/zakázat respektování příznaků „u+s“ a „g+s“. V případě „nosuid“ tyto příznaky půjde měnit a číst, ale nebudou mít žádný vliv.</td></tr>

<tr><td>☐ sync</td><td>Zakáže používání systémové mezipaměti. Všechny operace budou prováděny přímo se zařízením.</td></tr>

<tr><td>○ lazytime ◉ nolazytime</td><td>lazytime: Časové známky u souborů se nebudou zapisovat na disk, dokud to nebude nutné; budou se aktualizovat pouze v paměti, což umožní výrazně snížit počet zápisů na disk. Příkaz „sync“ a některé další situace způsobí zapsání všech provedených změn časových známek na disk.</td></tr>

<tr><td>◉ relatime ○ strictatime ○ noatime</td><td>Časovou známku přístupu při čtení (access time) aktualizovat: jen pokud soubor či adresář od poslední změny nebyl čten/pokaždé/nikdy.</td></tr>

<tr><td>☐ nodiratime</td><td>U adresářů časovou známku přístupu pro čtení (access time) neaktualizovat nikdy.</td></tr>

<tr><td>☐ nofail</td><td>Jen se pokusit o připojení; případné selhání tiše ignorovat.</td></tr>

<tr><td>☐ noauto</td><td>Nepřipojovat automaticky při startu systému (resp. příkazem „mount -a“).</td></tr>

<tr><td>☐ X-mount.mkdir</td><td>Pokud přípojný bod neexistuje, vytvoří ho s přístupovými právy „u=rwx,go=rx“. (Poznámka: připojený adresář tato práva zpravidla přepíše.) Podle manuálové stránky je tato volba dovolena pouze superuživateli.</td></tr>

</tbody></table>
<p>
Nejdůležitější volby připojení pro <b>ext4</b>, <b>ext3</b> a <b>ext2</b>:
</p>
<table class="parametryprikazu"><tbody><tr><td>○ errors=remount-ro ○ errors=panic ○ errors=continue</td><td>V případě kritické chyby: připojí systém jen pro čtení/zhroutí se/pokračuje. (Nezkoušel/a jsem.)</td></tr>

<tr><td>◉ user_xattr ○ nouser_xattr</td><td>Povolí/zakáže uživatelské rozšířené atributy. (ext3/ext4) V případě nouser_xattr budou uživatelské rozšířené atributy stávajících souborů a adresářů zachovány, ale nepůjdou číst ani zapisovat.</td></tr>

<tr><td>◉ acl ○ noacl</td><td>Povolí/zakáže rozšířená přístupová práva. (Zatím jsem nezkoušel/a.)</td></tr>

<tr><td>○ discard ○ nodiscard</td><td>Zapne/vypne automatické označování prázdného prostoru na SSD discích (operace TRIM).</td></tr>

</tbody></table>
<p>
Nejdůležitější volby připojení pro <b>vfat</b> (FAT32, FAT16, popř. FAT12):
</p>
<table class="parametryprikazu"><tbody><tr><td>☐ uid=<i class="dopln">UID</i></td><td>Nastaví vlastníka všech položek.</td></tr>

<tr><td>☐ gid=<i class="dopln">GID</i></td><td>Nastaví skupinu všech položek.</td></tr>

<tr><td>○ umask=<i class="dopln">mód</i> ○ dmask=<i class="dopln">mód</i>,fmask=<i class="dopln">mód</i></td><td>Nastaví přístupová práva všech adresářových položek/všech adresářů a souborů.</td></tr>

<tr><td>☐ quiet</td><td>Pokusy o změnu vlastníka, skupiny či přístupových práv nevyvolají chybu.</td></tr>

<tr><td>○ fat=12 ○ fat=16 ○ fat=32</td><td>Vynutí konkrétní verzi FAT (obvykle není potřeba, autodetekce pozná typ správně).</td></tr>

</tbody></table>
<p>
Nejdůležitější volby připojení pro <b>ntfs</b>:
</p>
<table class="parametryprikazu"><tbody><tr><td>☐ uid=<i class="dopln">UID</i></td><td>Nastaví vlastníka všech položek.</td></tr>

<tr><td>☐ gid=<i class="dopln">GID</i></td><td>Nastaví skupinu všech položek.</td></tr>

<tr><td>○ umask=<i class="dopln">mód</i></td><td>Nastaví přístupová práva všech adresářových položek.</td></tr>

</tbody></table>
<p>
Nejdůležitější volby připojení pro <b>tmpfs</b> (ramdisk):
</p>
<table class="parametryprikazu"><tbody><tr><td>☐ size=<i class="dopln">velikost</i></td><td>Nastaví kapacitu „ramdisku“; typicky se používá s příponami „M“ pro mebibajty a „G“ pro gibibajty (např. „size=4G“).</td></tr>

<tr><td>☐ uid=<i class="dopln">UID</i></td><td>Nastaví počátečního vlastníka kořenového adresáře.</td></tr>

<tr><td>☐ gid=<i class="dopln">GID</i></td><td>Nastaví počáteční skupinu kořenového adresáře.</td></tr>

<tr><td>○ umask=<i class="dopln">mód</i></td><td>Nastaví počítační přístupová práva a příznaky kořenového adresáře.</td></tr>

</tbody></table>

<h2 id="cast6"><a href="#cast6"><span class="cislo">6.</span> Instalace na Ubuntu</a></h2>
<p class="ponadpisu">
Všechny použité nástroje jsou základními součástmi Ubuntu, kromě nástrojů pro práci s LVM a nástroje GParted.
Pokud chcete používat LVM, musíte doinstalovat:
</p>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">sudo apt-get install lvm2</div>
</div></div>
<p>
Nástroj GParted najdete v balíčku „gparted“:
</p>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">sudo apt-get install gparted</div>
</div></div>

<h2 id="cast7"><a href="#cast7"><span class="cislo">7.</span> Tipy a zkušenosti</a></h2>
<ul><li>Pomocí příkazu „mount --bind“ můžete jeden ramdisk připojit na několik různých míst VFS!
</li><li>V případě změny velikosti oddílu v LVM je třeba samostatně změnit velikost souborového systému a samostatně velikost logického oddílu. Výjimkou je souborový systém „ext4“, u kterého je možné tyto operace sloučit použitím parametru „--resizefs“.
</li><li>LVM poskytuje svůj vlastní interpret příkazové řádky, který nabízí pouze příkazy související s LVM (bez zadávání „sudo“). Spustíte ho příkazem „sudo lvm“.
</li><li>Zadáte-li výměnnou jednotku (např. USB flash disk) v /etc/fstab a tato jednotka nebude dostupná při startu systému, zavádění selže a nabídne vám přechod do záchranného režimu. Proti tomu pomohou volby „nofail“ (v případě jakékoliv chyby se připojení systému souborů tiše přeskočí) a „noauto“ (systém se vůbec nepokusí o připojení, ale oddíl či jednotku půjde připojit zkrácenou syntaxí příkazu „mount“).
</li></ul>
<h2 id="cast8"><a href="#cast8"><span class="cislo">8.</span> Další zdroje informací</a></h2>
<ul class="kompaktni"><li><a href="https://www.abclinuxu.cz/serialy/lvm">Seriál Logical Volume Manager</a>
</li><li><a href="https://cs.wikipedia.org/wiki/Logical_Volume_Management">Wikipedie: Logical Volume Management</a>
</li><li><a href="https://linuxhint.com/lvm-ubuntu-tutorial/">LVM Ubuntu Tutorial</a> (anglicky)
</li><li>man lvm
</li><li><a href="https://wiki.archlinux.org/index.php/LVM">Arch Wiki: LVM</a> (anglicky)
</li><li><a href="https://packages.ubuntu.com/bionic/lvm2">Balíček Bionic</a> (anglicky)
</li><li><a href="https://www.youtube.com/watch?v=m9SNN6IWyZo">YouTube: Lesson 20 Managing LVM</a> (anglicky)
</li><li><a href="https://www.youtube.com/watch?v=scMkYQxBtJ4">YouTube: Combining Drives Together</a> (anglicky)
</li><li><a href="https://www.youtube.com/watch?v=N8rUlYL2O_g">YouTube: LVM snapshots</a> (anglicky)
</li></ul><div class="ppc"><div id="kapdiskoveoddilyppc1"><a href="#kapdiskoveoddilyppcr1" class="cislopozn">1</a>&nbsp;Poznámka: Připojení kořenového systému souborů by mělo být v /etc/fstab první řádkou kromě komentářů a prázdných řádek.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc2"><a href="#kapdiskoveoddilyppcr2" class="cislopozn">2</a>&nbsp;2 v posledním poli zapne automatickou kontrolu souboru systémů při startu; tato volba je vhodná pro místní souborové systémy. 0 v posledním poli automatickou kontrolu vypne, ta je vhodná především pro výměnná média a síťové systémy souborů. Rovněž je vhodná pro místní systémy souborů připojované výhradně pro čtení.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc3"><a href="#kapdiskoveoddilyppcr3" class="cislopozn">3</a>&nbsp;Velikost se udává nejčastěji v mebibajtech (s příponou M – např. „256M“) nebo gibibajtech (s příponou G – např. „10G“).</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc4"><a href="#kapdiskoveoddilyppcr4" class="cislopozn">4</a>&nbsp;Příkaz „eject“ pro jistotu používejte se sudo, popř. vyzkoušejte, zda bez něj ve vašem konkrétním případě funguje. Často se mi stává, že i uživateli, který je ve skupinách „cdrom“ a „plugdev“ selže s chybou „Nemohu otevřít zařízení“ a zatím se mi nepodařilo zjistit, jaké tam platí pravidlo.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc5"><a href="#kapdiskoveoddilyppcr5" class="cislopozn">5</a>&nbsp;Poznámka: Tímto příkazem se vytvoří nové, nezávislé připojení existujícího systému souborů.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc6"><a href="#kapdiskoveoddilyppcr6" class="cislopozn">6</a>&nbsp;Poznámka: vypsaný seznam může obsahovat i zařízení nedostupná či k ukládání dat nevhodná. Buďte při jejich zkoumání opatrní.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc7"><a href="#kapdiskoveoddilyppcr7" class="cislopozn">7</a>&nbsp;Odpověď 0 znamená, že zařízení je i pro zápis; odpověď 1 znamená, že je jen pro čtení.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc8"><a href="#kapdiskoveoddilyppcr8" class="cislopozn">8</a>&nbsp;Maximální velikost jmenovky je 16 bajtů.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc9"><a href="#kapdiskoveoddilyppcr9" class="cislopozn">9</a>&nbsp;Parametr -U přijímá také speciální hodnoty „random“ (vygenerovat náhodné UUID), „time“ (vygenerovat UUID závislé na čase), „clear“ (zrušit UUID).</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc10"><a href="#kapdiskoveoddilyppcr10" class="cislopozn">10</a>&nbsp;Poznámka: jmenovka systémů FAT může být maximálně 11 znaků dlouhá!</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc11"><a href="#kapdiskoveoddilyppcr11" class="cislopozn">11</a>&nbsp;Pro formátování na FAT16 či FAT12 nahraďte hodnotu 32 u parametru -F. Tyto staré souborové systémy se dnes už ale v praxi nepoužívají.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc12"><a href="#kapdiskoveoddilyppcr12" class="cislopozn">12</a>&nbsp;Velikost se zadává s příponou (např. „2048M“ nebo „4G“). Pokud ji nezadáte, souborový systém se zvětší tak, aby pokud možno zaplnil celý oddíl. Tip: velikost souborového systému lze obvykle změnit i tehdy, když je souborový systém připojený.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc13"><a href="#kapdiskoveoddilyppcr13" class="cislopozn">13</a>&nbsp;Pro odkládací oddíl či soubor platí totéž, co pro běžné diskové oddíly — aby se připojil automaticky při startu systému, musí být odpovídající záznam zapsaný v /etc/fstab!</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc14"><a href="#kapdiskoveoddilyppcr14" class="cislopozn">14</a>&nbsp;Bez sudo vynechá jmenovky a UUID.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc15"><a href="#kapdiskoveoddilyppcr15" class="cislopozn">15</a>&nbsp;Velikost můžete zadat také v megabajtech (s příponou „M“) či gigabajtech (s příponou „G“).</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc16"><a href="#kapdiskoveoddilyppcr16" class="cislopozn">16</a>&nbsp;Jmenovka souborového systému FAT32 může mít nejvýše 11 znaků. Z důvodu kompatibility by měla být tvořena pouze velkými písmeny anglické abecedy, číslicemi, pomlčkami a podtržítky. Ostatní typy systému souborů mají omezení na jmenovku podstatně volnější.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc17"><a href="#kapdiskoveoddilyppcr17" class="cislopozn">17</a>&nbsp;Příkaz „fsck“ pravděpodobně lze použít i se souborovým systémem v souboru, ale nezkoušel/a jsem to.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc18"><a href="#kapdiskoveoddilyppcr18" class="cislopozn">18</a>&nbsp;Poznámka: Tento příkaz chybné bloky najde, ale neudělá nic proto, aby se je systém souborů nesnažil používat.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc19"><a href="#kapdiskoveoddilyppcr19" class="cislopozn">19</a>&nbsp;Pokud jste začátečník, nedefragmentujte oddíly typu ext4! Obvykle to není potřeba.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc20"><a href="#kapdiskoveoddilyppcr20" class="cislopozn">20</a>&nbsp;Pozor! Tato operace je velmi nebezpečná! Pokud zadáte chybný cílový oddíl, daný oddíl se nevratně přepíše daty určenými pro ten správný. Pokud velikost zálohy neodpovídá přesně velikosti cílového oddílu, nemusí být oddíl po obnově dobře použitelný. Tento příkaz používejte s velkou opatrností!</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc21"><a href="#kapdiskoveoddilyppcr21" class="cislopozn">21</a>&nbsp;Pro přesnější určení rozměru můžete zadat velikost oddílu v mebibajtech místo gibibajtů (místo přípony „G“ uveďte příponu „M“), ale v takovém případě počítejte s možností, že systém zadanou hodnotu mírně zaokrouhlí nahoru.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc22"><a href="#kapdiskoveoddilyppcr22" class="cislopozn">22</a>&nbsp;Volba --resizefs je podporována pouze pro některé typy systému souborů, zejména pro ext4.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapdiskoveoddilyppc23"><a href="#kapdiskoveoddilyppcr23" class="cislopozn">23</a>&nbsp;Pozor! Pokud je na zmenšovaném oddíle souborový systém, musíte ho před zmenšením oddílu zmenšit na odpovídající velikost, jinak dojde ke ztrátě dat! To neplatí, použijete-li zde parametr --resizefs.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
</div>


<nav class="spodni">
<a href="index.htm" class="naindex">🗐&nbsp;Přehled&nbsp;kapitol</a>
<div class="naslkap">
<a href="docker.htm" rel="next" title="6. Docker">Následující&nbsp;kapitola/dodatek:<br><span class="cislo">6</span>
<span class="nazev">Docker</span></a>
</div>
<!--<div><a href="index.htm">🗐&nbsp;Přehled&nbsp;kapitol</a></div>-->
<a href="#nahore" id="odkaznahoru" title="NAHORU − na začátek stránky">▴<!--⤒--></a>
<a href="#dole" id="odkazdolu" title="DOLŮ − na konec stránky">▾<!--⤓--></a>
</nav>


<div class="odkazydole"><div><a href="vim.htm"><img src="obrazky/ik/vim.png" alt="" width="32" height="32">Vim</a><a href="regularni-vyrazy.htm"><img src="obrazky/ik/regularni-vyrazy.png" alt="" width="32" height="32">Regulární výrazy</a><a href="markdown.htm"><img src="obrazky/ik/markdown.png" alt="" width="32" height="32">Markdown</a></div></div>


</article>
<nav class="menu">
<!-- MENU KAPITOLY -->
<a href="#menukapitoly" id="menukapitoly"><span class="prvnipismeno">K</span>apitoly</a>
<aside class="menukapitoly">
<div><div class="nadpis">Kapitoly</div><div class="polozky">
<a href="predmluva.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/predmluva.png" alt="[]"></span><span class="cislo">1</span><span class="nazev">Předmluva</span></a>
<a href="awk.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/awk.png" alt="[]"></span><span class="cislo">2</span><span class="nazev">AWK</span></a>
<a href="barvy-a-titulek.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/barvy-a-titulek.png" alt="[]"></span><span class="cislo">3</span><span class="nazev">Barvy, titulek a výzva terminálu</span></a>
<a href="datum-cas-kalendar.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/datum-cas-kalendar.png" alt="[]"></span><span class="cislo">4</span><span class="nazev">Datum, čas a kalendář</span></a>
<a href="diskove-oddily.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/diskove-oddily.png" alt="[]"></span><span class="cislo">5</span><span class="nazev">Diskové oddíly</span></a>
<a href="docker.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/docker.png" alt="[]"></span><span class="cislo">6</span><span class="nazev">Docker</span></a>
<a href="git.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/git.png" alt="[]"></span><span class="cislo">7</span><span class="nazev">Git</span></a>
<a href="hledani-souboru.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/hledani-souboru.png" alt="[]"></span><span class="cislo">8</span><span class="nazev">Hledání souborů</span></a>
<a href="make.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/make.png" alt="[]"></span><span class="cislo">9</span><span class="nazev">Make</span></a>
<a href="markdown.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/markdown.png" alt="[]"></span><span class="cislo">10</span><span class="nazev">Markdown</span></a>
<a href="planovani-uloh.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/planovani-uloh.png" alt="[]"></span><span class="cislo">11</span><span class="nazev">Plánování úloh</span></a>
<a href="prace-s-archivy.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/prace-s-archivy.png" alt="[]"></span><span class="cislo">12</span><span class="nazev">Práce s archivy</span></a>
<a href="promenne.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/promenne.png" alt="[]"></span><span class="cislo">13</span><span class="nazev">Proměnné prostředí a interpretu</span></a>
<a href="regularni-vyrazy.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/regularni-vyrazy.png" alt="[]"></span><span class="cislo">14</span><span class="nazev">Regulární výrazy</span></a>
<a href="sed.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/sed.png" alt="[]"></span><span class="cislo">15</span><span class="nazev">Sed</span></a>
<a href="soubory-a-adresare.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/soubory-a-adresare.png" alt="[]"></span><span class="cislo">16</span><span class="nazev">Soubory a adresáře</span></a>
<a href="sprava-balicku.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/sprava-balicku.png" alt="[]"></span><span class="cislo">17</span><span class="nazev">Správa balíčků</span></a>
<a href="sprava-procesu.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/sprava-procesu.png" alt="[]"></span><span class="cislo">18</span><span class="nazev">Správa procesů</span></a>
<a href="sprava-uzivatelskych-uctu.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/sprava-uzivatelskych-uctu.png" alt="[]"></span><span class="cislo">19</span><span class="nazev">Správa uživatelských účtů</span></a>
<a href="system.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/system.png" alt="[]"></span><span class="cislo">20</span><span class="nazev">Systém</span></a>
<a href="vim.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/vim.png" alt="[]"></span><span class="cislo">21</span><span class="nazev">Vim</span></a>
<a href="zpracovani-textovych-souboru.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/zpracovani-textovych-souboru.png" alt="[]"></span><span class="cislo">22</span><span class="nazev">Zpracování textových souborů</span></a>
<a href="zpracovani-videa-a-zvuku.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/zpracovani-videa-a-zvuku.png" alt="[]"></span><span class="cislo">23</span><span class="nazev">Zpracování videa a zvuku</span></a>
<a href="licence.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik-vychozi.png" alt="[]"></span><span class="cislo">24</span><span class="nazev">Licence</span></a>
</div></div>
<a href="#zavritmenu" id="zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
<!-- MENU OSNOVA -->
<a href="#menuosnova" id="menuosnova"><span class="prvnipismeno">O</span>snova</a>
<aside class="menuosnova">
<div><div class="nadpis">Osnova</div><div class="polozky">
<a href="#cast1" class="sekce">1 Úvod</a>
<a href="#cast2" class="sekce">2 Definice</a>
<a href="#cast2x1" class="podsekce">/1 Obecné definice</a>
<a href="#cast2x2" class="podsekce">/2 LVM</a>
<a href="#cast2x3" class="podsekce">/3 Co a kam připojit</a>
<a href="#cast3" class="sekce">3 Zaklínadla</a>
<a href="#cast3x1" class="podsekce">/1 Položky v /etc/fstab</a>
<a href="#cast3x2" class="podsekce">/2 Připojení a odpojení systému souborů</a>
<a href="#cast3x3" class="podsekce">/3 Již připojené systémy souborů (vypsat/zjistit údaje)</a>
<a href="#cast3x4" class="podsekce">/4 Oddíly a zařízení (vypsat/zjistit údaje)</a>
<a href="#cast3x5" class="podsekce">/5 Formátování</a>
<a href="#cast3x6" class="podsekce">/6 Odkládací oddíly a soubory</a>
<a href="#cast3x7" class="podsekce">/7 Dělení disku</a>
<a href="#cast3x8" class="podsekce">/8 Jmenovka (nastavit)</a>
<a href="#cast3x9" class="podsekce">/9 Degrafmentace, kontrola, TRIM apod.</a>
<a href="#cast3x10" class="podsekce">/10 Ostatní</a>
<a href="#cast4" class="sekce">4 Zaklínadla (LVM)</a>
<a href="#cast4x1" class="podsekce">/1 Fyzické svazky</a>
<a href="#cast4x2" class="podsekce">/2 Skupiny svazků</a>
<a href="#cast4x3" class="podsekce">/3 Logické oddíly</a>
<a href="#cast4x4" class="podsekce">/4 Ostatní</a>
<a href="#cast5" class="sekce">5 Parametry příkazů</a>
<a href="#cast5x1" class="podsekce">/1 Volby připojení</a>
<a href="#cast6" class="sekce">6 Instalace na Ubuntu</a>
<a href="#cast7" class="sekce">7 Tipy a zkušenosti</a>
<a href="#cast8" class="sekce">8 Další zdroje informací</a>
</div></div>
<a href="#zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
<!-- MENU ŠTÍTKY -->
<a href="#menustitky" id="menustitky"><span class="prvnipismeno">Š</span>títky</a>
<aside class="menustitky">
<div><div class="nadpis">Štítky</div><div class="polozky">
<a href="x-stitky.htm#sdrese">adresáře&nbsp;&nbsp;(2)</a>
<a href="x-stitky.htm#spt">apt&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sbrvy">barvy&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sbsh">bash&nbsp;&nbsp;(3)</a>
<a href="x-stitky.htm#scs">čas&nbsp;&nbsp;(2)</a>
<a href="x-stitky.htm#sdmoni">démoni&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#seditor">editor&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sfltpk">Flatpak&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#shledn">hledání&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sklvesnice">klávesnice&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#skomprese">komprese&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#skontejnery">kontejnery&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#slvm">LVM&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sodkldcprostor">odkládací prostor&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sovldn">ovládání&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sprocesy">procesy&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sprogrm">program&nbsp;&nbsp;(6)</a>
<a href="x-stitky.htm#sprogrmovn">programování&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#spstupovprv">přístupová práva&nbsp;&nbsp;(2)</a>
<a href="x-stitky.htm#srmdisk">ramdisk&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#ssnp">Snap&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#ssoubory">soubory&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#ssprvverz">správa verzí&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#ssyntxe">syntaxe&nbsp;&nbsp;(4)</a>
<a href="x-stitky.htm#ssystm">systém&nbsp;&nbsp;(6)</a>
<a href="x-stitky.htm#stemtickokruh">tematický okruh&nbsp;&nbsp;(14)</a>
<a href="x-stitky.htm#svideo">video&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#svirtulizce">virtualizace&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#szip">zip&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#szprcovntextu">zpracování textu&nbsp;&nbsp;(4)</a>
<a href="x-stitky.htm#szvuk">zvuk&nbsp;&nbsp;(1)</a>
</div></div>
<a href="#zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
<!-- MENU NÁPOVĚDA -->
<a href="#menunapoveda" id="menunapoveda"><span class="prvnipismeno">N</span>ápověda</a>
<aside class="menunapoveda">
<div><div class="nadpis">Nápověda</div><div class="polozky">
<a href="predmluva.htm">Předmluva</a>
<a href="https://singularis-mzf.github.io/">Ostatní verze knihy</a>
<a href="https://github.com/singularis-mzf/linux-spellbook">Repozitář na GitHubu</a>
</div></div>
<a href="#zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>

</nav>
<!-- *** -->
<footer id="dole">
<img src="obrazky/by-sa.png" width="88" height="31" alt="[BY-SA]">
<p>Veškerý obsah této stránky (text, obrázky, zdrojový kód) je možno upravovat a šířit pod podmínkami licence
<a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a>.
Upozorňuji, že uvedená licence vyžaduje uvedení seznamu autorů, licence a zdroje a poskytnutí stejné
či kompatibilní licence k provedeným změnám, jsou-li nějaké. Příslušné údaje jsou dostupné
na stránce „<a href="x-autori.htm">Přehled autorů</a>“.
Šíření obsahu bez těchto údajů nebo šíření upravené verze bez poskytnutí adekvátní
licence k provedeným úpravám je pravděpodobně porušení licenčních podmínek a může být postihováno.
Poskytování zdrojového kódu při šíření není touto licencí vyžadováno.</p><p>Pro nové verze, další informace, aktuální zdrojový kód
a možnost se zapojit do projektu „Linux: Kniha kouzel“ navštivte jeho
<a href="https://github.com/singularis-mzf/linux-spellbook">repozitář na GitHubu</a>.
</footer>
</body>
</html>
