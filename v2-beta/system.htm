<!doctype html>
<html lang="cs">
<head profile="http://www.w3.org/2005/10/profile">
<meta charset="UTF-8">

<title>Systém − Linux: Kniha kouzel</title>

<link rel="stylesheet" type="text/css" href="lkk-20200912.css">
<link rel="alternate stylesheet" type="text/css" href="lkk-20200912-vk-svetly.css" title="Vysoký kontrast: světlá varianta">
<link rel="alternate stylesheet" type="text/css" href="lkk-20200912-vk-tmavy.css" title="Vysoký kontrast: tmavá varianta">
<link rel="alternate stylesheet" type="text/css" href="lkk-20200912-svetly.css" title="Světlý motiv">
<link rel="icon" type="image/png" href="obrazky/favicon.png">
</head>
<body>
<div id="nahore"><div id="okno">
<header>
<span class="vlevo"><a href="index.htm"><img src="obrazky/favicon.png" width="16" height="16" alt=""></a> Linux: Kniha kouzel, betaverze 2.0 (12. září 2020)</span>
<span class="vpravo"><span class="ico1"></span><span class="ico2"></span><span class="ico3"></span></span>
</header>
<nav class="menuokna">
<a href="#menukapitoly" class="menu"><span class="prvnipismeno">K</span>apitoly</a>
<a href="#menuosnova" class="menu"><span class="prvnipismeno">O</span>snova</a>
<a href="#menustitky" class="menu"><span class="prvnipismeno">Š</span>títky</a>
<a href="#menunapoveda" class="menu"><span class="prvnipismeno">N</span>ápověda</a>
<a href="stahovani-videi.htm" rel="prev" title="17. Stahování videí" accesskey="p" class="predchozi">Předchozí&nbsp;kapitola</a>
<a href="index.htm" class="prehled"><span class="prvnipismeno">P</span>řehled kapitol</a>
<a href="terminal.htm" rel="next" title="19. Terminál" accesskey="n" class="nasledujici">Následující&nbsp;kapitola</a>
</nav>

<div class="slogan-veskera-moc">Veškerá moc příkazové řádky/příkazového řádku přehledně, pro začátečníky i&nbsp;pokročilé</div>

<!--
<nav class="horni">
<div class="slogan">Veškerá moc příkazové řádky/příkazového řádku přehledně, pro začátečníky i&nbsp;pokročilé</div>
<span class="prev">
<a href="stahovani-videi.htm" rel="prev" title="17. Stahování videí" accesskey="p">Předchozí&nbsp;kapitola</a>&nbsp;|
</span><a href="index.htm" accesskey="i">Přehled</a><span class="next"><!- -
- ->&nbsp;| <a href="terminal.htm" rel="next" title="19. Terminál" accesskey="n">Následující&nbsp;kapitola</a>
</span>
</nav>
-->


<article>

<h1 class="kapitola">18. <img src="obrazky/ik/system.png" alt="" width="64" height="64"> Systém</h1>
<div class="stitky"><a href="x-stitky.htm#sdmoni">démoni</a>
<a href="x-stitky.htm#sklvesnice">klávesnice</a>
<a href="x-stitky.htm#ssystm">systém</a>
<a href="x-stitky.htm#stemtickokruh">tematický okruh</a>
</div>
<h2 id="cast1"><a href="#cast1"><span class="cislo">1.</span> Úvod</a></h2>
<p class="ponadpisu">
Tato kapitola se zabývá vybranými aspekty běhu operačního systému a jeho ovládání,
zejména ovládáním démonů, systémovými logy, restartem či vypnutím počítače.
Také se zabývá rozložením klávesnice.
</p><p>
Když zavaděč GRUB spustí jádro systému, to pak vytvoří dva první procesy: systemd (PID 1)
a kthreadd (PID 2). Systemd pak na základě tzv. výchozího cíle a dalších nastavení
spustí další démony a také správce příhlášení, kteří umožní uživatelům přihlašovat
se do systému (popř. automaticky přihlásí výchozího uživatele). Když se uživatel přihlásí,
vznikne takzvané „sezení“, které zanikne, až se uživatel odhlásí
(včetně případů, kdy je odhlášení součástí restartu či vypnutí počítače).
</p><p>
Tato kapitola se nezabývá samotným zaváděním operačního systému a diskovými oddíly.
</p><p>
Tato verze kapitoly pokrývá jen velmi omezeně zjišťování informací o hardware;
nepokrývá nastavení automatického přihlašování do X,
nastavování cílů, nastavení synchronizace systémového času s NTP servery
ani vytváření vlastních služeb a démonů.
Rovněž nepokrývá ovládání kontejnerů příkazem „machinectl“.
</p>

<h2 id="cast2"><a href="#cast2"><span class="cislo">2.</span> Definice</a></h2>
<ul><li><b>Král démonů</b> („systemd“ s PID 1, v Ubuntu se z důvodu kompatibility v některých výpisech ukazuje jako „init“) je ústřední démon systému, který řídí jeho start, restart či vypnutí a spouští a zastavuje další systémové démony. V některých linuxových komunitách má špatnou pověst, protože jeho předchůdce Upstart kdysi nevybíravě převzal „vládu“ od tehdy oblíbeného procesu „init“ (zvaného také „sysvinit“) a systemd pak pod svoji kontrolu sjednotil mnoho do té doby nezávisle řešených funkcí systému. Jako uživatele vás však od něj nečeká žádné nebezpečí, pokud mu nebudete překážet.
</li><li><b>Démon</b> je proces bez vlastního uživatelského rozhraní (obvykle se s ním komunikuje zvláštními příkazy nebo po sběrnici D-BUS). Existují tři druhy démonů: <b>Systémoví démoni</b> jsou „systemd“ s PID 1 a jeho přímí potomci, kromě těch, kteří mají uživatelské rozhraní (jako např. lightdm). <b>Jaderní démoni</b> jsou „kthreadd“ (PID 2) a jeho zrozenci. Jaderní démoni se zodpovídají pouze jádru, jsou mimo kontrolu uživatele i krále démonů. <b>Uživatelští démoni</b> jsou pak procesy spuštěné obyčejným uživatelem na pozadí a bez uživatelského rozhraní; patří k nim zejména uživatelská instance „systemd“ (ta s PID jiným než 1) a její potomci.
</li><li><b>Systémová jednotka</b> (unit) je datová struktura krále démonů. Systemd rozeznává jedenáct druhů systémových jednotek, z nichž nejznámější a nejdůležitější jsou <b>služby</b> („service“), reprezentující démony. Další významné jsou <b>sokety</b> („socket“, souvisí se službami a umožňují démonům nabízet svoje služby ostatním démonům), <b>cíle</b> („target“, seskupení jednotek pro určité situace) a <b>časovače</b> („timer“, pravidelně probouzejí a ruší démony).
</li><li><b>Sezení</b> je instance přihlášení uživatele k systému ve víceuživatelském režimu; vzniká přihlášením uživatele a zaniká jeho odhlášením, resp. ukončením všech procesů daného sezení. Sezení může být grafické či textové a může být místní nebo vzdálené.
</li></ul>
<h2 id="cast3" class="zaklinadla"><a href="#cast3"><span class="cislo">3.</span> Zaklínadla</a></h2>

<h3 id="cast3x1"><span><a href="#cast3x1" title="kapitola 19 (Systém), sekce 3 (Zaklínadla), podsekce 1 (Informace o systému (zjistit))"><sup>3/</sup>1 Informace o systému (zjistit)</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z135304546"><span><a href="#z135304546">┃</a></span></span>obecné informace (pro člověka)(alternativy)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">neofetch</div>
<div class="radekzaklinadla">inxi</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z722463525"><span><a href="#z722463525">⡵</a></span></span>verze a varianta <b>jádra</b><span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">uname -r<span class="prikladhodnoty">⊨ 5.4.0-47-generic</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z137016580"><span><a href="#z137016580">┇</a></span></span>čas od spuštění systému (<b>uptime</b>)<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">uptime --pretty</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z958618588"><span><a href="#z958618588">⪷</a></span></span>kompletní informace o <b>hardware</b> (textově/s prohlížečem)<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">sudo lshw</div>
<div class="radekzaklinadla">sudo lshw -html &gt;/tmp/lshw.htm &amp;&amp; sensible-browser /tmp/lshw.htm</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z531568236"><span><a href="#z531568236">⋹</a></span></span>počet logických procesorů/fyzických jader<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">nproc --all</div>
<div class="radekzaklinadla">lscpu -p=CORE,SOCKET | egrep -v '^#' | sort -u | wc -l</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z486928175"><span><a href="#z486928175">↷</a></span></span>jméno procesoru<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C lscpu | egrep '^Model name:' | sed -E 's/^[^:]*:\s*//'</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1182287385"><span><a href="#z1182287385">⠸</a></span></span>informace o <b>frekvenci procesoru</b> (pro člověka)<span class="cislo">#7 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C lscpu | egrep '^CPU[^:]+MHz:'</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1913839281"><span><a href="#z1913839281">☛</a></span></span>informace o velikosti a využití <b>paměti</b> a odkládacího prostoru<span class="cislo">#8 </span></div><div class="radky">
<div class="radekzaklinadla">free -h</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z2089551712"><span><a href="#z2089551712">∷</a></span></span>zjistit druh počítače (stolní počítač, nebo <b>notebook</b>?)<span class="cislo">#9 </span><sup><a href="#kapsystemppc1" id="kapsystemppcr1" title="Návratový kód je 0 pro notebook, 1 pro stolní počítač a 2, pokud to nelze zjistit. Ve virtuálním počítači dle mých zkušeností, tento přikaz zjistí druh fyzického počítače, na kterém virtuální počítač běží.">(1)</a></sup></div><div class="radky">
<div class="radekzaklinadla">laptop-detect</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1412351642"><span><a href="#z1412351642">⣌</a></span></span>kódové jméno verze <b>distribuce</b><span class="cislo">#10 </span></div><div class="radky">
<div class="radekzaklinadla">lsb_release -sc<span class="prikladhodnoty">⊨ focal</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z673328141"><span><a href="#z673328141">ǀ</a></span></span>jméno/verze <b>distribuce</b><span class="cislo">#11 </span></div><div class="radky">
<div class="radekzaklinadla">lsb_release -si<span class="prikladhodnoty">⊨ Ubuntu</span></div>
<div class="radekzaklinadla">lsb_release -sr<span class="prikladhodnoty">⊨ 20.04</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z2144725862"><span><a href="#z2144725862">⇋</a></span></span><b>jméno počítače</b><span class="cislo">#12 </span></div><div class="radky">
<div class="radekzaklinadla">hostname<span class="prikladhodnoty">⊨ mojepc</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z493800556"><span><a href="#z493800556">✭</a></span></span>jméno jádra/druh operačního systému<span class="cislo">#13 </span></div><div class="radky">
<div class="radekzaklinadla">uname -n<span class="prikladhodnoty">⊨ Linux</span></div>
<div class="radekzaklinadla">uname -o<span class="prikladhodnoty">⊨ GNU/Linux</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z2058141791"><span><a href="#z2058141791">⢞</a></span></span>architektura systému<span class="cislo">#14 </span></div><div class="radky">
<div class="radekzaklinadla">arch<span class="prikladhodnoty">⊨ x86_64</span></div>
</div></div>

<h3 id="cast3x2"><span><a href="#cast3x2" title="kapitola 19 (Systém), sekce 3 (Zaklínadla), podsekce 2 (Restart a vypnutí počítače)"><sup>3/</sup>2 Restart a vypnutí počítače</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1788733761"><span><a href="#z1788733761">⌍</a></span></span><b>restartovat</b> počítač (normálně/drasticky/velmi drasticky)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">reboot</div>
<div class="radekzaklinadla">sudo systemctl reboot --force</div>
<div class="radekzaklinadla">sudo systemctl reboot --force --force</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1066904039"><span><a href="#z1066904039">⟻</a></span></span><b>vypnout</b> počítač (normálně/drasticky/velmi drasticky)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">poweroff</div>
<div class="radekzaklinadla">sudo systemctl poweroff --force</div>
<div class="radekzaklinadla">sudo systemctl poweroff --force --force</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z952328429"><span><a href="#z952328429">⡊</a></span></span>přepnout do jednouživatelského režimu (záchranného/nouzového)<span class="cislo">#3 </span><sup><a href="#kapsystemppc2" id="kapsystemppcr2" title="Podle dokumentace poskytuje záchranný režim základní služby a připojené souborové systémy pro pohodlnou práci, zatímco nouzový režim nespustí nic a očekává od uživatele, že si spustí služby, které potřebuje, a připojí potřebné souborové systémy. Ovšem při přechodu z běžícího systému těmito příkazy jsem tento rozdíl nepozoroval/a. Souborové systémy zůstaly i v nouzovém režimu normálně připojené.">(2)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo systemctl rescue</div>
<div class="radekzaklinadla">sudo systemctl emergency</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1384312648"><span><a href="#z1384312648">⋄</a></span></span><b>uspat</b> systém (trvale/na N sekund/na 48 hodin)<span class="cislo">#4 </span><sup><a href="#kapsystemppc3" id="kapsystemppcr3" title="Podpora dočasného uspání příkazem rtcwake není na různých počítačích jednotná. Na některých dokáže počítač uspat, ale už ho nedokáže probudit; na některých ho nedokáže ani uspat. Vždy nejprve vyzkoušejte uspání na krátkou dobu, abyste zjistili, jak se bude daný počítač chovat. Pokud „rtcwake“ nefunguje s parametrem „-m mem“, může fungovat bez něj a naopak.">(3)</a></sup></div><div class="radky">
<div class="radekzaklinadla">systemctl suspend</div>
<div class="radekzaklinadla">sudo rtcwake <span class="volznak">[</span>-m mem<span class="volznak">]</span> -s <i class="dopln">N</i></div>
<div class="radekzaklinadla">sudo rtcwake <span class="volznak">[</span>-m mem<span class="volznak">]</span> -s 172800</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1731226508"><span><a href="#z1731226508">➬</a></span></span><b>hibernovat</b> systém<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">sudo systemctl hibernate</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z649054238"><span><a href="#z649054238">↘</a></span></span><b>zastavit</b> systém bez vypnutí počítače (normálně/drasticky/velmi drasticky)<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">sudo systemctl halt</div>
<div class="radekzaklinadla">sudo systemctl halt --force</div>
<div class="radekzaklinadla">sudo systemctl halt --force --force</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1022614842"><span><a href="#z1022614842">≶</a></span></span><b>vypnout</b> počítač za N minut/zrušit naplánované vypnutí<span class="cislo">#7 </span></div><div class="radky">
<div class="radekzaklinadla">sudo shutdown -P <span class="volznak">[</span>--no-wall<span class="volznak">]</span> <i class="dopln">N</i></div>
<div class="radekzaklinadla">sudo shutdown -c</div>
</div></div>

<h3 id="cast3x3"><span><a href="#cast3x3" title="kapitola 19 (Systém), sekce 3 (Zaklínadla), podsekce 3 (Ovládání systémových jednotek)"><sup>3/</sup>3 Ovládání systémových jednotek</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1838682653"><span><a href="#z1838682653">╡</a></span></span><b>spustit</b> neběžící<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">sudo systemctl start <i class="dopln">jednotka.typ</i><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1679799506"><span><a href="#z1679799506">⊟</a></span></span><b>zastavit</b> běžící<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sudo systemctl stop <i class="dopln">jednotka.typ</i><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z328092569"><span><a href="#z328092569">⌄</a></span></span><b>restartovat</b> běžící<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">sudo systemctl restart <i class="dopln">jednotka.typ</i><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z988729109"><span><a href="#z988729109">☿</a></span></span>nastavit automatické spouštění jednotky/zrušit toto nastavení<span class="cislo">#4 </span><sup><a href="#kapsystemppc4" id="kapsystemppcr4" title="U většiny služeb (ne úplně u všech) znamená automatické spouštění jejich spuštění při startu systému. Systémová jednotka s vypnutým automatickým spouštěním (disabled) stále může být spuštěna automaticky, pokud na ní závisí (jiná) automaticky spouštěná jednotka.">(4)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo systemctl enable <span class="volznak">[</span>--now<span class="volznak">]</span> <i class="dopln">jednotka.typ</i><span class="tritecky"></span></div>
<div class="radekzaklinadla">sudo systemctl disable <span class="volznak">[</span>--now<span class="volznak">]</span> <i class="dopln">jednotka.typ</i><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z124621333"><span><a href="#z124621333">⌉</a></span></span>zcela <b>zakázat</b> spouštění systémové jednotky/zrušit tento zákaz<span class="cislo">#5 </span><sup><a href="#kapsystemppc5" id="kapsystemppcr5" title="Je-li zakázáno spouštění systémové jednotky, nemůže být žádným způsobem spuštěna ani restartována. Zákaz vypne případné automatické spouštění jednotky a to nepůjde znovu nastavit. Pokud ale daná systémová jednotka právě běží, samotný zákaz ji nechá běžet.">(5)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sudo systemctl mask <i class="dopln">jednotka.typ</i><span class="tritecky"></span></div>
<div class="radekzaklinadla">sudo systemctl unmask <i class="dopln">jednotka.typ</i><span class="tritecky"></span></div>
</div></div>

<h3 id="cast3x4"><span><a href="#cast3x4" title="kapitola 19 (Systém), sekce 3 (Zaklínadla), podsekce 4 (Informace o systémových jednotkách)"><sup>3/</sup>4 Informace o systémových jednotkách</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1015013131"><span><a href="#z1015013131">⢽</a></span></span><b>zjistit stav</b> (pro člověka/pro skript)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">systemctl status <i class="dopln">jednotka.typ</i></div>
<div class="radekzaklinadla">systemctl show <i class="dopln">jednotka.typ</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z687656669"><span><a href="#z687656669">ⵐ</a></span></span>zjistit, zda jednotka běží<span class="cislo">#2 </span><sup><a href="#kapsystemppc6" id="kapsystemppcr6" title="Pro každou zadanou systémovou jednotku vypíše řádek „active“ nebo „inactive“; uspěje, pokud alespoň jeden řádek bude „active“.">(6)</a></sup></div><div class="radky">
<div class="radekzaklinadla">systemctl is-active <span class="volznak">[</span>--quiet<span class="volznak">]</span> <i class="dopln">jednotka.typ-nebo-vzorek</i><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z888719502"><span><a href="#z888719502">┾</a></span></span><b>vypsat</b> jednotky všech typů<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">systemctl list-units <span class="volznak">[</span>--all<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">filtrovací-vzorek</i><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z652144576"><span><a href="#z652144576">⇸</a></span></span>vypsat časovače<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">systemctl list-timers <span class="volznak">[</span>--all<span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z609914108"><span><a href="#z609914108">╽</a></span></span>vypsat služby<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">systemctl list-units --all -t service</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z771874744"><span><a href="#z771874744">┽</a></span></span>vypsat cíle<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">systemctl list-units --all -t target</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1603262544"><span><a href="#z1603262544">❩</a></span></span>zjistit <b>PID</b> příslušné dané jednotce (je-li definováno)<span class="cislo">#7 </span><sup><a href="#kapsystemppc7" id="kapsystemppcr7" title="Poznámka: pokud dané jednotce neodpovídá žádný běžící démon, vypíše tento příkaz „0“.">(7)</a></sup></div><div class="radky">
<div class="radekzaklinadla">systemctl show --property=MainPID <i class="dopln">jednotka.typ</i> | sed -E 's/.*=//'</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z595968418"><span><a href="#z595968418">ƪ</a></span></span>vypsat <b>manuálovou stránku</b> příslušnou jednotce, je-li známa<span class="cislo">#8 </span></div><div class="radky">
<div class="radekzaklinadla">systemctl help <i class="dopln">jednotka.typ</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z746964020"><span><a href="#z746964020">⠽</a></span></span>vypsat dynamické závislosti jednotky (na kterých jednotka závisí/které závisí na jednotce)<span class="cislo">#9 </span><sup><a href="#kapsystemppc8" id="kapsystemppcr8" title="Poznámka: dynamické závislosti mezi jednotkami jsou obtížně pochopitelná věc, protože mohou vznikat a zanikat za běhu v reakci na změnu stavu systému. Nepředpokládejte, že je chápete, pokud jste podrobně nestudovali dokumentaci systemd.">(8)</a></sup></div><div class="radky">
<div class="radekzaklinadla">systemctl list-dependencies</div>
<div class="radekzaklinadla">systemctl list-dependencies --reverse</div>
</div></div>

<h3 id="cast3x5"><span><a href="#cast3x5" title="kapitola 19 (Systém), sekce 3 (Zaklínadla), podsekce 5 (Logy)"><sup>3/</sup>5 Logy</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z906528836"><span><a href="#z906528836">◣</a></span></span><b>vypsat log</b> krále démonů (z tohoto běhu/z předchozího běhu/všechny)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">journalctl -b 0 <span class="volznak">[</span>-r<span class="volznak">]</span></div>
<div class="radekzaklinadla">journalctl -b -1 <span class="volznak">[</span>-r<span class="volznak">]</span></div>
<div class="radekzaklinadla">journalctl <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z137937742"><span><a href="#z137937742">䷺</a></span></span><b>vypsat log</b> jádra (pro skript/pro člověka)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">dmesg <span class="volznak">[</span>--time-format iso<span class="volznak">]</span></div>
<div class="radekzaklinadla">dmesg -H<span class="volznak">[</span>x<span class="volznak">]</span> <span class="volznak">[</span>--time-format iso<span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z401184440"><span><a href="#z401184440">⡽</a></span></span><b>sledovat</b> log krále démonů/log jádra<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">journalctl -fqn 0 <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span></div>
<div class="radekzaklinadla">dmesg -w<span class="volznak">[</span>H<span class="volznak">]</span><span class="volznak">[</span>x<span class="volznak">]</span><span class="volznak">[</span>--time-format iso<span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z570635153"><span><a href="#z570635153">➾</a></span></span>vypsat seznam <b>časů posledních nabootování</b><span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">journalctl --list-boots | sed -E $'s/.*([A-Z][a-z]{2}.*)\u2014.*/\\1/' | date -f - &quot;+%F %T %z&quot;</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1048827050"><span><a href="#z1048827050">䷗</a></span></span>zjistit, kolik místa na disku zabírají logy krále démonů<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">journalctl --disk-usage</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z932462407"><span><a href="#z932462407">䷋</a></span></span>vyprázdnit log krále démonů/log jádra<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">sudo find /var/log/journal -type f -name '*.journal' -delete</div>
<div class="radekzaklinadla">sudo dmesg --clear</div>
</div></div>

<h3 id="cast3x6"><span><a href="#cast3x6" title="kapitola 19 (Systém), sekce 3 (Zaklínadla), podsekce 6 (Sezení)"><sup>3/</sup>6 Sezení</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1979996146"><span><a href="#z1979996146">⎭</a></span></span>vypsat <b>seznam sezení</b>/přihlášených uživatelů<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">loginctl <span class="volznak">[</span>list-sessions<span class="volznak">]</span></div>
<div class="radekzaklinadla">loginctl list-users</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z189348247"><span><a href="#z189348247">⎟</a></span></span>vypsat informace o sezení/přihlášeném uživateli<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">loginctl show-session <i class="dopln">ID-sezení</i></div>
<div class="radekzaklinadla">loginctl show-user <i class="dopln">uživatel</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z130172135"><span><a href="#z130172135">⡹</a></span></span><b>přepnout</b> na uvedené sezení<span class="cislo">#3 </span><sup><a href="#kapsystemppc9" id="kapsystemppcr9" title="Poznámka: tento příkaz dokáže přepnout i mezi X a textovou konzolí!">(9)</a></sup></div><div class="radky">
<div class="radekzaklinadla">loginctl activate <i class="dopln">ID-sezení</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1040141616"><span><a href="#z1040141616">↚</a></span></span><b>násilně ukončit</b> sezení/všechna sezení uživatele<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">loginctl terminate-session <i class="dopln">ID-sezení</i></div>
<div class="radekzaklinadla">loginctl terminate-user <i class="dopln">uživatel</i></div>
</div></div>

<h3 id="cast3x7"><span><a href="#cast3x7" title="kapitola 19 (Systém), sekce 3 (Zaklínadla), podsekce 7 (Ostatní)"><sup>3/</sup>7 Ostatní</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1787576055"><span><a href="#z1787576055">䷆</a></span></span>nastavit jméno počítače<span class="cislo">#1 </span><sup><a href="#kapsystemppc10" id="kapsystemppcr10" title="Jméno počítače může být dlouhé maximálně 63 znaků a smí obsahovat pouze malá a velká písmena anglické abecedy, číslice. Může také obsahovat pomlčky, ale nesmí pomlčkou začínat ani končit. Např. „0---9Az“ je také dovolené jméno počítače.">(10)</a></sup></div><div class="radky">
<div class="radekzaklinadla">stare=$(hostname)</div>
<div class="radekzaklinadla">nove=<i class="dopln">nove-jmeno</i></div>
<div class="radekzaklinadla">sudo sed -i -E 's/(\s)'${stare}'$/\1'${nove}'/' /etc/hosts &amp;&amp; sudo sed -i -E 's/^'${stare}'/'${nove}'/' /etc/hostname</div>
<div class="radekzaklinadla akce">Restartujte počítač.</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1976512560"><span><a href="#z1976512560">⋂</a></span></span>otestovat volnou paměť RAM<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sudo memtester <i class="dopln">velikost-P</i> <span class="volznak">[</span><i class="dopln">počet-iterací</i><span class="volznak">]</span><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1323363449"><span><a href="#z1323363449">⠭</a></span></span>nastavit proměnnou prostředí krále démonů/smazat ji<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">sudo systemctl set-environment <i class="dopln">PROMĚNNÁ</i>=&quot;<i class="dopln">hodnota</i>&quot; <span class="volznak">[</span><i class="dopln">DALŠÍ_PROMĚNNÁ</i>=&quot;<i class="dopln">její hodnota</i>&quot;<span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">sudo systemctl unset-environment <i class="dopln">PROMĚNNÁ</i><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z111318780"><span><a href="#z111318780">✳</a></span></span>který cíl je pro start systému výchozí?<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">systemctl get-default</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z103848038"><span><a href="#z103848038">⡣</a></span></span>nastavit výchozí cíl<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">sudo systemctl set-default <i class="dopln">cíl.target</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z5620886"><span><a href="#z5620886">◙</a></span></span>dočasně vypnout automatické připojování výměnných jednotek <span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
</div></div>

<h3 id="cast3x8"><span><a href="#cast3x8" title="kapitola 19 (Systém), sekce 3 (Zaklínadla), podsekce 8 (Analýza času stráveného zaváděním systému)"><sup>3/</sup>8 Analýza času stráveného zaváděním systému</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z391234817"><span><a href="#z391234817">☋</a></span></span>rozdělení času mezi firmware, zavaděč, jádro a zbytek (pro člověka)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">systemd-analyze time<span class="prikladhodnoty">⊨ Startup finished in 13.465s (firmware) + 1.435s (loader) + 3.459s (kernel) + 1min 30.339s (userspace) = 1min 48.700s</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z2096833063"><span><a href="#z2096833063">⏥</a></span></span>kolik času zabrala inicializace jednotek? (pro člověka)<span class="cislo">#2 </span><sup><a href="#kapsystemppc11" id="kapsystemppcr11" title="Pozor! Do uvedeného času se započítává i čas strávený čekáním na inicializaci jiných jednotek; proto pokud má některá jednotka uvedený dlouhý čas, nemusí to znamenat, že zpomalení způsobuje ona!">(11)</a></sup></div><div class="radky">
<div class="radekzaklinadla">systemd-analyze blame <span class="volznak">[</span>--user<span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z181282030"><span><a href="#z181282030">☷</a></span></span>vykreslit graf popisující inicializaci jednotek při zavádění<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">systemd-analyze plot &gt;<i class="dopln">dočasný-soubor.svg</i> &amp;&amp; sensible-browser <i class="dopln">dočasný-soubor.svg</i></div>
</div></div>

<h2 id="cast4"><a href="#cast4"><span class="cislo">4.</span> Zaklínada: Klávesnice</a></h2>

<h3 id="cast4x1"><span><a href="#cast4x1" title="kapitola 19 (Systém), sekce 4 (Zaklínada: Klávesnice), podsekce 1 (Ovládání počítače klávesnicí)"><sup>4/</sup>1 Ovládání počítače klávesnicí</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z2013373730"><span><a href="#z2013373730">䷖</a></span></span><b>nouzový restart</b> počítače<span class="cislo">#1 </span><sup><a href="#kapsystemppc12" id="kapsystemppcr12" title="Ne, opravdu to není Ctrl+Alt+Delete...">(12)</a>,&nbsp;<a href="#kapsystemppc13" id="kapsystemppcr13" title="Poznámka: Skutečně důležitá je pouze poslední klávesa „B“; ty předchozí pouze vykonávají operace, díky nimž nebude restart tak drastický. Pokud chcete opravdu drastický reset, stačí na to klávesová zkratka „Alt“+„PrintScreen“+„B“.">(13)</a></sup></div><div class="radky">
<div class="radekzaklinadla akce">Stiskněte a držte stisknuté klávesy <kbd>Alt</kbd> + <kbd>PrtScr</kbd>.</div>
<div class="radekzaklinadla akce">Na klávesnici s krátkými přestávkami vyťukejte: <kbd>R</kbd>, <kbd>E</kbd>, <kbd>I</kbd>, <kbd>S</kbd>, <kbd>U</kbd>, <kbd>B</kbd>.</div>
<div class="radekzaklinadla akce">Uvolněte <kbd>PrtScr</kbd> a <kbd>Alt</kbd>.</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z965642252"><span><a href="#z965642252">ᚃ</a></span></span>uspat počítač<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z598582410"><span><a href="#z598582410">⚋</a></span></span>drastické <b>nouzové vypnutí</b> počítače<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla akce"><kbd>Alt</kbd> + <kbd>PrtScr</kbd> + <kbd>O</kbd>.</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z57282130"><span><a href="#z57282130">⁕</a></span></span>vypsat nápovědu k nouzovým klávesovým zkratkám jádra<span class="cislo">#4 </span><sup><a href="#kapsystemppc14" id="kapsystemppcr14" title="Poznámka: Většina vypsaných operací je v jádru Ubuntu zakázána. Po stisknutí příslušné kombinace kláves se v takovém případě vypíše na konzoli zpráva, že operace je zakázána.">(14)</a></sup></div><div class="radky">
<div class="radekzaklinadla akce">Jste-li v grafickém režimu, přepněte se na textovou virutální konzoli zkratkou <kbd>Ctrl</kbd> + <kbd>Alt</kbd> + <kbd>F2</kbd>.</div>
<div class="radekzaklinadla akce">Stiskněte <kbd>Alt</kbd> + <kbd>PrtScr</kbd> + <kbd>H</kbd>. Měla by se vypsat nápověda.</div>
<div class="radekzaklinadla akce">Zpět do grafického režimu se vrátíte <kbd>Alt</kbd> + <kbd>F7</kbd> (pouze ve variantách Ubuntu a Kubuntu je to místo toho <kbd>Alt</kbd> + <kbd>F1</kbd>).</div>
</div></div>

<h3 id="cast4x2"><span><a href="#cast4x2" title="kapitola 19 (Systém), sekce 4 (Zaklínada: Klávesnice), podsekce 2 (Ovládání klávesnice počítačem)"><sup>4/</sup>2 Ovládání klávesnice počítačem</a></span></h3>
<p class="ponadpisu">
Poznámka: příkazy v této sekci jsou určeny výhradně pro X; téméř jistě nebudou fungovat v textových virtuálních konzolích ani na Waylandu.
</p>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z850630407"><span><a href="#z850630407">✪</a></span></span>zapnout/vypnout/přepnout <b>Num Lock</b><span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">numlockx on</div>
<div class="radekzaklinadla">numlockx off</div>
<div class="radekzaklinadla">numlockx toggle</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1223477950"><span><a href="#z1223477950">⚅</a></span></span>zapnout/vypnout/přepnout <b>Caps Lock</b><span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
<div class="radekzaklinadla">xdotool key Caps_Lock</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z887981806"><span><a href="#z887981806">⢰</a></span></span>zapnout/vypnout/přepnout <b>Scroll Lock</b><span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
<div class="radekzaklinadla">xdotool key Scroll_Lock</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1687550347"><span><a href="#z1687550347">➴</a></span></span>vypnout/znovu zapnout klávesnici<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">xinput --disable $(xinput --list --short | egrep '\[.*keyboard.*\]' | egrep -iv 'virtual|(power|sleep)<span class="viditelnamezera">&nbsp;</span>button' | tail -n 1 | sed -E 's/.*id=([0-9]+)[^0-9].*/\1/')</div>
<div class="radekzaklinadla">xinput --enable $(xinput --list --short | egrep '\[.*keyboard.*\]' | egrep -iv 'virtual|(power|sleep)<span class="viditelnamezera">&nbsp;</span>button' | tail -n 1 | sed -E 's/.*id=([0-9]+)[^0-9].*/\1/')</div>
</div></div>

<h3 id="cast4x3"><span><a href="#cast4x3" title="kapitola 19 (Systém), sekce 4 (Zaklínada: Klávesnice), podsekce 3 (Rozložení klávesnice)"><sup>4/</sup>3 Rozložení klávesnice</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z1468766133"><span><a href="#z1468766133">ᚒ</a></span></span>trvale změnit systémové rozložení<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">sudo dpkg-reconfigure keyboard-configuration</div>
<div class="radekzaklinadla">sudoedit /etc/default/keyboard</div>
<div class="radekzaklinadla akce">Zkontrolujte hodnoty XKBLAYOUT a XKBVARIANT, zda jsou nastaveny podle vaších představ; pokud ne, opravte je a uložte soubor.</div>
<div class="radekzaklinadla akce">Ukončete editor.</div>
<div class="radekzaklinadla akce">Restartujte operační systém.</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z567087665"><span><a href="#z567087665">ᚓ</a></span></span>dočasně nastavit okamžité rozložení klávesnice (jen v X)(obecně/příklady...)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">setxkbmap <i class="dopln">rozložení</i> <span class="volznak">[</span><i class="dopln">varianta</i><span class="volznak">]</span></div>
<div class="radekzaklinadla">setxkbmap cz</div>
<div class="radekzaklinadla">setxkbmap cz qwerty</div>
<div class="radekzaklinadla">setxkbmap ru</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona L" id="z1741312721"><span><a href="#z1741312721">⟣</a></span></span>vypsat seznam dostupných rozložení klávesnice a jejich variant<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">sed -nE '/^!\s+layout/,/^$/s/^\s*(\S+)\s+(.*)$/\1\t\2/;/^!\s+variant/,/^$/s/^\s*(\S+)\s+([^:]+):\s*(.*)$/\2 \1\t\3/;T;p' /usr/share/X11/xkb/rules/xorg.lst | sort <span class="volznak">[</span>| column -nt -s $'\t' <span class="volznak">[</span>| less<span class="volznak">]</span><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="z825669485"><span><a href="#z825669485">☭</a></span></span>vypsat seznam definovaných variant rozložení klávesnice (pro vývojáře)<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
</div></div>

<h2 id="cast5"><a href="#cast5"><span class="cislo">5.</span> Parametry příkazů</a></h2>

<h3 id="cast5x1"><span><a href="#cast5x1" title="kapitola 19 (Systém), sekce 5 (Parametry příkazů), podsekce 1 (journalctl)"><sup>5/</sup>1 journalctl</a></span></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">journalctl <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span></div>
</div></div>
<table class="parametryprikazu"><tbody><tr><td>○ --output=short-iso ○ --output=json-pretty ◉ --output=short</td><td>Různé formáty výstupu (podporovány i další).</td></tr>

<tr><td>☐ -f</td><td>Bude čekat na nové položky a vypisovat je, jakmile se v logu objeví.</td></tr>

<tr><td>☐ -n <i class="dopln">počet-záznamů</i> </td><td>Omezí počet nejnovějších záznamů k vypsání (jinak vypíše všechny).</td></tr>

<tr><td>☐ -p <i class="dopln">priorita</i></td><td>Vypíše pouze záznamy s alespoň uvedenou prioritou (debug, info, notice, warning, err, crit, alert, emerg). Lze zadat i přesný rozsah operátorem .., např. „-p notice..crit“.</td></tr>

<tr><td>☐ --since &quot;<i class="dopln">YYYY-mm-dd HH:mm:ss</i>&quot;</td><td>Vypíše pouze záznamy z uvedeného času a pozdější.</td></tr>

<tr><td>☐ -r</td><td>Seřadí log od nejnovějších záznamů místo od nejstarších.</td></tr>

<tr><td>-u <i class="dopln">jednotka</i></td><td>Omezí výpis na záznamy související s uvedenou jednotkou; lze uvést víckrát, v takovém případě se zahrnou záznamy související s kteroukoliv z uvedených jednotek. Místo přesného názvu lze uvést i vzorek.</td></tr>

<tr><td>☐ -a</td><td>Vypíše přesně a úplně i zprávy obsahující netisknutelné znaky či zprávy mimořádně dlouhé (nezkoušeno).</td></tr>

</tbody></table>

<h2 id="cast6"><a href="#cast6"><span class="cislo">6.</span> Instalace na Ubuntu</a></h2>
<p class="ponadpisu">
Většina použitých příkazů je základní součástí Ubuntu, pouze příkazy numlockx, xdotool, inxi a neofetch si musíte doinstalovat, chcete-li je použít:
</p>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">sudo apt-get install numlockx xdotool neofetch inxi</div>
</div></div>

<h2 id="cast7"><a href="#cast7"><span class="cislo">7.</span> Tipy a zkušenosti</a></h2>
<ul><li>Volba „enable“/„disable“ je nezávislá na tom, zda démon právě běží. Nastavení na „enable“ ho okamžitě nespustí a nastavení na „disable“ neukončí (ledaže uvedete parametr „--now“).
</li></ul>
<h2 id="cast8"><a href="#cast8"><span class="cislo">8.</span> Další zdroje informací</a></h2>
<ul class="kompaktni"><li><a href="https://cs.wikipedia.org/wiki/Systemd">Článek na Wikipedii</a>
</li><li><a href="http://www.abclinuxu.cz/serialy/systemd">Seriál článků na ABC Linuxu</a>
</li><li><a href="https://www.youtube.com/watch?v=ZiX327d8Ys0">Video: The Magic SysRQ Key on the Keyboard</a> (anglicky)
</li><li><a href="https://www.thegeekdiary.com/centos-rhel-7-systemd-command-line-reference-cheat-sheet/">Systemd cheat sheet</a> (anglicky)
</li><li><a href="https://www.freedesktop.org/wiki/Software/systemd/">Oficiální stránka systemd pro uživatele</a> (anglicky)
</li><li><a href="https://systemd.io/">Oficiální stránka systemd pro vývojáře</a> (anglicky)
</li><li><a href="https://github.com/systemd/systemd">Repozitář systemd na GitHubu</a> (anglicky)
</li><li><a href="https://www.youtube.com/watch?v=fYQBvjYQ63U">Video Creating systemd Service Files</a> (anglicky)
</li><li><a href="https://www.youtube.com/watch?v=AtEqbYTLHfs">Video systemd Basics</a> (anglicky)
</li><li><i>man 1 systemctl</i> (anglicky)
</li><li><i>man 5 systemd.service</i> (anglicky)
</li><li><a href="https://packages.ubuntu.com/focal/systemd">Balíček systemd</a> (anglicky)
</li><li><a href="https://github.com/tldr-pages/tldr/blob/master/pages/linux/systemctl.md">TL;DR systemctl</a> (anglicky)
</li></ul><div class="ppc"><div id="kapsystemppc1"><a href="#kapsystemppcr1" class="cislopozn">1</a>&nbsp;Návratový kód je 0 pro notebook, 1 pro stolní počítač a 2, pokud to nelze zjistit. Ve virtuálním počítači dle mých zkušeností, tento přikaz zjistí druh fyzického počítače, na kterém virtuální počítač běží.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc2"><a href="#kapsystemppcr2" class="cislopozn">2</a>&nbsp;Podle dokumentace poskytuje záchranný režim základní služby a připojené souborové systémy pro pohodlnou práci, zatímco nouzový režim nespustí nic a očekává od uživatele, že si spustí služby, které potřebuje, a připojí potřebné souborové systémy. Ovšem při přechodu z běžícího systému těmito příkazy jsem tento rozdíl nepozoroval/a. Souborové systémy zůstaly i v nouzovém režimu normálně připojené.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc3"><a href="#kapsystemppcr3" class="cislopozn">3</a>&nbsp;Podpora dočasného uspání příkazem rtcwake není na různých počítačích jednotná. Na některých dokáže počítač uspat, ale už ho nedokáže probudit; na některých ho nedokáže ani uspat. Vždy nejprve vyzkoušejte uspání na krátkou dobu, abyste zjistili, jak se bude daný počítač chovat. Pokud „rtcwake“ nefunguje s parametrem „-m mem“, může fungovat bez něj a naopak.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc4"><a href="#kapsystemppcr4" class="cislopozn">4</a>&nbsp;U většiny služeb (ne úplně u všech) znamená automatické spouštění jejich spuštění při startu systému. Systémová jednotka s vypnutým automatickým spouštěním (disabled) stále může být spuštěna automaticky, pokud na ní závisí (jiná) automaticky spouštěná jednotka.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc5"><a href="#kapsystemppcr5" class="cislopozn">5</a>&nbsp;Je-li zakázáno spouštění systémové jednotky, nemůže být žádným způsobem spuštěna ani restartována. Zákaz vypne případné automatické spouštění jednotky a to nepůjde znovu nastavit. Pokud ale daná systémová jednotka právě běží, samotný zákaz ji nechá běžet.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc6"><a href="#kapsystemppcr6" class="cislopozn">6</a>&nbsp;Pro každou zadanou systémovou jednotku vypíše řádek „active“ nebo „inactive“; uspěje, pokud alespoň jeden řádek bude „active“.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc7"><a href="#kapsystemppcr7" class="cislopozn">7</a>&nbsp;Poznámka: pokud dané jednotce neodpovídá žádný běžící démon, vypíše tento příkaz „0“.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc8"><a href="#kapsystemppcr8" class="cislopozn">8</a>&nbsp;Poznámka: dynamické závislosti mezi jednotkami jsou obtížně pochopitelná věc, protože mohou vznikat a zanikat za běhu v reakci na změnu stavu systému. Nepředpokládejte, že je chápete, pokud jste podrobně nestudovali dokumentaci systemd.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc9"><a href="#kapsystemppcr9" class="cislopozn">9</a>&nbsp;Poznámka: tento příkaz dokáže přepnout i mezi X a textovou konzolí!</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc10"><a href="#kapsystemppcr10" class="cislopozn">10</a>&nbsp;Jméno počítače může být dlouhé maximálně 63 znaků a smí obsahovat pouze malá a velká písmena anglické abecedy, číslice. Může také obsahovat pomlčky, ale nesmí pomlčkou začínat ani končit. Např. „0---9Az“ je také dovolené jméno počítače.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc11"><a href="#kapsystemppcr11" class="cislopozn">11</a>&nbsp;Pozor! Do uvedeného času se započítává i čas strávený čekáním na inicializaci jiných jednotek; proto pokud má některá jednotka uvedený dlouhý čas, nemusí to znamenat, že zpomalení způsobuje ona!</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc12"><a href="#kapsystemppcr12" class="cislopozn">12</a>&nbsp;Ne, opravdu to není Ctrl+Alt+Delete...</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc13"><a href="#kapsystemppcr13" class="cislopozn">13</a>&nbsp;Poznámka: Skutečně důležitá je pouze poslední klávesa „B“; ty předchozí pouze vykonávají operace, díky nimž nebude restart tak drastický. Pokud chcete opravdu drastický reset, stačí na to klávesová zkratka „Alt“+„PrintScreen“+„B“.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapsystemppc14"><a href="#kapsystemppcr14" class="cislopozn">14</a>&nbsp;Poznámka: Většina vypsaných operací je v jádru Ubuntu zakázána. Po stisknutí příslušné kombinace kláves se v takovém případě vypíše na konzoli zpráva, že operace je zakázána.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
</div>


<nav class="spodni">
<a href="index.htm" class="naindex">🗐&nbsp;Přehled&nbsp;kapitol</a>
<div class="naslkap">
<a href="terminal.htm" rel="next" title="19. Terminál">Následující&nbsp;kapitola/dodatek:<br><span class="cislo">19</span>
<span class="nazev">Terminál</span></a>
</div>
<!--<div><a href="index.htm">🗐&nbsp;Přehled&nbsp;kapitol</a></div>-->
</nav>


<div class="odkazydole"><div><a href="sed.htm"><img src="obrazky/ik/sed.png" alt="" width="32" height="32">Sed</a><a href="markdown.htm"><img src="obrazky/ik/markdown.png" alt="" width="32" height="32">Markdown</a><a href="make.htm"><img src="obrazky/ik/make.png" alt="" width="32" height="32">Make</a></div></div>


</article>
<!-- *** -->
<footer id="dole">
<img src="obrazky/by-sa.png" width="88" height="31" alt="[BY-SA]">
<p>Veškerý obsah této stránky (text, obrázky, zdrojový kód) je možno upravovat a šířit pod podmínkami licence
<a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a>.
Upozorňuji, že uvedená licence vyžaduje uvedení seznamu autorů, licence a zdroje a poskytnutí stejné
či kompatibilní licence k provedeným změnám, jsou-li nějaké. Příslušné údaje jsou dostupné
na stránce „<a href="x-autori.htm">Přehled autorů</a>“.
Šíření obsahu bez těchto údajů nebo šíření upravené verze bez poskytnutí adekvátní
licence k provedeným úpravám je pravděpodobně porušení licenčních podmínek a může být postihováno.
Poskytování zdrojového kódu při šíření není touto licencí vyžadováno.</p><p>Pro nové verze, další informace, aktuální zdrojový kód
a možnost se zapojit do projektu „Linux: Kniha kouzel“ navštivte jeho
<a href="https://github.com/singularis-mzf/linux-spellbook">repozitář na GitHubu</a>.
</footer>
</div>

<nav class="menu">
<!-- MENU KAPITOLY -->
<a href="#menukapitoly" id="menukapitoly"><span class="prvnipismeno">K</span>apitoly</a>
<aside class="menukapitoly">
<div><div class="nadpis">Kapitoly</div><div class="polozky">
<a href="predmluva.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/predmluva.png" alt="[]"></span><span class="cislo">1</span><span class="nazev">Předmluva</span></a>
<a href="awk.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/awk.png" alt="[]"></span><span class="cislo">2</span><span class="nazev">AWK</span></a>
<a href="datum-cas-kalendar.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/datum-cas-kalendar.png" alt="[]"></span><span class="cislo">3</span><span class="nazev">Datum, čas a kalendář</span></a>
<a href="diskove-oddily.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/diskove-oddily.png" alt="[]"></span><span class="cislo">4</span><span class="nazev">Diskové oddíly</span></a>
<a href="git.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/git.png" alt="[]"></span><span class="cislo">5</span><span class="nazev">Git</span></a>
<a href="hledani-souboru.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/hledani-souboru.png" alt="[]"></span><span class="cislo">6</span><span class="nazev">Hledání souborů</span></a>
<a href="make.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/make.png" alt="[]"></span><span class="cislo">7</span><span class="nazev">Make</span></a>
<a href="markdown.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/markdown.png" alt="[]"></span><span class="cislo">8</span><span class="nazev">Markdown</span></a>
<a href="prace-s-archivy.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/prace-s-archivy.png" alt="[]"></span><span class="cislo">9</span><span class="nazev">Práce s archivy</span></a>
<a href="promenne.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/promenne.png" alt="[]"></span><span class="cislo">10</span><span class="nazev">Proměnné prostředí a interpretu</span></a>
<a href="regularni-vyrazy.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/regularni-vyrazy.png" alt="[]"></span><span class="cislo">11</span><span class="nazev">Regulární výrazy</span></a>
<a href="sed.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/sed.png" alt="[]"></span><span class="cislo">12</span><span class="nazev">Sed</span></a>
<a href="soubory-a-adresare.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/soubory-a-adresare.png" alt="[]"></span><span class="cislo">13</span><span class="nazev">Soubory a adresáře</span></a>
<a href="sprava-balicku.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/sprava-balicku.png" alt="[]"></span><span class="cislo">14</span><span class="nazev">Správa balíčků</span></a>
<a href="sprava-procesu.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/sprava-procesu.png" alt="[]"></span><span class="cislo">15</span><span class="nazev">Správa procesů</span></a>
<a href="sprava-uzivatelskych-uctu.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/sprava-uzivatelskych-uctu.png" alt="[]"></span><span class="cislo">16</span><span class="nazev">Správa uživatelských účtů</span></a>
<a href="stahovani-videi.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/stahovani-videi.png" alt="[]"></span><span class="cislo">17</span><span class="nazev">Stahování videí</span></a>
<a href="system.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/system.png" alt="[]"></span><span class="cislo">18</span><span class="nazev">Systém</span></a>
<a href="terminal.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/terminal.png" alt="[]"></span><span class="cislo">19</span><span class="nazev">Terminál</span></a>
<a href="vim.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/vim.png" alt="[]"></span><span class="cislo">20</span><span class="nazev">Vim</span></a>
<a href="zpracovani-binarnich-souboru.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/zpracovani-binarnich-souboru.png" alt="[]"></span><span class="cislo">21</span><span class="nazev">Zpracování binárních souborů</span></a>
<a href="zpracovani-textovych-souboru.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/zpracovani-textovych-souboru.png" alt="[]"></span><span class="cislo">22</span><span class="nazev">Zpracování textových souborů</span></a>
<a href="zpracovani-videa-a-zvuku.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/zpracovani-videa-a-zvuku.png" alt="[]"></span><span class="cislo">23</span><span class="nazev">Zpracování videa a zvuku</span></a>
<a href="koncepce-projektu.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/koncepce-projektu.png" alt="[]"></span><span class="cislo">24</span><span class="nazev">Koncepce projektu Linux: Kniha kouzel</span></a>
<a href="plan-vyvoje.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik-vychozi.png" alt="[]"></span><span class="cislo">25</span><span class="nazev">Plán budoucího vývoje</span></a>
<a href="licence.htm" class="kapitola"><span class="ikona"><img src="obrazky/ik/licence.png" alt="[]"></span><span class="cislo">26</span><span class="nazev">Licence</span></a>
</div></div>
<a href="#zavritmenu" id="zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
<!-- MENU OSNOVA -->
<a href="#menuosnova" id="menuosnova"><span class="prvnipismeno">O</span>snova</a>
<aside class="menuosnova">
<div><div class="nadpis">Osnova</div><div class="polozky">
<a href="#cast1" class="sekce">1 Úvod</a>
<a href="#cast2" class="sekce">2 Definice</a>
<a href="#cast3" class="sekce">3 Zaklínadla</a>
<a href="#cast3x1" class="podsekce">/1 Informace o systému (zjistit)</a>
<a href="#cast3x2" class="podsekce">/2 Restart a vypnutí počítače</a>
<a href="#cast3x3" class="podsekce">/3 Ovládání systémových jednotek</a>
<a href="#cast3x4" class="podsekce">/4 Informace o systémových jednotkách</a>
<a href="#cast3x5" class="podsekce">/5 Logy</a>
<a href="#cast3x6" class="podsekce">/6 Sezení</a>
<a href="#cast3x7" class="podsekce">/7 Ostatní</a>
<a href="#cast3x8" class="podsekce">/8 Analýza času stráveného zaváděním systému</a>
<a href="#cast4" class="sekce">4 Zaklínada: Klávesnice</a>
<a href="#cast4x1" class="podsekce">/1 Ovládání počítače klávesnicí</a>
<a href="#cast4x2" class="podsekce">/2 Ovládání klávesnice počítačem</a>
<a href="#cast4x3" class="podsekce">/3 Rozložení klávesnice</a>
<a href="#cast5" class="sekce">5 Parametry příkazů</a>
<a href="#cast5x1" class="podsekce">/1 journalctl</a>
<a href="#cast6" class="sekce">6 Instalace na Ubuntu</a>
<a href="#cast7" class="sekce">7 Tipy a zkušenosti</a>
<a href="#cast8" class="sekce">8 Další zdroje informací</a>
</div></div>
<a href="#zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
<!-- MENU ŠTÍTKY -->
<a href="#menustitky" id="menustitky"><span class="prvnipismeno">Š</span>títky</a>
<aside class="menustitky">
<div><div class="nadpis">Štítky</div><div class="polozky">
<a href="x-stitky.htm#sdrese">adresáře&nbsp;&nbsp;(2)</a>
<a href="x-stitky.htm#spt">apt&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sbjty">bajty&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sbrvy">barvy&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sbsh">bash&nbsp;&nbsp;(4)</a>
<a href="x-stitky.htm#scs">čas&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sdt">data&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sdmoni">démoni&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#seditor">editor&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#semotikony">emotikony&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sfltpk">Flatpak&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#shesovcfunkce">hešovací funkce&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#shledn">hledání&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sinternet">internet&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sklvesnice">klávesnice&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#skdovn">kódování&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#skomprese">komprese&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#slvm">LVM&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sodkldcprostor">odkládací prostor&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sovldn">ovládání&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sprocesy">procesy&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#sprogrm">program&nbsp;&nbsp;(6)</a>
<a href="x-stitky.htm#sprogrmovn">programování&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#spstupovprv">přístupová práva&nbsp;&nbsp;(2)</a>
<a href="x-stitky.htm#srmdisk">ramdisk&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#ssnp">Snap&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#ssoubory">soubory&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#ssprvverz">správa verzí&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#ssyntxe">syntaxe&nbsp;&nbsp;(4)</a>
<a href="x-stitky.htm#ssystm">systém&nbsp;&nbsp;(6)</a>
<a href="x-stitky.htm#stemtickokruh">tematický okruh&nbsp;&nbsp;(14)</a>
<a href="x-stitky.htm#sunicode">Unicode&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#svideo">video&nbsp;&nbsp;(2)</a>
<a href="x-stitky.htm#szip">zip&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#szprcovntextu">zpracování textu&nbsp;&nbsp;(4)</a>
<a href="x-stitky.htm#szvuk">zvuk&nbsp;&nbsp;(1)</a>
</div></div>
<a href="#zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
<!-- MENU NÁPOVĚDA -->
<a href="#menunapoveda" id="menunapoveda"><span class="prvnipismeno">N</span>ápověda</a>
<aside class="menunapoveda">
<div><div class="nadpis">Nápověda</div><div class="polozky">
<a href="predmluva.htm">Předmluva</a>
<a href="koncepce-projektu.htm">Koncepce projektu</a>
<a href="https://singularis-mzf.github.io/">Ostatní verze knihy</a>
<a href="https://github.com/singularis-mzf/linux-spellbook">Repozitář na GitHubu</a>
</div></div>
<a href="#zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
</nav>

<a href="#nahore" id="odkaznahoru" title="NAHORU − na začátek stránky">▴<!--⤒--></a>
<a href="#dole" id="odkazdolu" title="DOLŮ − na konec stránky">▾<!--⤓--></a>

</div>
</body>
</html>
