<!doctype html>
<html lang="cs">
<head profile="http://www.w3.org/2005/10/profile">
<meta charset="UTF-8">

<title>Zpracování textových souborů − Linux: Kniha kouzel</title>

<link rel="stylesheet" type="text/css" href="lkk-20210424.css">
<link rel="icon" type="image/png" href="obrazky/favicon.png">
</head>
<body>
<div id="nahore"><div id="okno">
<header>
<span class="vlevo"><a href="index.htm"><img src="obrazky/favicon.png" width="16" height="16" alt=""></a> Linux: Kniha kouzel, vanilková příchuť 2.7, O. O. (24. dubna 2021)</span>
<span class="vpravo"><span class="ico1"></span><span class="ico2"></span><span class="ico3"></span></span>
</header>
<nav class="menuokna">
<a href="#menuosnova" class="menu"><span class="prvnipismeno">O</span>snova</a>
<a href="#menukapitoly" class="menu"><span class="prvnipismeno">K</span>apitoly</a>
<a href="#menustitky" class="menu"><span class="prvnipismeno">Š</span>títky</a>
<a href="#menunapoveda" class="menu"><span class="prvnipismeno">N</span>ápověda</a>
<a href="system.htm" rel="prev" title="17. Systém" accesskey="p" class="predchozi">Předchozí&nbsp;kapitola</a>
<a href="index.htm" class="prehled"><span class="prvnipismeno">P</span>řehled kapitol</a>
<a href="zpracovani-videa-a-zvuku.htm" rel="next" title="19. Zpracování videa a zvuku" accesskey="n" class="nasledujici">Následující&nbsp;kapitola</a>
</nav>

<div class="slogan-veskera-moc">Veškerá moc příkazové řádky/příkazového řádku přehledně, pro začátečníky i&nbsp;pokročilé</div>

<!--
<nav class="horni">
<div class="slogan">Veškerá moc příkazové řádky/příkazového řádku přehledně, pro začátečníky i&nbsp;pokročilé</div>
<span class="prev">
<a href="system.htm" rel="prev" title="17. Systém" accesskey="p">Předchozí&nbsp;kapitola</a>&nbsp;|
</span><a href="index.htm" accesskey="i">Přehled</a><span class="next"><!- -
- ->&nbsp;| <a href="zpracovani-videa-a-zvuku.htm" rel="next" title="19. Zpracování videa a zvuku" accesskey="n">Následující&nbsp;kapitola</a>
</span>
</nav>
-->


<article>

<h1 class="kapitola">18. <img src="obrazky/ik/zpracovani-textovych-souboru.png" alt="" width="64" height="64"> Zpracování textových souborů</h1>
<div class="stitky"><a href="x-stitky.htm#">tematický okruh</a>
<a href="x-stitky.htm#">zpracování textu</a>
</div><div class="zaklinadlo"><div class="zahlavi"><span class="ikona D"><span><a href="#zxdba39d5">✷</a></span></span>konvertovat soubor <b>do/z</b> UTF-8<span class="cislo">#1 </span><sup><a href="#kapxcbef70cppc1" id="kapxcbef70cppcr1" title="Užitečná kódování: ISO8859-2, WINDOWS-1250, UTF-16, UTF-16BE, UTF-16LE, UTF-8, CP852 (MS-DOS), MAC-CENTRALEUROPE.">(1)</a></sup></div><div class="radky">
<div class="radekzaklinadla">iconv -f &quot;<i class="dopln">vstupní kódování</i>&quot; -t UTF-8 <span class="volznak">[</span>-o &quot;<i class="dopln">výstupní-soubor</i>&quot;<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">vstupní-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">iconv -f UTF-8 -t &quot;<i class="dopln">cílové kódování</i><span class="volznak">[</span>//IGNORE<span class="volznak">]</span>&quot; <span class="volznak">[</span>-o &quot;<i class="dopln">výstupní-soubor</i>&quot;<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">vstupní-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D"><span><a href="#zx762fc8a">⌨</a></span></span><b>náhodně</b> přeskládat<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">shuf <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D"><span><a href="#zx206a134">⢡</a></span></span>množinový rozdíl dvou souborů (<b>and not</b>)<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C join <span class="volznak">[</span>-z<span class="volznak">]</span> -t &quot;&quot; -j 1 -v 1 <i class="dopln">hlavní-soubor</i> <i class="dopln">odečítaný-soubor</i></div>
</div></div>

<h2 id="cast1"><a href="#cast1"><span class="cislo">1.</span> Úvod</a></h2>
<p class="ponadpisu">
Tato kapitola se zabývá nástroji pro řazení, filtrování, analýzu, konverzi a jiné zpracování textových souborů.
Nezabývá se však komplexními nástroji jako GNU awk, sed či Perl, kterým budou věnovány samostatné
kapitoly.
</p><p>
Textové soubory se vyznačují tím, že jsou tvořeny posloupností řádek (v této kapitole zvaných „záznamy“)
tvořených řetězci znaků z tzv. znakové sady. V souboru jsou znaky uloženy ve formě jednobajtových
či vícebajtových sekvencí, jejichž význam určuje použité kódování znaků (v dnešní praxi téměř výhradně
UTF-8 nebo jeho podmnožina ASCII).
</p><p>
Většina nástrojů používaných v této kapitole je vyvíjena v rámci projektu GNU.
</p>

<h2 id="cast2"><a href="#cast2"><span class="cislo">2.</span> Definice</a></h2>
<ul><li><b>Kódování znaků</b> (character encoding) je určitá reprezentace znakové sady textu pomocí bajtů a jejich sekvencí v souboru či paměti. U textových souborů uvažujeme výhradně kódování UTF-8, případně jeho podmnožinu ASCII. Soubory v jiných kódováních sice také můžeme zpracovávat, ale obvykle je výhodnější je nejprve převést na UTF-8.
</li><li><b>Znak</b> (character) je základní jednotka textu, které je kódováním znaků přiřazen nějaký význam a binární reprezentace. Např. „A“ je v UTF-8 znak, který znamená písmeno A a je reprezentován bajtem o hodnotě 65. „\n“ je v UTF-8 znak, který znamená konec řádku a je reprezentován bajtem o hodnotě 10.
</li><li><b>Řetězec</b> (string) je libovolná posloupnost znaků, i prázdná či tvořená jedním znakem.
</li><li><b>Záznam</b> je zobecnění pojmu „řádka“ v textovém souboru. Textový soubor se dělí na jednotlivé záznamy podle jejich zakončení <b>ukončovačem záznamu</b> (record separator), což je typicky znak konce řádky „\n“ nebo nulový bajt „\0“. Záznamy se číslují od 1.
</li><li>Záznam může být brán jako celek, nebo může být dál dělen na <b>sloupce</b> (fields). Existuje několik metod dělení záznamu na sloupce, nejčastější je použití určitého znaku ASCII jako „oddělovače sloupců“ (field separator). Sloupce se v každém záznamu číslují od 1.
</li><li><b>Záplata</b> je speciální textový soubor, který obsahuje záznam o změnách mezi dvěma verzemi jednoho nebo více textových souborů. Využití záplat je v dnešní době zřídkavé.
</li></ul><p class="ponadpisu">
V této kapitole rozlišuji následující formáty textových souborů:
</p>
<ul><li><b>TXT</b> – záznamy ukončeny „\n“, na sloupce se nedělí.
</li><li><b>TXTZ</b> – záznamy ukončeny „\0“, na sloupce se nedělí.
</li><li><b>TSV</b> – záznamy ukončeny „\n“, sloupce se dělí tabulátorem („\t“) nebo jiným znakem ASCII (např. v /etc/passwd se dělí znakem „:“).
</li><li><b>TSVZ</b> – záznamy ukončeny „\0“, sloupce se oddělují tabulátorem („\t“) nebo jiným znakem ASCII.
</li><li>pevná šířka sloupců – záznamy ukončeny „\n“, sloupce (kromě posledního) jsou zarovnány na pevný počet znaků pomocí mezer.
</li></ul>
<h2 id="cast3" class="zaklinadla"><a href="#cast3"><span class="cislo">3.</span> Zaklínadla: Konverze</a></h2>

<h3 id="cast3x1"><span><a href="#cast3x1" title="kapitola 18 (Zpracování textových souborů), sekce 3 (Zaklínadla: Konverze), podsekce 1 (Konverze ukončení řádky)"><sup>3/</sup>1 Konverze ukončení řádky</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx75e4112"><span><a href="#zx75e4112">☣</a></span></span>Windows nebo linux <b>na linux</b> (na místě/rourou)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">sed -Ei 's/\r//g' <i class="dopln">soubor</i><span class="tritecky"></span></div>
<div class="radekzaklinadla"><i class="dopln">...</i> | tr -d \\r | <i class="dopln">...</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx8316534"><span><a href="#zx8316534">♋</a></span></span>Windows nebo linux <b>na Windows</b> (na místě/rourou)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sed -Ei 's/\r*$/\r/' <i class="dopln">soubor</i><span class="tritecky"></span></div>
<div class="radekzaklinadla"><i class="dopln">...</i> | sed -E 's/\r*$/\r/' | <i class="dopln">...</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx0cf9a65"><span><a href="#zx0cf9a65">Ꙫ</a></span></span>Mac OS na linux (na místě/rourou)<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C sed -zEi 'y/\\r/\\n/' <i class="dopln">soubor</i><span class="tritecky"></span></div>
<div class="radekzaklinadla"><i class="dopln">...</i> | tr \\r \\n | <i class="dopln">...</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona L" id="zxe9c479b"><span><a href="#zxe9c479b">⏞</a></span></span>linux na Mac OS (na místě/rourou)<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C sed -zEi 'y/\\n/\\r/' <i class="dopln">soubor</i><span class="tritecky"></span></div>
<div class="radekzaklinadla"><i class="dopln">...</i> | tr \\n \\r | <i class="dopln">...</i></div>
</div></div>

<h3 id="cast3x2"><span><a href="#cast3x2" title="kapitola 18 (Zpracování textových souborů), sekce 3 (Zaklínadla: Konverze), podsekce 2 (Konverze kódování znaků)"><sup>3/</sup>2 Konverze kódování znaků</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxdba39d5"><span><a href="#zxdba39d5">✷</a></span></span>konvertovat soubor <b>do/z</b> UTF-8<span class="cislo">#1 </span><sup><a href="#kapxcbef70cppc2" id="kapxcbef70cppcr2" title="Užitečná kódování: ISO8859-2, WINDOWS-1250, UTF-16, UTF-16BE, UTF-16LE, UTF-8, CP852 (MS-DOS), MAC-CENTRALEUROPE.">(2)</a></sup></div><div class="radky">
<div class="radekzaklinadla">iconv -f &quot;<i class="dopln">vstupní kódování</i>&quot; -t UTF-8 <span class="volznak">[</span>-o &quot;<i class="dopln">výstupní-soubor</i>&quot;<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">vstupní-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">iconv -f UTF-8 -t &quot;<i class="dopln">cílové kódování</i><span class="volznak">[</span>//IGNORE<span class="volznak">]</span>&quot; <span class="volznak">[</span>-o &quot;<i class="dopln">výstupní-soubor</i>&quot;<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">vstupní-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx76f4444"><span><a href="#zx76f4444">⇘</a></span></span>konvertovat soubor do ASCII s transliterací<span class="cislo">#2 </span><sup><a href="#kapxcbef70cppc3" id="kapxcbef70cppcr3" title="Poznámka: tato konverze je ztrátová, a tudíž prakticky jednosměrná.">(3)</a></sup></div><div class="radky">
<div class="radekzaklinadla">iconv -f &quot;<i class="dopln">vstupní kodování</i>&quot; -t &quot;ASCII//TRANSLIT&quot; <span class="volznak">[</span>-o &quot;<i class="dopln">výstupní-soubor</i>&quot;<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">vstupní-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx3fb3fbb"><span><a href="#zx3fb3fbb">⢮</a></span></span>vypsat úplný seznam podporovaných kódování<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">iconv -l | sed -E 's!/*$!!'</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxe0232a1"><span><a href="#zxe0232a1">⭔</a></span></span>pokusit se zjistit kódování textu<span class="cislo">#4 </span><sup><a href="#kapxcbef70cppc4" id="kapxcbef70cppcr4" title="Tip: přibližně může pomoci příkaz „file“ nebo autodetekce kódování při otevření textového souboru ve Firefoxu.">(4)</a></sup></div><div class="radky">
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
</div></div>

<h3 id="cast3x3"><span><a href="#cast3x3" title="kapitola 18 (Zpracování textových souborů), sekce 3 (Zaklínadla: Konverze), podsekce 3 (Konverze velikosti písmen)"><sup>3/</sup>3 Konverze velikosti písmen</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx0f220e0"><span><a href="#zx0f220e0">ꓽ</a></span></span>konvertovat malá písmena <b>na velká</b> (obecně/příklad)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">sed -E 's/.*/\U&amp;/' <span class="volznak">[</span><i class="dopln">vstupní-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">printf &quot;Žluťoučký kůň\n&quot; | sed -E's/.*/\U&amp;/'<span class="prikladhodnoty">⊨ ŽLUŤOUČKÝ KŮŇ</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx95cd7ea"><span><a href="#zx95cd7ea">ຍ</a></span></span>konvertovat velká písmena <b>na malá</b> (obecně/příklad)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">sed -E 's/.*/\L&amp;/' <span class="volznak">[</span><i class="dopln">vstupní-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">printf &quot;Žluťoučký kůň\n&quot; | sed -E's/.*/\L&amp;/'<span class="prikladhodnoty">⊨ žluťoučký kůň</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxbfb1aaa"><span><a href="#zxbfb1aaa">◱</a></span></span>konvertovat malá písmena na velká <b>a naopak</b><span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">sed -E 's/./0&amp;/g;s/0([[:lower:]])/1\U\1/g;s/0[[:upper:]]/\L&amp;/g;s/[01](.)/\1/g' <span class="volznak">[</span><i class="dopln">vstupní-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">sed -E 's/(.)/0\1/g;s/0([[:lower:]])/1\U\1/g;s/0([[:upper:]])/1\L\1/g;s/[01](.)/\1/g <span class="volznak">[</span><i class="dopln">vstupní-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>

<h2 id="cast4" class="zaklinadla"><a href="#cast4"><span class="cislo">4.</span> Zaklínadla: Práce se záznamy</a></h2>
<p class="ponadpisu">
<b>Důležitá poznámka pro všechna zaklínadla v této sekci:</b> Kde je v zaklínadle volitelný parametr „z“ (resp. „-z“), tento parametr funguje jako přepínač mezi formáty txt a txtz. Při použití formátu txt tento přepínač vynechejte, při použití txtz ho naopak vždy zařaďte.
</p>

<h3 id="cast4x1"><span><a href="#cast4x1" title="kapitola 18 (Zpracování textových souborů), sekce 4 (Zaklínadla: Práce se záznamy), podsekce 1 (Vytvoření a smazání)"><sup>4/</sup>1 Vytvoření a smazání</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx8c61869"><span><a href="#zx8c61869">☸</a></span></span>vytvořit <b>prázdný soubor</b> (existuje-li, vyprázdnit)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">&gt; <i class="dopln">soubor</i> <span class="volznak">[</span>&gt; <i class="dopln">další-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx0d46643"><span><a href="#zx0d46643">ປ</a></span></span>vytvořit prázdný soubor (existuje-li, jen aktualizovat čas „změněno“)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">touch <i class="dopln">soubor</i><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxfeb8b88"><span><a href="#zxfeb8b88">✗</a></span></span>N-krát zopakovat určitý záznam (txt/txtz)<span class="cislo">#3 </span><sup><a href="#kapxcbef70cppc5" id="kapxcbef70cppcr5" title="Výchozí hodnota textu záznamu je „y“.">(5)</a></sup></div><div class="radky">
<div class="radekzaklinadla">yes <span class="volznak">[</span><span class="volznak">[</span>--<span class="volznak">]</span> <i class="dopln">text-záznamu</i><span class="volznak">]</span> | head -n <i class="dopln">N</i></div>
<div class="radekzaklinadla">printf %s\0 $'<i class="dopln">text-záznamu</i>' | sed -z ':x;p;b<span class="viditelnamezera">&nbsp;</span>x' | head -zn <i class="dopln">N</i></div>
</div></div>

<h3 id="cast4x2"><span><a href="#cast4x2" title="kapitola 18 (Zpracování textových souborů), sekce 4 (Zaklínadla: Práce se záznamy), podsekce 2 (Filtrace záznamů podle pořadí)"><sup>4/</sup>2 Filtrace záznamů podle pořadí</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxfcf6f3b"><span><a href="#zxfcf6f3b">⋝</a></span></span>vzít/vynechat N <b>prvních</b><span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">head -<span class="volznak">[</span>z<span class="volznak">]</span>n <i class="dopln">N</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">tail -<span class="volznak">[</span>z<span class="volznak">]</span>n +<i class="dopln">N+1</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxb2f9f23"><span><a href="#zxb2f9f23">✦</a></span></span>vzít/vynechat N <b>posledních</b><span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">tail -<span class="volznak">[</span>z<span class="volznak">]</span>n <i class="dopln">N</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">head -<span class="volznak">[</span>z<span class="volznak">]</span>n -<i class="dopln">N</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx33daa05"><span><a href="#zx33daa05">┒</a></span></span>vzít/vynechat <b>konkrétní</b> záznam<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">sed -<span class="volznak">[</span>z<span class="volznak">]</span>n <i class="dopln">číslo-záznamu</i>p <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">sed <span class="volznak">[</span>-z<span class="volznak">]</span> <i class="dopln">číslo-záznamu</i>d <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx2ca01b8"><span><a href="#zx2ca01b8">⢽</a></span></span>vzít/vynechat <b>rozsah</b> záznamů<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">sed -<span class="volznak">[</span>z<span class="volznak">]</span>n <i class="dopln">první-ponechaný</i>,<i class="dopln">poslední-ponechaný</i>p <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">sed <span class="volznak">[</span>-z<span class="volznak">]</span> <i class="dopln">první-vynechaný</i>,<i class="dopln">poslední-vynechaný</i>d <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxde79d77"><span><a href="#zxde79d77">♊</a></span></span>vzít pouze <b>liché/sudé</b> záznamy<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">sed -<span class="volznak">[</span>z<span class="volznak">]</span>n 'p;n' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">sed -<span class="volznak">[</span>z<span class="volznak">]</span>n 'n;p' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>

<h3 id="cast4x3"><span><a href="#cast4x3" title="kapitola 18 (Zpracování textových souborů), sekce 4 (Zaklínadla: Práce se záznamy), podsekce 3 (Filtrace záznamů podle obsahu)"><sup>4/</sup>3 Filtrace záznamů podle obsahu</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx9847dfd"><span><a href="#zx9847dfd">◈</a></span></span>vzít/vynechat záznamy odpovídající <b>regulárnímu výrazu</b><span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">egrep <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span>-x<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span> <i class="dopln">regulární-výraz</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">egrep <span class="volznak">[</span>-z<span class="volznak">]</span> -v <span class="volznak">[</span>-x<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span> <i class="dopln">regulární-výraz</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx36cc1a4"><span><a href="#zx36cc1a4">⡏</a></span></span>vzít/vynechat záznamy obsahující <b>podřetězec</b><span class="cislo">#2 </span><sup><a href="#kapxcbef70cppc6" id="kapxcbef70cppcr6" title="Poznámka: V hledaném podřetězci se nesmí vyskytovat znak \n, a to ani u formátu txtz, protože fgrep tento znak používá k oddělení více různých hledaných podřetězců. Pokud váš podřetězec tento znak obsahuje, existuje několik řešení, nejjednodušším je pomocí příkazu „tr“ na vstupu i výstupu příkazu fgrep prohodit znak \n s jiným ASCII znakem, který se v hledaném podřetězci nevyskytuje.">(6)</a></sup></div><div class="radky">
<div class="radekzaklinadla">fgrep <span class="volznak">[</span>-z<span class="volznak">]</span> '<i class="dopln">podřetězec</i>' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">fgrep <span class="volznak">[</span>-z<span class="volznak">]</span> -v '<i class="dopln">podřetězec</i>' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxa77cffb"><span><a href="#zxa77cffb">䷶</a></span></span>vzít/vynechat záznamy shodné s <b>řetězcem</b><span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">fgrep -<span class="volznak">[</span>z<span class="volznak">]</span>x '<i class="dopln">řetězec</i>' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">fgrep -<span class="volznak">[</span>z<span class="volznak">]</span>xv '<i class="dopln">řetězec</i>' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx52c52a7"><span><a href="#zx52c52a7">➜</a></span></span>vzít/vynechat záznamy od prvního vyhovění regulárnímu výrazu<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">sed -<span class="volznak">[</span>z<span class="volznak">]</span>En '/<i class="dopln">regulární výraz</i>/,$p' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">sed -<span class="volznak">[</span>z<span class="volznak">]</span>E '/<i class="dopln">regulární výraz</i>/,$d' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>

<h3 id="cast4x4"><span><a href="#cast4x4" title="kapitola 18 (Zpracování textových souborů), sekce 4 (Zaklínadla: Práce se záznamy), podsekce 4 (Filtrace záznamů podle počtu výskytů)"><sup>4/</sup>4 Filtrace záznamů podle počtu výskytů</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxb5e720a"><span><a href="#zxb5e720a">↞</a></span></span>vybrat ty, které se vysktují <b>pouze jednou</b><span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C sort <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span> | LC_ALL=C uniq -<span class="volznak">[</span>z<span class="volznak">]</span>u</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx391cd76"><span><a href="#zx391cd76">ᚇ</a></span></span>vybrat ty, které se vyskytují více než jednou (<b>duplicity</b>); vypsat jeden na skupinu/všechny<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C sort <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span> | LC_ALL=C uniq -<span class="volznak">[</span>z<span class="volznak">]</span>d</div>
<div class="radekzaklinadla">LC_ALL=C sort <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span> | LC_ALL=C uniq -<span class="volznak">[</span>z<span class="volznak">]</span>D</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx5a24efa"><span><a href="#zx5a24efa">ພ</a></span></span>vybrat ty, které se vyskytují N-krát<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C sort <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span> | LC_ALL=C uniq -<span class="volznak">[</span>z<span class="volznak">]</span>c | sed -<span class="volznak">[</span>z<span class="volznak">]</span>E 's/^\s*<i class="dopln">N</i>\s//;t;d'</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx5faa12d"><span><a href="#zx5faa12d">ຯ</a></span></span>seřadit a <b>vypsat počet výskytů</b> (především pro člověka)<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C sort <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span> | LC_ALL=C uniq -<span class="volznak">[</span>z<span class="volznak">]</span>c | sort -<span class="volznak">[</span>z<span class="volznak">]</span>n<span class="volznak">[</span>r<span class="volznak">]</span></div>
</div></div>

<h3 id="cast4x5"><span><a href="#cast4x5" title="kapitola 18 (Zpracování textových souborů), sekce 4 (Zaklínadla: Práce se záznamy), podsekce 5 (Řazení a přeskládání záznamů)"><sup>4/</sup>5 Řazení a přeskládání záznamů</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx47ba588"><span><a href="#zx47ba588">┫</a></span></span><b>obrátit</b> pořadí (txt/txtz)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">tac <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">tac -s \\0 <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx762fc8a"><span><a href="#zx762fc8a">⌨</a></span></span><b>náhodně</b> přeskládat<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">shuf <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxcb9af20"><span><a href="#zxcb9af20">⊦</a></span></span><b>seřadit</b><span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>LC_ALL=C<span class="volznak">]</span><span class="volznak">[</span>.UTF-8<span class="volznak">]</span> sort <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx1576e05"><span><a href="#zx1576e05">ꓸ</a></span></span>seřadit a <b>vyloučit duplicity</b><span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>LC_ALL=C.UTF-8<span class="volznak">]</span> sort -<span class="volznak">[</span>z<span class="volznak">]</span>u <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxba3cb45"><span><a href="#zxba3cb45">⊑</a></span></span>seskupit k sobě shodné záznamy a tyto skupiny náhodně přeskládat<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">sort -<span class="volznak">[</span>z<span class="volznak">]</span>R <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxda7d2ad"><span><a href="#zxda7d2ad">˦</a></span></span>seřadit, s výjimkou prvních N záznamů (ty ponechat, jak jsou)<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>cat <i class="dopln">soubor</i><span class="tritecky"></span> |<span class="volznak">]</span> (sed -<span class="volznak">[</span>z<span class="volznak">]</span>u <i class="dopln">N</i>q; <span class="volznak">[</span>LC_ALL=C<span class="volznak">]</span> sort <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span>)</div>
</div></div>

<h3 id="cast4x6"><span><a href="#cast4x6" title="kapitola 18 (Zpracování textových souborů), sekce 4 (Zaklínadla: Práce se záznamy), podsekce 6 (Množinové operace (nad seřazenými záznamy))"><sup>4/</sup>6 Množinové operace (nad seřazenými záznamy)</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxee8d4a5"><span><a href="#zxee8d4a5">ᔯ</a></span></span><b>předzpracování</b> textového souboru pro množinové operace (vyžadované!)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C sort -<span class="volznak">[</span>z<span class="volznak">]</span>u <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxc6d20e5"><span><a href="#zxc6d20e5">⠈</a></span></span>množinové sjednocení (<b>or</b>)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C sort -<span class="volznak">[</span>z<span class="volznak">]</span>mu <i class="dopln">první-soubor</i> <i class="dopln">další-soubor</i><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxedc4926"><span><a href="#zxedc4926">⏣</a></span></span>množinový průnik dvou souborů (<b>and</b>)<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C join <span class="volznak">[</span>-z<span class="volznak">]</span> -t &quot;&quot; -j 1 <i class="dopln">první-soubor</i> <i class="dopln">druhý-soubor</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx206a134"><span><a href="#zx206a134">⢡</a></span></span>množinový rozdíl dvou souborů (<b>and not</b>)<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C join <span class="volznak">[</span>-z<span class="volznak">]</span> -t &quot;&quot; -j 1 -v 1 <i class="dopln">hlavní-soubor</i> <i class="dopln">odečítaný-soubor</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx96a745f"><span><a href="#zx96a745f">✈</a></span></span>exkluzivní sjednocení dvou souborů (<b>xor</b>)<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C join <span class="volznak">[</span>-z<span class="volznak">]</span> -t &quot;&quot; -j 1 -v 1 -v 2 <i class="dopln">soubor1</i> <i class="dopln">soubor2</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxf8fbe35"><span><a href="#zxf8fbe35">♒</a></span></span>množinový průnik více souborů (and)<span class="cislo">#6 </span><sup><a href="#kapxcbef70cppc7" id="kapxcbef70cppcr7" title="Tip: nejlepšího výkonu této varianty dosáhnete tak, že začnete od nejmenšího vstupního souboru.">(7)</a></sup></div><div class="radky">
<div class="radekzaklinadla">cat <i class="dopln">první-soubor</i> <span class="volznak">[</span>| LC_ALL=C join <span class="volznak">[</span>-z<span class="volznak">]</span> -t &quot;&quot; -j 1 - <i class="dopln">další-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>

<h3 id="cast4x7"><span><a href="#cast4x7" title="kapitola 18 (Zpracování textových souborů), sekce 4 (Zaklínadla: Práce se záznamy), podsekce 7 (Ostatní)"><sup>4/</sup>7 Ostatní</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx3e6d093"><span><a href="#zx3e6d093">◀</a></span></span><b>počet záznamů</b> (txt/txtz)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">wc -l &lt; <i class="dopln">soubor</i></div>
<div class="radekzaklinadla">tr -cd \\0 &lt; <i class="dopln">soubor</i> | wc -c</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx83fac5c"><span><a href="#zx83fac5c">ɷ</a></span></span>maximální <b>délka záznamu</b> (txt/txtz)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">tr '\t' x &lt; <i class="dopln">soubor</i> | wc -L</div>
<div class="radekzaklinadla">tr '\0\n\t' '\nxx' &lt; <i class="dopln">soubor</i> | wc -L</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx6b1ef32"><span><a href="#zx6b1ef32">⣽</a></span></span><b>spojit</b> soubory za sebe<span class="cislo">#3 </span><sup><a href="#kapxcbef70cppc8" id="kapxcbef70cppcr8" title="Standardní vstup můžete mezi soubory vřadit parametrem „-“ místo názvu souboru. Neprázdné soubory musejí být řádně ukončeny ukončovačem záznamu, jinak se poslední záznam spojí s prvním záznamem následujícího souboru.">(8)</a></sup></div><div class="radky">
<div class="radekzaklinadla">cat <i class="dopln">soubor</i><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxe2461f0"><span><a href="#zxe2461f0">ຈ</a></span></span><b>rozdělit</b> soubor na díly s uvedeným maximálním počtem záznamů (txt/txtz/příklad)<span class="cislo">#4 </span><sup><a href="#kapxcbef70cppc9" id="kapxcbef70cppcr9" title="Přípona výstupních souborů nesmí obsahovat oddělovač adresářů „/“. Číslování výstupních souborů začíná od nuly; jinou hodnotu lze nastavit, když místo parametru -d použijete parametr --numeric-suffixes=číslo. Uvedený příklad rozdělí soubor „vse.txt“ po sto řádcích na soubory „rozdelene-zaznamy/s00000dil.txt“, „rozdelene-zaznamy/s00001dil.txt“ atd.">(9)</a></sup></div><div class="radky">
<div class="radekzaklinadla">split -d -a <i class="dopln">počet-číslic</i> -l <i class="dopln">maximální-počet-záznamů</i> <span class="volznak">[</span>--additional-suffix='<i class="dopln">přípona výstupních souborů</i>'<span class="volznak">]</span> <i class="dopln">vstupní-soubor</i> &quot;<i class="dopln">předpona výstupních souborů</i>&quot;</div>
<div class="radekzaklinadla">split -d -a <i class="dopln">počet-číslic</i> -l <i class="dopln">maximální-počet-záznamů</i> -t \\0 <span class="volznak">[</span>--additional-suffix='<i class="dopln">přípona výstupních souborů</i>'<span class="volznak">]</span> <i class="dopln">vstupní-soubor</i> &quot;<i class="dopln">předpona výstupních souborů</i>&quot;</div>
<div class="radekzaklinadla">split -d -a 5 -l 100 --additional-suffix='dil.txt' vse.txt &quot;rozdelene-zaznamy/s&quot;</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona L" id="zxbd27c74"><span><a href="#zxbd27c74">⟘</a></span></span>zapisovat na standardní výstup a současně do souborů<span class="cislo">#5 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span><i class="dopln">zdroj vstupu</i> |<span class="volznak">]</span> tee <span class="volznak">[</span>-a<span class="volznak">]</span> <i class="dopln">výstupní-soubor</i><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx3625996"><span><a href="#zx3625996">ᔺ</a></span></span>obrátit <b>pořadí znaků</b> v každém záznamu (txt/txtz)<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">rev <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">sed -zE 's/[^\n]/)&amp;(/g;s/\n/)xx(/g' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span> | tr \\0 \\n | rev | tr \\n \\0 | sed -zE 's/\(xx\)/\n/g;s/\((.)\)/\1/g'</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx2bcd181"><span><a href="#zx2bcd181">∳</a></span></span>ke každému záznamu přidat <b>předponu/příponu</b><span class="cislo">#7 </span><sup><a href="#kapxcbef70cppc10" id="kapxcbef70cppcr10" title="Příkaz „sed“ vyžaduje v příponě i předponě další úroveň odzvláštnění znaků „\“ a „\n“. Proto v uvedeném případě zadávejte zpětné lomítko jako „\\\\“ a konec řádky jako „\\\n“. Konec řádky se navíc může vyskytnout pouze při použití formátu txtz, u formátu txt pravděpodobně nebude fungovat správně.">(10)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sed <span class="volznak">[</span>-z<span class="volznak">]</span> $'i\\\n<i class="dopln">předpona</i>' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span> | paste <span class="volznak">[</span>-z<span class="volznak">]</span> -d &quot;&quot; - -</div>
<div class="radekzaklinadla">sed <span class="volznak">[</span>-z<span class="volznak">]</span> $'a\\\n<i class="dopln">přípona</i>' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span> | paste <span class="volznak">[</span>-z<span class="volznak">]</span> -d &quot;&quot; - -</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxeaa7305"><span><a href="#zxeaa7305">⊱</a></span></span>ke každému záznamu přidat předponu i příponu (alternativy)<span class="cislo">#8 </span><sup><a href="#kapxcbef70cppc11" id="kapxcbef70cppcr11" title="Uvedené varianty se liší požadavky na odzvláštnění v příponě: v první variantě sed požaduje dodatečné odzvláštění znaků „\“ a (případně) konce řádku; v druhé variantě požaduje sed odzvláštnění znaků „\“, „/“ a „&amp;“.">(11)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sed <span class="volznak">[</span>-z<span class="volznak">]</span> $'i\\\n<i class="dopln">předpona</i>\np\nc\\\n<i class="dopln">přípona</i>' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span> | paste <span class="volznak">[</span>-z<span class="volznak">]</span> -d &quot;&quot; - - -</div>
<div class="radekzaklinadla">sed <span class="volznak">[</span>-z<span class="volznak">]</span> 's/.*/<i class="dopln">předpona</i>&amp;<i class="dopln">přípona</i>/'</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx0881c6e"><span><a href="#zx0881c6e">✮</a></span></span>přidat <b>číslo záznamu</b> pro člověka (txt/txtz)<span class="cislo">#9 </span></div><div class="radky">
<div class="radekzaklinadla">nl <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span> <i class="dopln">soubor</i><span class="tritecky"></span></div>
<div class="radekzaklinadla">gawk 'BEGIN {RS=ORS=&quot;\0&quot;; OFS=&quot;\t&quot;;}{printf(&quot;%7d %s\n&quot;, NR, $0)}' <span class="volznak">[</span>--<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxbba63c2"><span><a href="#zxbba63c2">☝</a></span></span>přeformátovat text do řádek určité šířky<span class="cislo">#10 </span><sup><a href="#kapxcbef70cppc12" id="kapxcbef70cppcr12" title="Běžně se k tomu používá příkaz „fmt“, ale ten nerespektuje vícebajtové znaky, takže pro texty v UTF-8 funguje nekorektně.">(12)</a></sup></div><div class="radky">
<div class="radekzaklinadla"><a href="#" class="reseninezname" title="Řešení tohoto příkladu nebylo při vydání této verze kapitoly známo.">?</a></div>
</div></div>

<h2 id="cast5" class="zaklinadla"><a href="#cast5"><span class="cislo">5.</span> Zaklínadla: Práce se sloupci (TSV, TSVZ)</a></h2>
<p class="ponadpisu">
<b>Důležité poznámka pro všechna zaklínadla v této sekci:</b> Kde je v zaklínadle volitelný parametr „z“ (resp. „-z“), tento parametr funguje jako přepínač mezi formáty tsv a tsvz. Při použití formátu tsv tento přepínač vynechejte, při použití tsvz ho naopak vždy zařaďte.
</p>

<h3 id="cast5x1"><span><a href="#cast5x1" title="kapitola 18 (Zpracování textových souborů), sekce 5 (Zaklínadla: Práce se sloupci (TSV, TSVZ)), podsekce 1 (Vybrat/spojit sloupce)"><sup>5/</sup>1 Vybrat/spojit sloupce</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxd805c31"><span><a href="#zxd805c31">♘</a></span></span>vzít/vynechat určité sloupce<span class="cislo">#1 </span><sup><a href="#kapxcbef70cppc13" id="kapxcbef70cppcr13" title="Specifikace sloupců specifikuje množinu (tzn. ne výčet) sloupců. Má tvar jednotlivých čísel oddělených čárkami, např. „7,3,2,5,2“ vypíše sloupce 2, 3, 5 a 7. Místo jednotlivého čísla lze zadat rozsah ve tvaru „číslo-číslo“, „číslo-“ nebo „-číslo“, který se rozvine na všechny odpovídající sloupce, takže např. specifikace „7,3-5,-4“ odpovídá sloupcům 1, 2, 3, 4, 5 a 7.">(13)</a></sup></div><div class="radky">
<div class="radekzaklinadla">cut <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span>-d <i class="dopln">oddělovač</i><span class="volznak">]</span> -f <i class="dopln">specifikace,sloupců</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">cut --complement <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span>-d <i class="dopln">oddělovač</i><span class="volznak">]</span> -f <i class="dopln">specifikace,sloupců</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx86cf44d"><span><a href="#zx86cf44d">⠮</a></span></span>vzít určité sloupce (bez omezení)<span class="cislo">#2 </span><sup><a href="#kapxcbef70cppc14" id="kapxcbef70cppcr14" title="Pro čtení ze standarního vstupu zadejte místo souboru „-“.">(14)</a></sup></div><div class="radky">
<div class="radekzaklinadla">join <span class="volznak">[</span>-z<span class="volznak">]</span> --nocheck-order -j 1 -a 2 -t $'\t' -o 2.<i class="dopln">číslo-prvního-sloupce</i><span class="volznak">[</span>,2.<i class="dopln">číslo-dalšího-sloupce</i><span class="volznak">]</span><span class="tritecky"></span> /dev/null <i class="dopln">soubor</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx4b937ee"><span><a href="#zx4b937ee">⡽</a></span></span>spojit sloupce ze dvou či více souborů podle čísla záznamu<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">paste <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span>-d <i class="dopln">oddělovač</i><span class="volznak">]</span> <i class="dopln">soubor1</i> <i class="dopln">soubor2</i> <span class="volznak">[</span><i class="dopln">další-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxd02b3ff"><span><a href="#zxd02b3ff">☼</a></span></span>spojit sloupce ze dvou souborů podle společného sloupce (komplikované)<span class="cislo">#4 </span><sup><a href="#kapxcbef70cppc15" id="kapxcbef70cppcr15" title="Chování příkazu „join“ je smysluplné, ale poměrně komplikované. Před použitím tohoto zaklínadla prosím nastudujte manuálovou stránku příkazu join!">(15)</a></sup></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>LC_ALL=C<span class="volznak">]</span> join <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">další parametry</i><span class="volznak">]</span> -t $'\t' -1 <i class="dopln">číslo-sloupce-v-prvním-souboru</i> -2 <i class="dopln">číslo-sloupce-v-druhém-souboru</i> <span class="volznak">[</span>-a 1<span class="volznak">]</span> <span class="volznak">[</span>-a 2<span class="volznak">]</span> <span class="volznak">[</span>-o <i class="dopln">definice-výstupu</i><span class="volznak">]</span> <i class="dopln">soubor1</i> <i class="dopln">soubor2</i></div>
</div></div>

<h3 id="cast5x2"><span><a href="#cast5x2" title="kapitola 18 (Zpracování textových souborů), sekce 5 (Zaklínadla: Práce se sloupci (TSV, TSVZ)), podsekce 2 (Filtrace podle obsahu sloupců)"><sup>5/</sup>2 Filtrace podle obsahu sloupců</a></span></h3>
<p class="ponadpisu">
Pro tsvz uveďte část „;RS=ORS=&quot;\0&quot;;“.
</p>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxfece5c4"><span><a href="#zxfece5c4">↲</a></span></span>vzít/vynechat záznamy, kde N-tý sloupec odpovídá <b>regulárnímu výrazu</b><span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">gawk 'BEGIN {FS=OFS=&quot;\t&quot;<span class="volznak">[</span>;RS=ORS=&quot;\0&quot;;<span class="volznak">]</span>} $<i class="dopln">N</i> ~ /<i class="dopln">regulární výraz</i>/' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">gawk 'BEGIN {FS=OFS=&quot;\t&quot;<span class="volznak">[</span>;RS=ORS=&quot;\0&quot;;<span class="volznak">]</span>} $<i class="dopln">N</i> !~ /<i class="dopln">regulární výraz</i>/' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx98f44a9"><span><a href="#zx98f44a9">ᚚ</a></span></span>vzít/vynechat záznamy, kde N-tý sloupec obsahuje <b>podřetězec</b><span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">gawk 'BEGIN {FS=OFS=&quot;\t&quot;<span class="volznak">[</span>;RS=ORS=&quot;\0&quot;;<span class="volznak">]</span>} index($<i class="dopln">N</i>, &quot;<i class="dopln">podřetězec</i>&quot;)' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">gawk 'BEGIN {FS=OFS=&quot;\t&quot;<span class="volznak">[</span>;RS=ORS=&quot;\0&quot;;<span class="volznak">]</span>} !index($<i class="dopln">N</i>, &quot;<i class="dopln">podřetězec</i>&quot;)' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxc8e63e4"><span><a href="#zxc8e63e4">❚</a></span></span>vzít/vynechat záznamy, kde N-tý sloupec je <b>řetězec</b><span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">gawk 'BEGIN {FS=OFS=&quot;\t&quot;<span class="volznak">[</span>;RS=ORS=&quot;\0&quot;;<span class="volznak">]</span>} $<i class="dopln">N</i> == &quot;<i class="dopln">podřetězec</i>&quot;' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">gawk 'BEGIN {FS=OFS=&quot;\t&quot;<span class="volznak">[</span>;RS=ORS=&quot;\0&quot;;<span class="volznak">]</span>} $<i class="dopln">N</i> != &quot;<i class="dopln">podřetězec</i>&quot;' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>

<h3 id="cast5x3"><span><a href="#cast5x3" title="kapitola 18 (Zpracování textových souborů), sekce 5 (Zaklínadla: Práce se sloupci (TSV, TSVZ)), podsekce 3 (Řazení záznamů podle obsahu sloupců)"><sup>5/</sup>3 Řazení záznamů podle obsahu sloupců</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx99d88b0"><span><a href="#zx99d88b0">⁘</a></span></span>seřadit podle N-tého sloupce<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>LC_ALL=C.UTF-8<span class="volznak">]</span> sort <span class="volznak">[</span>-z<span class="volznak">]</span> -t $'\t' -k <i class="dopln">N</i>,<i class="dopln">N</i><span class="volznak">[</span><i class="dopln">druh-a-příznaky-řazení</i><span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxdae3abc"><span><a href="#zxdae3abc">╏</a></span></span>seřadit podle sloupců M až N (včetně)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>LC_ALL=C.UTF-8<span class="volznak">]</span> sort <span class="volznak">[</span>-z<span class="volznak">]</span> -t $'\t' -k <i class="dopln">M</i>,<i class="dopln">N</i><span class="volznak">[</span><i class="dopln">druh-a-příznaky-řazení</i><span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx96fccc9"><span><a href="#zx96fccc9">⌙</a></span></span>seřadit podle více kritérií<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>LC_ALL=C.UTF-8<span class="volznak">]</span> sort <span class="volznak">[</span>-z<span class="volznak">]</span> <span class="volznak">[</span>-s<span class="volznak">]</span> -t $'\t' -k <i class="dopln">jedno-kritérium</i> <span class="volznak">[</span>-k <i class="dopln">další-kritérium</i><span class="volznak">]</span><span class="tritecky"></span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx053af6d"><span><a href="#zx053af6d">䷒</a></span></span>příklad: seřadit vzestupně podle číselné hodnoty 7. sloupce a pak sestupně podle 3. sloupce, bez ohledu na velikost písmen<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">sort <span class="volznak">[</span>-z<span class="volznak">]</span> -t $'\t' -k 7,7n -k 3,3ri <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>

<h3 id="cast5x4"><span><a href="#cast5x4" title="kapitola 18 (Zpracování textových souborů), sekce 5 (Zaklínadla: Práce se sloupci (TSV, TSVZ)), podsekce 4 (Ostatní)"><sup>5/</sup>4 Ostatní</a></span></h3>
<p class="ponadpisu">
Pro formát tsvz použijte „RS=&quot;\0&quot;;“, pro tsv jej vynechejte.
</p>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona L" id="zx927b649"><span><a href="#zx927b649">⟯</a></span></span><b>počet sloupců</b> prvního záznamu<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">head <span class="volznak">[</span>-z<span class="volznak">]</span> <i class="dopln">soubor</i> | tr -cd \\t | wc -c</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxaebcc9c"><span><a href="#zxaebcc9c">☭</a></span></span>maximální počet sloupců (tsv/tsvz)<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">gawk 'BEGIN {FS=&quot;\t&quot;; <span class="volznak">[</span>RS=&quot;\0&quot;;<span class="volznak">]</span> r=0;} NR == 1 || NF &gt; r {r = NF} END {print r}' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx396156f"><span><a href="#zx396156f">ຢ</a></span></span>minimální počet sloupců<span class="cislo">#3 </span><sup><a href="#kapxcbef70cppc16" id="kapxcbef70cppcr16" title="Poznámka: prázdný řádek se počítá jako 0 sloupců, proto pokud ho vstup obsahuje, výsledek bude 0.">(16)</a></sup></div><div class="radky">
<div class="radekzaklinadla">gawk 'BEGIN {FS=&quot;\t&quot;; <span class="volznak">[</span>RS=&quot;\0&quot;;<span class="volznak">]</span> r=0;} NR == 1 || NF &lt; r {r = NF} END {print r}' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxfeba926"><span><a href="#zxfeba926">⢃</a></span></span>naformátovat záznamy jako tabulku s pevnou šířkou sloupců (tsv/tsvz)<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">column -nt<span class="volznak">[</span>e<span class="volznak">]</span> -s $'\t' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla"><span class="volznak">[</span>cat <i class="dopln">soubor</i><span class="tritecky"></span> |<span class="volznak">]</span> tr '\0\n' '\n<span class="viditelnamezera">&nbsp;</span>' | column -n<span class="volznak">[</span>e<span class="volznak">]</span>t -s $'\t' | tr \\n \\0</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx922051b"><span><a href="#zx922051b">⇧</a></span></span>vložit sloupec s <b>číslem záznamu</b> před první sloupec<span class="cislo">#5 </span><sup><a href="#kapxcbef70cppc17" id="kapxcbef70cppcr17" title="Poznámka: zadáte-li víc souborů, počítadlo záznamů se nebude restartovat na začátku každého z nich.">(17)</a></sup></div><div class="radky">
<div class="radekzaklinadla">gawk 'BEGIN { <span class="volznak">[</span>RS = ORS = &quot;\0&quot;;<span class="volznak">]</span> OFS = &quot;\t&quot;;} {print NR, $0}' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx1ca2b5e"><span><a href="#zx1ca2b5e">⡹</a></span></span>vložit sloupec s <b>číslem záznamu</b> před N-tý sloupec, kde N není 1<span class="cislo">#6 </span></div><div class="radky">
<div class="radekzaklinadla">gawk <span class="volznak">[</span>-v 'RS=\0'<span class="volznak">]</span> '{print gensub(/\t/, &quot;\t&quot; NR &quot;\t&quot;, <i class="dopln">N</i> - 1);}' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>

<h2 id="cast6" class="zaklinadla"><a href="#cast6"><span class="cislo">6.</span> Zaklínadla: Práce se znaky a podřetězci</a></h2>

<h3 id="cast6x1"><span><a href="#cast6x1" title="kapitola 18 (Zpracování textových souborů), sekce 6 (Zaklínadla: Práce se znaky a podřetězci), podsekce 1 (Náhrada)"><sup>6/</sup>1 Náhrada</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx6194b68"><span><a href="#zx6194b68">䷣</a></span></span>náhrada podřetězce podle regulárního výrazu<span class="cislo">#1 </span><sup><a href="#kapxcbef70cppc18" id="kapxcbef70cppcr18" title="Pro podrobnější popis syntaxe vyhledejte kapitolu Sed!">(18)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sed -<span class="volznak">[</span>z<span class="volznak">]</span>E 's/<i class="dopln">regulární výraz</i>/<i class="dopln">řetězec náhrady</i>/<span class="volznak">[</span>g<span class="volznak">]</span>' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx59b6291"><span><a href="#zx59b6291">┎</a></span></span><b>transliterace</b> (náhrada znaků podle tabulky)(obecně/příklad)<span class="cislo">#2 </span><sup><a href="#kapxcbef70cppc19" id="kapxcbef70cppcr19" title="Počet „původních“ a „náhradních“ znaků musí přesně odpovídat. Znaky „/“ a „\“ je v obou výčtech nutno odzvláštnit dalším zpětným lomítkem. Na místo znaku můžete použít i sekvenci „\0“, „\n“ apod. „Náhradní znaky“ se smí opakovat, „původní“ ne.">(19)</a></sup></div><div class="radky">
<div class="radekzaklinadla">sed -<span class="volznak">[</span>z<span class="volznak">]</span>E 'y/<i class="dopln">znak-původní</i><span class="tritecky"></span>/<i class="dopln">znak-náhradní</i>/' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">sed -E 'y/A\/B\\C/a|b|c/' test.txt</div>
</div></div>

<h3 id="cast6x2"><span><a href="#cast6x2" title="kapitola 18 (Zpracování textových souborů), sekce 6 (Zaklínadla: Práce se znaky a podřetězci), podsekce 2 (Vybrat/spojit sloupce)"><sup>6/</sup>2 Vybrat/spojit sloupce</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxdc6fe98"><span><a href="#zxdc6fe98">⧒</a></span></span>vzít určité sloupce (obecně/příklad)<span class="cislo">#1 </span><sup><a href="#kapxcbef70cppc20" id="kapxcbef70cppcr20" title="Pro složitější případy je v GNU awk funkce „substr()“ nebo zvláštní režim pro zpracování souborů s pevnou šířkou sloupců.">(20)</a></sup></div><div class="radky">
<div class="radekzaklinadla">gawk 'BEGIN{FS=OFS=&quot;&quot;}{print $<i class="dopln">číslo-sloupce</i><span class="volznak">[</span>,<i class="dopln">další-číslo-sloupce</i><span class="volznak">]</span><span class="tritecky"></span>}' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">gawk 'BEGIN{FS=OFS=&quot;&quot;}{print $3, $5, $4, $7}' &lt;&lt;&lt;'AŽČŠVŘů'<span class="prikladhodnoty">⊨ ČVŠů</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx28e422c"><span><a href="#zx28e422c">♝</a></span></span>vynechat určité sloupce<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">colrm <i class="dopln">první-vynechaný</i> <span class="volznak">[</span><i class="dopln">poslední-vynechaný</i><span class="volznak">]</span> <span class="volznak">[</span>&lt; <i class="dopln">soubor</i><span class="volznak">]</span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx7c91d44"><span><a href="#zx7c91d44">≄</a></span></span>vynechat prvních/posledních deset znaků každé řádky<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">colrm 1 10</div>
<div class="radekzaklinadla">sed -E 's/.{,10}$//'</div>
</div></div>

<h3 id="cast6x3"><span><a href="#cast6x3" title="kapitola 18 (Zpracování textových souborů), sekce 6 (Zaklínadla: Práce se znaky a podřetězci), podsekce 3 (Filtrace podle obsahu sloupců)"><sup>6/</sup>3 Filtrace podle obsahu sloupců</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx84679a1"><span><a href="#zx84679a1">⇋</a></span></span>vzít/vynechat záznamy, jejichž podřetězec na indexech M až N odpovídá <b>regulárnímu výrazu</b><span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla">gawk '<span class="volznak">[</span>BEGIN {RS=ORS=&quot;\0&quot;}<span class="volznak">]</span> substr($0, <i class="dopln">M</i>, <i class="dopln">N</i> - <i class="dopln">M</i> + 1) ~ /<i class="dopln">regulární výraz</i>/' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">gawk '<span class="volznak">[</span>BEGIN {RS=ORS=&quot;\0&quot;}<span class="volznak">]</span> substr($0, <i class="dopln">M</i>, <i class="dopln">N</i> - <i class="dopln">M</i> + 1) !~ /<i class="dopln">regulární výraz</i>/' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxaa7516f"><span><a href="#zxaa7516f">䷤</a></span></span>vzít/vynechat záznamy, jejichž podřetězec na indexech M až N obsahuje <b>podřetězec</b><span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">gawk '<span class="volznak">[</span>BEGIN {RS=ORS=&quot;\0&quot;}<span class="volznak">]</span> index(substr($0, <i class="dopln">M</i>, <i class="dopln">N</i> - <i class="dopln">M</i> + 1), &quot;<i class="dopln">podřetězec</i>&quot;)' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">gawk '<span class="volznak">[</span>BEGIN {RS=ORS=&quot;\0&quot;}<span class="volznak">]</span> !index(substr($0, <i class="dopln">M</i>, <i class="dopln">N</i> - <i class="dopln">M</i> + 1), &quot;<i class="dopln">podřetězec</i>&quot;)' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxe246020"><span><a href="#zxe246020">ⴿ</a></span></span>vzít/vynechat záznamy, jejichž podřetězec na indexech M až N je daný <b>řetězec</b><span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">gawk '<span class="volznak">[</span>BEGIN {RS=ORS=&quot;\0&quot;}<span class="volznak">]</span> substr($0, <i class="dopln">M</i>, <i class="dopln">N</i> - <i class="dopln">M</i> + 1) == &quot;<i class="dopln">řetězec</i>&quot;' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">gawk '<span class="volznak">[</span>BEGIN {RS=ORS=&quot;\0&quot;}<span class="volznak">]</span> substr($0, <i class="dopln">M</i>, <i class="dopln">N</i> - <i class="dopln">M</i> + 1) != &quot;<i class="dopln">řetězec</i>&quot;' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>

<h3 id="cast6x4"><span><a href="#cast6x4" title="kapitola 18 (Zpracování textových souborů), sekce 6 (Zaklínadla: Práce se znaky a podřetězci), podsekce 4 (Řazení)"><sup>6/</sup>4 Řazení</a></span></h3>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx23bc80b"><span><a href="#zx23bc80b">⡄</a></span></span>řadit podle znaků na indexech M až N (včetně)<span class="cislo">#1 </span></div><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>LC_ALL=C.UTF-8<span class="volznak">]</span> sort <span class="volznak">[</span><i class="dopln">další parametry</i><span class="volznak">]</span> -k 1.<i class="dopln">M</i>,1.<i class="dopln">N</i><i class="dopln">parametry-řazení</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>

<h2 id="cast7" class="zaklinadla"><a href="#cast7"><span class="cislo">7.</span> Zaklínadla: Záplatování</a></h2>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zxdb096fe"><span><a href="#zxdb096fe">⚩</a></span></span>vytvořit záplatu adresáře<span class="cislo">#1 </span><sup><a href="#kapxcbef70cppc21" id="kapxcbef70cppcr21" title="Aby záplata fungovala, označení starého a nového adresáře nesmějí obsahovat žádná lomítka, musejí to být jen holá jména podadresářů aktuálního adresáře.">(21)</a></sup></div><div class="radky">
<div class="radekzaklinadla">diff -Nar -U 3 <i class="dopln">starý-adresář</i> <i class="dopln">nový-adresář</i> &gt; <i class="dopln">soubor.pdiff</i> || test $? -eq 1</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx1b3ce7f"><span><a href="#zx1b3ce7f">┤</a></span></span>aplikovat záplatu adresáře<span class="cislo">#2 </span></div><div class="radky">
<div class="radekzaklinadla">patch -N -p 1 -d <i class="dopln">adresář</i> &lt; <i class="dopln">soubor.pdiff</i></div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx8fb3d15"><span><a href="#zx8fb3d15">⇋</a></span></span>vytvořit záplatu souboru<span class="cislo">#3 </span></div><div class="radky">
<div class="radekzaklinadla">LC_ALL=C TZ=UTC diff -Na -U 3 <i class="dopln">starý-soubor</i> <i class="dopln">nový-soubor</i> &gt; <i class="dopln">soubor.pdiff</i> || test $? -eq 1</div>
</div></div>
<div class="zaklinadlo"><div class="zahlavi"><span class="ikona D" id="zx84d8595"><span><a href="#zx84d8595">▮</a></span></span>aplikovat záplatu souboru<span class="cislo">#4 </span></div><div class="radky">
<div class="radekzaklinadla">patch -NZ<span class="volznak">[</span>t<span class="volznak">]</span> <i class="dopln">cílový-soubor</i> <i class="dopln">soubor.pdiff</i></div>
</div></div>

<h2 id="cast8"><a href="#cast8"><span class="cislo">8.</span> Parametry příkazů</a></h2>

<h3 id="cast8x1"><span><a href="#cast8x1" title="kapitola 18 (Zpracování textových souborů), sekce 8 (Parametry příkazů), podsekce 1 (cut)"><sup>8/</sup>1 cut</a></span></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">cut <i class="dopln">parametry</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<table class="parametryprikazu"><tbody><tr><td>☐ -d <i class="dopln">oddělovač</i></td><td>Nastaví oddělovač sloupců pro parametr -f; výchozí je &quot;\t&quot;, což znamená tabulátor. Používejte pouze znaky ASCII.</td></tr>

<tr><td>○ -f <i class="dopln">sloupce</i> ○ -b <i class="dopln">bajty</i></td><td>Definuje množinu sloupců či bajtů každého záznamu, které mají být propuštěny. Pozor, pořadí ani duplicity nemají vliv na výstup! Příklad specifikace: „7,13-15,-3,20-“</td></tr>

<tr><td>☐ --complement</td><td>Neguje definovanou množinu – vybrané sloupce či bajty vypustí a vezme zbytek.</td></tr>

<tr><td>☐ -z</td><td>Ukončovač záznamu je \0 místo \n.</td></tr>

</tbody></table>

<h3 id="cast8x2"><span><a href="#cast8x2" title="kapitola 18 (Zpracování textových souborů), sekce 8 (Parametry příkazů), podsekce 2 (join)"><sup>8/</sup>2 join</a></span></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>LC_ALL=C.UTF-8<span class="volznak">]</span> join <i class="dopln">parametry</i> <i class="dopln">soubor1</i> <i class="dopln">soubor2</i></div>
</div></div>
<table class="parametryprikazu"><tbody><tr><td>○ -1 <i class="dopln">sloupec</i> -2 <i class="dopln">sloupec</i> ○ -j <i class="dopln">sloupec-pro-oba</i></td><td>Určuje společný sloupec ve vstupních souborech.</td></tr>

<tr><td>☐ -t <i class="dopln">znak</i></td><td>Definuje oddělovač sloupců. Prázdný argument značí, že se soubory na sloupce nedělí.</td></tr>

<tr><td>○ -a <i class="dopln">1-nebo-2</i> ○ -v <i class="dopln">1-nebo-2</i></td><td>Dovolí vypsání nespárovaných záznamů ze souboru 1 nebo 2. Varianta „-v“ navíc potlačí vypsání spárovaných záznamů.</td></tr>

<tr><td>☐ -o <i class="dopln">formát</i></td><td>Definuje pořadí sloupců na výstupu. Jednotlivé specifikace mohou mít tvar „0“ (společný sloupec), „1.<i class="dopln">číslo</i>“ pro sloupec prvního souboru nebo „2.<i class="dopln">číslo</i>“ pro sloupec druhého souboru. Specifikace se oddělují čárkami nebo mezerami. Příklad specifikace: „0,1.1,1.2,2.1,2.2,0“.</td></tr>

<tr><td>☐ -z</td><td>Ukončovač záznamu je \0 místo \n.</td></tr>

<tr><td>○ --check-order ○ --nocheck-order</td><td>Zapne, resp. vypne kontrolu uspořádání vstupního souboru.</td></tr>

</tbody></table>

<h3 id="cast8x3"><span><a href="#cast8x3" title="kapitola 18 (Zpracování textových souborů), sekce 8 (Parametry příkazů), podsekce 3 (paste)"><sup>8/</sup>3 paste</a></span></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">paste <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<table class="parametryprikazu"><tbody><tr><td>☐ -d <i class="dopln">oddělovače</i></td><td>Definuje znaky vkládané v místech spojení záznamů. Je-li předaný řetězec prázdný, použijí se prázdné řetězce, jinak se budou cyklicky používat jednotlivé znaky ze zadaného řetězce.</td></tr>

<tr><td>☐ -z</td><td>Ukončovač záznamu je \0 místo \n.</td></tr>

<tr><td>☐ -s</td><td>Ukončovače záznamu kromě posledního interpretuje jako oddělovače sloupců, tím pádem spojí všechny záznamy do jednoho.</td></tr>

</tbody></table>

<h3 id="cast8x4"><span><a href="#cast8x4" title="kapitola 18 (Zpracování textových souborů), sekce 8 (Parametry příkazů), podsekce 4 (sed)"><sup>8/</sup>4 sed</a></span></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">sed <span class="volznak">[</span><i class="dopln">parametry-kromě-e-či-f</i><span class="volznak">]</span> <i class="dopln">skript-sedu</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla">sed <i class="dopln">parametry-včetně-e-či-f</i> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<table class="parametryprikazu"><tbody><tr><td>☐ -E</td><td>Použije rozšířené regulární výrazy místo základních (doporučuji vždy, když skript obsahuje regulární výraz).</td></tr>

<tr><td>☐ -n</td><td>Potlačí automatické vypsání „pracovní paměti“ po každém cyklu skriptu.</td></tr>

<tr><td>☐ -z</td><td>Ukončovač záznamu je \0 místo \n.</td></tr>

<tr><td>○ -e <i class="dopln">skript-sedu</i> ○ -f <i class="dopln">soubor</i></td><td>Načte skript z parametru, resp. ze souboru; oba parametry lze kombinovat či použít opakovaně.</td></tr>

<tr><td>☐ -u</td><td>Načítá jen nezbytný počet bajtů a vypisuje na výstup co nejdřív.</td></tr>

</tbody></table>

<h3 id="cast8x5"><span><a href="#cast8x5" title="kapitola 18 (Zpracování textových souborů), sekce 8 (Parametry příkazů), podsekce 5 (sort)"><sup>8/</sup>5 sort</a></span></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla"><span class="volznak">[</span>LC_ALL=C.UTF-8<span class="volznak">]</span> sort <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span> <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<table class="parametryprikazu"><tbody><tr><td>☐ -u</td><td>Po seřazení vyloučí duplicity (z každé skupiny duplicitních řádků ponechá pouze jeden).</td></tr>

<tr><td>○ -c ○ -C</td><td>Neřadí; jen zkontroluje, zda je vstup seřazený. Varianta „-c“ navíc vypíše první chybně seřazený řádek.</td></tr>

<tr><td>☐ -k <i class="dopln">definice-řadicího-klíče</i><i class="dopln">druh-a-příznaky-řazení</i></td><td>Definuje řadicí klíč, podle kterého se má řadit. Podrobněji – viz manuálová stránka příkazu <i>sort</i>.</td></tr>

<tr><td>☐ -t <i class="dopln">oddělovač</i></td><td>Definuje oddělovač polí při řazení podle klíčů.</td></tr>

<tr><td>☐ -m</td><td>Místo řazení pouze slučuje již seřazené soubory do jednoho.</td></tr>

<tr><td>☐ -s</td><td>Stabilní řazení. Zachová relativní pořadí řádků, jejichž všechny řadicí klíče se rovnají.</td></tr>

<tr><td>○ -<i class="dopln">druh-řazení</i></td><td>Přepne na jiný druh řazení než obyčejné řetězcové.</td></tr>

<tr><td>☐ -<i class="dopln">příznak-řazení</i></td><td>Nastaví příslušný příznak ovlivňující řazení.</td></tr>

</tbody></table>
<p class="ponadpisu">
Druhy řazení jsou: g, h, M, n, R, V. Za zmínku z nich stojí jen „n“ – řazení podle číselné hodnoty (včetně případných desetinných míst) a „h“ – totéž, ale s rozpoznáváním přípon K (kilo), M (mega) atd.
</p><p>
Příznaky řazení jsou tyto:
</p>
<table class="parametryprikazu"><tbody><tr><td>r</td><td>Řadit sestupně (normálně se řadí vzestupně).</td></tr>

<tr><td>f</td><td>Nerozlišovat velká a malá písmena.</td></tr>

<tr><td>d</td><td>„Řazení jako ve slovníku“ – zohledňovat jen písmena, čísla a bílé znaky.</td></tr>

<tr><td>b</td><td>Ignorovat bílé znaky na začátku klíče (při řazení podle číselné hodnoty se ignorují vždy).</td></tr>

<tr><td>i</td><td>Ignorovat netisknutelné znaky.</td></tr>

</tbody></table>

<h2 id="cast9"><a href="#cast9"><span class="cislo">9.</span> Instalace na Ubuntu</a></h2>
<p class="ponadpisu">
Všechny použité nástroje jsou základními součástmi Ubuntu, s výjimkou gawk, které, pokud je potřebujete, je nutno doinstalovat:
</p>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">sudo apt-get install gawk</div>
</div></div>

<h2 id="cast10"><a href="#cast10"><span class="cislo">10.</span> Tipy a zkušenosti</a></h2>
<ul><li>Nastavení „LC_ALL=C“ zapíná řazení po bajtech podle jejich číselné hodnoty. Je rychlé, spolehlivé a dokonale přenositelné, nejde však o řazení pro člověka.
</li><li>Pozor, „sort -k 2“ znamená řadit podle sloupců 2, 3, 4 atd. až do konce; řazení podle sloupce číslo 2 je „sort -k 2,2“!
</li><li>Řazení podle klíčů může být pro začátečníka záludné. Doporučuji zvolený klíč nejprve otestovat na krátkém vstupním souboru s parametrem „--debug“.
</li></ul>
<h2 id="cast11"><a href="#cast11"><span class="cislo">11.</span> Další zdroje informací</a></h2>
<p class="ponadpisu">
Nejlepším zdrojem podrobnějších informací o jednotlivých použitých příkazech (s výjimkou příkazu „column“) jsou jejich manuálové stránky.
</p>
<ul class="kompaktni"><li><a href="https://cs.wikipedia.org/wiki/Paste">Wikipedie: paste</a>
</li><li><a href="https://www.computerhope.com/unix/usort.htm">Compute Hope o příkazu sort</a> (anglicky)
</li><li><a href="https://www.howtoforge.com/linux-column-command/">Linux column Command Tutorial for Beginners</a> (anglicky)
</li><li><a href="https://www.howtoforge.com/tutorial/linux-join-command/">Linux Join Command Tutorial for Beginners</a> (anglicky)
</li><li><a href="http://manpages.ubuntu.com/manpages/focal/en/man1/cut.1.html">man 1 cut</a> (anglicky)
</li><li><a href="http://manpages.ubuntu.com/manpages/focal/en/man1/join.1.html">man 1 join</a> (anglicky)
</li><li><a href="http://manpages.ubuntu.com/manpages/focal/en/man1/paste.1.html">man 1 paste</a> (anglicky)
</li><li><a href="http://manpages.ubuntu.com/manpages/focal/en/man1/sort.1.html">man 1 sort</a> (anglicky)
</li><li><a href="https://packages.ubuntu.com/focal/coreutils">Balíček coreutils</a> (anglicky)
</li><li><a href="https://www.youtube.com/watch?v=TygQo1m_sZo">Video: Joining files and together with join</a> (anglicky)
</li><li><a href="https://github.com/tldr-pages/tldr/blob/master/pages/common/cut.md">TL;DR cut</a> (anglicky)
</li><li><a href="https://github.com/tldr-pages/tldr/blob/master/pages/common/join.md">TL;DR join</a> (anglicky)
</li><li><a href="https://github.com/tldr-pages/tldr/blob/master/pages/common/paste.md">TL;DR paste</a> (anglicky)
</li><li><a href="https://github.com/tldr-pages/tldr/blob/master/pages/common/sed.md">TL;DR sed</a> (anglicky)
</li><li><a href="https://github.com/tldr-pages/tldr/blob/master/pages/common/shuf.md">TL;DR shuf</a> (anglicky)
</li><li><a href="https://github.com/tldr-pages/tldr/blob/master/pages/common/sort.md">TL;DR sort</a> (anglicky)
</li></ul>
<h2 id="cast12"><a href="#cast12"><span class="cislo">12.</span> Zákulisí kapitoly</a></h2>
<p class="ponadpisu">
V této verzi kapitoly chybí:
</p>
<ul class="kompaktni"><li>zpracování formátů CSV a PSV
</li></ul><p class="ponadpisu">
Tato kapitola záměrně nepokrývá:
</p>
<ul class="kompaktni"><li>zpracování textových formátů se složitější strukturou jako např. JSON či XML
</li></ul><div class="ppc"><div id="kapxcbef70cppc1"><a href="#kapxcbef70cppcr1" class="cislopozn">1</a>&nbsp;Užitečná kódování: ISO8859-2, WINDOWS-1250, UTF-16, UTF-16BE, UTF-16LE, UTF-8, CP852 (MS-DOS), MAC-CENTRALEUROPE.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc2"><a href="#kapxcbef70cppcr2" class="cislopozn">2</a>&nbsp;Užitečná kódování: ISO8859-2, WINDOWS-1250, UTF-16, UTF-16BE, UTF-16LE, UTF-8, CP852 (MS-DOS), MAC-CENTRALEUROPE.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc3"><a href="#kapxcbef70cppcr3" class="cislopozn">3</a>&nbsp;Poznámka: tato konverze je ztrátová, a tudíž prakticky jednosměrná.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc4"><a href="#kapxcbef70cppcr4" class="cislopozn">4</a>&nbsp;Tip: přibližně může pomoci příkaz „file“ nebo autodetekce kódování při otevření textového souboru ve Firefoxu.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc5"><a href="#kapxcbef70cppcr5" class="cislopozn">5</a>&nbsp;Výchozí hodnota textu záznamu je „y“.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc6"><a href="#kapxcbef70cppcr6" class="cislopozn">6</a>&nbsp;Poznámka: V hledaném podřetězci se nesmí vyskytovat znak \n, a to ani u formátu txtz, protože fgrep tento znak používá k oddělení více různých hledaných podřetězců. Pokud váš podřetězec tento znak obsahuje, existuje několik řešení, nejjednodušším je pomocí příkazu „tr“ na vstupu i výstupu příkazu fgrep prohodit znak \n s jiným ASCII znakem, který se v hledaném podřetězci nevyskytuje.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc7"><a href="#kapxcbef70cppcr7" class="cislopozn">7</a>&nbsp;Tip: nejlepšího výkonu této varianty dosáhnete tak, že začnete od nejmenšího vstupního souboru.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc8"><a href="#kapxcbef70cppcr8" class="cislopozn">8</a>&nbsp;Standardní vstup můžete mezi soubory vřadit parametrem „-“ místo názvu souboru. Neprázdné soubory musejí být řádně ukončeny ukončovačem záznamu, jinak se poslední záznam spojí s prvním záznamem následujícího souboru.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc9"><a href="#kapxcbef70cppcr9" class="cislopozn">9</a>&nbsp;Přípona výstupních souborů nesmí obsahovat oddělovač adresářů „/“. Číslování výstupních souborů začíná od nuly; jinou hodnotu lze nastavit, když místo parametru -d použijete parametr --numeric-suffixes=číslo. Uvedený příklad rozdělí soubor „vse.txt“ po sto řádcích na soubory „rozdelene-zaznamy/s00000dil.txt“, „rozdelene-zaznamy/s00001dil.txt“ atd.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc10"><a href="#kapxcbef70cppcr10" class="cislopozn">10</a>&nbsp;Příkaz „sed“ vyžaduje v příponě i předponě další úroveň odzvláštnění znaků „\“ a „\n“. Proto v uvedeném případě zadávejte zpětné lomítko jako „\\\\“ a konec řádky jako „\\\n“. Konec řádky se navíc může vyskytnout pouze při použití formátu txtz, u formátu txt pravděpodobně nebude fungovat správně.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc11"><a href="#kapxcbef70cppcr11" class="cislopozn">11</a>&nbsp;Uvedené varianty se liší požadavky na odzvláštnění v příponě: v první variantě sed požaduje dodatečné odzvláštění znaků „\“ a (případně) konce řádku; v druhé variantě požaduje sed odzvláštnění znaků „\“, „/“ a „&amp;“.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc12"><a href="#kapxcbef70cppcr12" class="cislopozn">12</a>&nbsp;Běžně se k tomu používá příkaz „fmt“, ale ten nerespektuje vícebajtové znaky, takže pro texty v UTF-8 funguje nekorektně.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc13"><a href="#kapxcbef70cppcr13" class="cislopozn">13</a>&nbsp;Specifikace sloupců specifikuje množinu (tzn. ne výčet) sloupců. Má tvar jednotlivých čísel oddělených čárkami, např. „7,3,2,5,2“ vypíše sloupce 2, 3, 5 a 7. Místo jednotlivého čísla lze zadat rozsah ve tvaru „číslo-číslo“, „číslo-“ nebo „-číslo“, který se rozvine na všechny odpovídající sloupce, takže např. specifikace „7,3-5,-4“ odpovídá sloupcům 1, 2, 3, 4, 5 a 7.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc14"><a href="#kapxcbef70cppcr14" class="cislopozn">14</a>&nbsp;Pro čtení ze standarního vstupu zadejte místo souboru „-“.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc15"><a href="#kapxcbef70cppcr15" class="cislopozn">15</a>&nbsp;Chování příkazu „join“ je smysluplné, ale poměrně komplikované. Před použitím tohoto zaklínadla prosím nastudujte manuálovou stránku příkazu join!</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc16"><a href="#kapxcbef70cppcr16" class="cislopozn">16</a>&nbsp;Poznámka: prázdný řádek se počítá jako 0 sloupců, proto pokud ho vstup obsahuje, výsledek bude 0.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc17"><a href="#kapxcbef70cppcr17" class="cislopozn">17</a>&nbsp;Poznámka: zadáte-li víc souborů, počítadlo záznamů se nebude restartovat na začátku každého z nich.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc18"><a href="#kapxcbef70cppcr18" class="cislopozn">18</a>&nbsp;Pro podrobnější popis syntaxe vyhledejte kapitolu Sed!</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc19"><a href="#kapxcbef70cppcr19" class="cislopozn">19</a>&nbsp;Počet „původních“ a „náhradních“ znaků musí přesně odpovídat. Znaky „/“ a „\“ je v obou výčtech nutno odzvláštnit dalším zpětným lomítkem. Na místo znaku můžete použít i sekvenci „\0“, „\n“ apod. „Náhradní znaky“ se smí opakovat, „původní“ ne.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc20"><a href="#kapxcbef70cppcr20" class="cislopozn">20</a>&nbsp;Pro složitější případy je v GNU awk funkce „substr()“ nebo zvláštní režim pro zpracování souborů s pevnou šířkou sloupců.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapxcbef70cppc21"><a href="#kapxcbef70cppcr21" class="cislopozn">21</a>&nbsp;Aby záplata fungovala, označení starého a nového adresáře nesmějí obsahovat žádná lomítka, musejí to být jen holá jména podadresářů aktuálního adresáře.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
</div>


<nav class="spodni">
<a href="index.htm" class="naindex">🗐&nbsp;Přehled&nbsp;kapitol</a>
<div class="naslkap">
<a href="zpracovani-videa-a-zvuku.htm" rel="next" title="19. Zpracování videa a zvuku">Následující&nbsp;kapitola/dodatek:<br><span class="cislo">19</span>
<span class="nazev">Zpracování videa a zvuku</span></a>
</div>
<!--<div><a href="index.htm">🗐&nbsp;Přehled&nbsp;kapitol</a></div>-->
</nav>


<div class="odkazydole"><div><a href="metaprikazy.htm"><img src="obrazky/ik/metaprikazy.png" alt="" width="32" height="32">Metapříkazy</a><a href="zpracovani-videa-a-zvuku.htm"><img src="obrazky/ik/zpracovani-videa-a-zvuku.png" alt="" width="32" height="32">Zpracování videa a zvuku</a><a href="system.htm"><img src="obrazky/ik/system.png" alt="" width="32" height="32">Systém</a></div></div>
<div class="reklamnipata">Líbí se vám tento projekt a chcete, aby byl ještě lepší? Můžete mi s tím pomoci. Zmiňte se o něm technicky zdatným přátelům, opravte překlepy a nahlašte nefunkční zaklínadla, aby mohla být opravena; poskytněte mi zpětnou vazbu nebo se zapojte do vývoje nových kapitol. Další informace na GitHubu v dokumentu <a href="https://github.com/singularis-mzf/linux-spellbook/blob/v%C3%BDvojov%C3%A1/JAK-SE-ZAPOJIT.md">Jak se zapojit</a>.</div>

</article>
<!-- *** -->
<footer id="dole">
<img src="obrazky/by-sa.png" width="88" height="31" alt="[BY-SA]">
<p>Veškerý obsah této stránky (text, obrázky, zdrojový kód) je možno upravovat a šířit pod podmínkami licence
<a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a>.
Upozorňuji, že uvedená licence vyžaduje uvedení seznamu autorů, licence a zdroje a poskytnutí stejné
či kompatibilní licence k provedeným změnám, jsou-li nějaké. Příslušné údaje jsou dostupné
na stránce „<a href="x-autori.htm">Přehled autorů</a>“.
Šíření obsahu bez těchto údajů nebo šíření upravené verze bez poskytnutí adekvátní
licence k provedeným úpravám je pravděpodobně porušení licenčních podmínek a může být postihováno.
Poskytování zdrojového kódu při šíření není touto licencí vyžadováno.</p><p>Pro nové verze, další informace, aktuální zdrojový kód
a možnost se zapojit do projektu „Linux: Kniha kouzel“ navštivte jeho
<a href="https://github.com/singularis-mzf/linux-spellbook">repozitář na GitHubu</a>.
</footer>
</div>

<nav class="menu">
<!-- MENU OSNOVA -->
<a href="#menuosnova" id="menuosnova"><span class="prvnipismeno">O</span>snova</a>
<aside class="menuosnova">
<div><div class="nadpis">Osnova</div><div class="polozky">
<a href="#cast1" class="sekce">1 Úvod</a>
<a href="#cast2" class="sekce">2 Definice</a>
<a href="#cast3" class="sekce">3 Zaklínadla: Konverze</a>
<a href="#cast3x1" class="podsekce">/1 Konverze ukončení řádky</a>
<a href="#cast3x2" class="podsekce">/2 Konverze kódování znaků</a>
<a href="#cast3x3" class="podsekce">/3 Konverze velikosti písmen</a>
<a href="#cast4" class="sekce">4 Zaklínadla: Práce se záznamy</a>
<a href="#cast4x1" class="podsekce">/1 Vytvoření a smazání</a>
<a href="#cast4x2" class="podsekce">/2 Filtrace záznamů podle pořadí</a>
<a href="#cast4x3" class="podsekce">/3 Filtrace záznamů podle obsahu</a>
<a href="#cast4x4" class="podsekce">/4 Filtrace záznamů podle počtu výskytů</a>
<a href="#cast4x5" class="podsekce">/5 Řazení a přeskládání záznamů</a>
<a href="#cast4x6" class="podsekce">/6 Množinové operace (nad seřazenými záznamy)</a>
<a href="#cast4x7" class="podsekce">/7 Ostatní</a>
<a href="#cast5" class="sekce">5 Zaklínadla: Práce se sloupci (TSV, TSVZ)</a>
<a href="#cast5x1" class="podsekce">/1 Vybrat/spojit sloupce</a>
<a href="#cast5x2" class="podsekce">/2 Filtrace podle obsahu sloupců</a>
<a href="#cast5x3" class="podsekce">/3 Řazení záznamů podle obsahu sloupců</a>
<a href="#cast5x4" class="podsekce">/4 Ostatní</a>
<a href="#cast6" class="sekce">6 Zaklínadla: Práce se znaky a podřetězci</a>
<a href="#cast6x1" class="podsekce">/1 Náhrada</a>
<a href="#cast6x2" class="podsekce">/2 Vybrat/spojit sloupce</a>
<a href="#cast6x3" class="podsekce">/3 Filtrace podle obsahu sloupců</a>
<a href="#cast6x4" class="podsekce">/4 Řazení</a>
<a href="#cast7" class="sekce">7 Zaklínadla: Záplatování</a>
<a href="#cast8" class="sekce">8 Parametry příkazů</a>
<a href="#cast8x1" class="podsekce">/1 cut</a>
<a href="#cast8x2" class="podsekce">/2 join</a>
<a href="#cast8x3" class="podsekce">/3 paste</a>
<a href="#cast8x4" class="podsekce">/4 sed</a>
<a href="#cast8x5" class="podsekce">/5 sort</a>
<a href="#cast9" class="sekce">9 Instalace na Ubuntu</a>
<a href="#cast10" class="sekce">10 Tipy a zkušenosti</a>
<a href="#cast11" class="sekce">11 Další zdroje informací</a>
<a href="#cast12" class="sekce">12 Zákulisí kapitoly</a>
</div></div>
<a href="#zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
<!-- MENU KAPITOLY -->
<a href="#menukapitoly" id="menukapitoly"><span class="prvnipismeno">K</span>apitoly</a>
<aside class="menukapitoly">
<div><div class="nadpis">Kapitoly</div><div class="polozky">
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/predmluva.png" alt="[]"></span><span class="fragodkazy"><a href="predmluva.htm" class="odkaz"><span><span class="cislo">1</span>Předmluva</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/zakladni-znalosti.png" alt="[]"></span><span class="fragodkazy"><a href="zakladni-znalosti.htm" class="odkaz"><span><span class="cislo">2</span>Základní znalosti</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/diskove-oddily.png" alt="[]"></span><span class="fragodkazy"><a href="diskove-oddily.htm" class="odkaz"><span><span class="cislo">3</span>Diskové oddíly</span></a><span class="podkpodkazy"><a href="diskove-oddily-btrfs.htm" class="odkaz"><span><span class="cislo">4</span>Btrfs</span></a><a href="diskove-oddily-lvm.htm" class="odkaz"><span><span class="cislo">5</span>LVM</span></a><a href="diskove-oddily-softwarovy-raid.htm" class="odkaz"><span><span class="cislo">6</span>Softwarový RAID</span></a></span></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/git.png" alt="[]"></span><span class="fragodkazy"><a href="git.htm" class="odkaz"><span><span class="cislo">7</span>Git</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/hledani-souboru.png" alt="[]"></span><span class="fragodkazy"><a href="hledani-souboru.htm" class="odkaz"><span><span class="cislo">8</span>Hledání souborů</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/metaprikazy.png" alt="[]"></span><span class="fragodkazy"><a href="metaprikazy.htm" class="odkaz"><span><span class="cislo">9</span>Metapříkazy</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/nabidka-aplikaci.png" alt="[]"></span><span class="fragodkazy"><a href="nabidka-aplikaci.htm" class="odkaz"><span><span class="cislo">10</span>Nabídka aplikací</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/odkazy.png" alt="[]"></span><span class="fragodkazy"><a href="odkazy.htm" class="odkaz"><span><span class="cislo">11</span>Pevné a symbolické odkazy</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/perl-zaklady.png" alt="[]"></span><span class="fragodkazy"><a href="perl-zaklady.htm" class="odkaz"><span><span class="cislo">12</span>Perl: základy</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/prace-s-archivy.png" alt="[]"></span><span class="fragodkazy"><a href="prace-s-archivy.htm" class="odkaz"><span><span class="cislo">13</span>Práce s archivy</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/regularni-vyrazy.png" alt="[]"></span><span class="fragodkazy"><a href="regularni-vyrazy.htm" class="odkaz"><span><span class="cislo">14</span>Regulární výrazy</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/sprava-balicku.png" alt="[]"></span><span class="fragodkazy"><a href="sprava-balicku.htm" class="odkaz"><span><span class="cislo">15</span>Správa balíčků</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/sprava-uzivatelskych-uctu.png" alt="[]"></span><span class="fragodkazy"><a href="sprava-uzivatelskych-uctu.htm" class="odkaz"><span><span class="cislo">16</span>Správa uživatelských účtů</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/system.png" alt="[]"></span><span class="fragodkazy"><a href="system.htm" class="odkaz"><span><span class="cislo">17</span>Systém</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/zpracovani-textovych-souboru.png" alt="[]"></span><span class="fragodkazy"><a href="zpracovani-textovych-souboru.htm" class="odkaz"><span><span class="cislo">18</span>Zpracování textových souborů</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/zpracovani-videa-a-zvuku.png" alt="[]"></span><span class="fragodkazy"><a href="zpracovani-videa-a-zvuku.htm" class="odkaz"><span><span class="cislo">19</span>Zpracování videa a zvuku</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/koncepce-projektu.png" alt="[]"></span><span class="fragodkazy"><a href="koncepce-projektu.htm" class="odkaz"><span><span class="cislo">20</span>Koncepce projektu Linux: Kniha kouzel</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/plan-vyvoje.png" alt="[]"></span><span class="fragodkazy"><a href="plan-vyvoje.htm" class="odkaz"><span><span class="cislo">21</span>Plán budoucího vývoje</span></a></span></div>
<div class="fragodkaz"><span class="ikona"><img src="obrazky/ik/licence.png" alt="[]"></span><span class="fragodkazy"><a href="licence.htm" class="odkaz"><span><span class="cislo">22</span>Licence</span></a></span></div>
<div class="premiove"><strong>Prémiové kapitoly:</strong>
<div>AWK</div>
<div>Datum, čas a kalendář</div>
<div>Make</div>
<div>Manuálové stránky</div>
<div>Markdown</div>
<div>Perl: moduly a objekty</div>
<div>Proměnné prostředí a interpretu</div>
<div>Sed</div>
<div>Soubory a adresáře</div>
<div>Správa procesů</div>
<div>Stahování videí</div>
<div>Terminál</div>
<div>Terminál / Emodži</div>
<div>Vim</div>
<div>Zpracování binárních souborů</div>
</div><p>Tyto kapitoly můžete získat jako odměnu za překlad ze zdrojového kódu. Podrobnější informace <a href="https://github.com/singularis-mzf/linux-spellbook/blob/stabiln%C3%AD/dokumentace/odm%C4%9Bna-za-sestaven%C3%AD.md">na GitHubu</a>.</p>
</div></div>
<a href="#zavritmenu" id="zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
<!-- MENU ŠTÍTKY -->
<a href="#menustitky" id="menustitky"><span class="prvnipismeno">Š</span>títky</a>
<aside class="menustitky">
<div><div class="nadpis">Štítky</div><div class="polozky">
<a href="x-stitky.htm#x5208bbb">adresáře&nbsp;&nbsp;(2)</a>
<a href="x-stitky.htm#xb0a5782">aplikace&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x583f72a">apt&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#xd574d4b">bash&nbsp;&nbsp;(2)</a>
<a href="x-stitky.htm#xcd6caf8">démoni&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#xb05338c">Flatpak&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x1e3042b">GUI&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x4e36c04">hledání&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x3c8789a">klávesnice&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#xa473827">komprese&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x79108ba">LVM&nbsp;&nbsp;(2)</a>
<a href="x-stitky.htm#x2d47ed4">odkládací prostor&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x0114ad0">Perl&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#xa9c449d">program&nbsp;&nbsp;(2)</a>
<a href="x-stitky.htm#xc65388d">programování&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x43a526a">přístupová práva&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#xcf91513">RAID&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x5c5f44a">ramdisk&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x9ad09a9">Snap&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x23be896">soubory&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x12e55d8">správa verzí&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x9dcbb0b">syntaxe&nbsp;&nbsp;(3)</a>
<a href="x-stitky.htm#xba98a3b">systém&nbsp;&nbsp;(7)</a>
<a href="x-stitky.htm#x3972255">systém souborů&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x3c01147">tematický okruh&nbsp;&nbsp;(14)</a>
<a href="x-stitky.htm#x421b47f">video&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#xadcdbd7">zip&nbsp;&nbsp;(1)</a>
<a href="x-stitky.htm#x908961b">zpracování textu&nbsp;&nbsp;(3)</a>
<a href="x-stitky.htm#x04b5cff">zvuk&nbsp;&nbsp;(1)</a>
</div></div>
<a href="#zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
<!-- MENU NÁPOVĚDA -->
<a href="#menunapoveda" id="menunapoveda"><span class="prvnipismeno">N</span>ápověda</a>
<aside class="menunapoveda">
<div><div class="nadpis">Nápověda</div><div class="polozky">
<a href="predmluva.htm">Předmluva</a>
<a href="koncepce-projektu.htm">Koncepce projektu Linux: Kniha kouzel</a>
<a href="https://singularis-mzf.github.io/">Ostatní verze knihy</a>
<a href="https://github.com/singularis-mzf/linux-spellbook">Repozitář na GitHubu</a>
<a href="https://github.com/singularis-mzf/linux-spellbook/blob/stabiln%C3%AD/dokumentace/odm%C4%9Bna-za-sestaven%C3%AD.md">Odměna za sestavení (prémiové kapitoly)</a>
</div></div>
<a href="#zavritmenu" class="zavritmenu">Zavřít&nbsp;menu</a>
</aside>
</nav>

<a href="#nahore" id="odkaznahoru" title="NAHORU − na začátek stránky">▴<!--⤒--></a>
<a href="#dole" id="odkazdolu" title="DOLŮ − na konec stránky">▾<!--⤓--></a>

</div>
</body>
</html>
