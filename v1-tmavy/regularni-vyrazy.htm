<!doctype html>
<html lang="cs">
<head profile="http://www.w3.org/2005/10/profile">
<meta charset="UTF-8">

<title>Regulární výrazy − Linux: Kniha kouzel</title>

<link rel="stylesheet" type="text/css" href="lkk-20200222.css">
<link rel="alternate stylesheet" type="text/css" href="lkk-20200222-vk-svetly.css" title="Vysoký kontrast: světlá varianta">
<link rel="alternate stylesheet" type="text/css" href="lkk-20200222-vk-tmavy.css" title="Vysoký kontrast: tmavá varianta">
<link rel="alternate stylesheet" type="text/css" href="lkk-20200222-tmavy.css" title="Tmavý motiv">
<link rel="icon" type="image/png" href="obrazky/favicon.png">
</head>
<body id="nahore">
<header>
<span class="left"><a href="index.htm"><img src="obrazky/favicon.png" width="16" height="16" alt=""></a> Linux: Kniha kouzel, vanilková příchuť 1.4 (22. února 2020)</span>
<span class="right"><span class="ico1"></span><span class="ico2"></span><span class="ico3"></span></span>
</header>


<nav class="horni">
<div class="slogan">Veškerá moc příkazové řádky/příkazového řádku přehledně, pro začátečníky i&nbsp;pokročilé</div>
<span class="prev">
<a href="prace-s-archivy.htm" rel="prev" title="10. Práce s archivy" accesskey="p">Předchozí&nbsp;kapitola</a>&nbsp;|
</span><a href="index.htm" accesskey="i">Přehled</a><span class="next"><!--
-->&nbsp;| <a href="sprava-balicku.htm" rel="next" title="12. Správa balíčků" accesskey="n">Následující&nbsp;kapitola</a>
</span>
</nav>


<article>

<h1 class="kapitola">11. <img src="obrazky/ik/regularni-vyrazy.png" alt="" width="64" height="64"> Regulární výrazy</h1>
<div class="stitky"><a href="x-stitky.htm#ssyntxe">syntaxe</a>
<a href="x-stitky.htm#szprcovntextu">zpracování textu</a>
</div><div class="rozcestnikkapitol">
<a href="#cast1" class="sekce">Úvod</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast2" class="sekce">Definice</a><br>
<a href="#cast3" class="sekce">Zaklínadla</a>: <a href="#cast3x1">Jednotlivé znaky</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast3x2">Kvantifikátory (operátory opakování)</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast3x3">Operátor „nebo“</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast3x4">Kotvy a hranice (pozice)</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast3x5">Seskupení</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast3x6">Paměť (omezená podpora)</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast3x7">Vyhlížení (jen Perl)</a><br>
<a href="#cast4" class="sekce">Parametry příkazů</a>: <a href="#cast4x1">bash</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast4x2">egrep</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast4x3">gawk</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast4x4">perl</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast4x5">sed</a><br>
<a href="#cast5" class="sekce">Instalace na Ubuntu</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast6" class="sekce">Tipy a zkušenosti</a><span class="oddelovac">&nbsp;|</span>
<a href="#cast7" class="sekce">Další zdroje informací</a></div>
<h2><a href="#cast1" id="cast1"><span class="cislo">1.</span> Úvod</a></h2>
<p class="ponadpisu">
Regulární výrazy představují velmi silný nástroj k vyhledávání, analýze,
filtrování, kontrole syntaxe, extrakci a transformaci textů a textových dat.
Slouží k formálnímu popisu (obvykle nekonečné) množiny řetězců a následné
vyhledávání řetězců z této množiny v textu. S takto vyhledanými řetězci
(tzv. výskyty či shodami) můžeme dále pracovat.
</p><p>
Regulární výrazy se objevují se ve většině programovacích jazyků,
ale také v textových editorech či manuálním nastavení e-mailových filtrů.
</p><p>
V Linuxu se bohužel vyskytují tři různé syntaxe regulárních výrazů − základní
regulární výrazy, rozšířené regulární výrazy a regulární výrazy jazyka Perl.
Z praktických důvodů považuji za nejdůležitější rozšířené regulární výrazy,
a proto kdykoliv napíšu „regulární výraz“ bez dalšího upřesnění, mám na mysli
rozšířený regulární výraz. Kde se od sebe syntaxe liší, bude to u zaklínadel
upřesněno; kde není uvedena samostatná varianta pro Perl, platí pro Perl
varianta pro rozšířený regulární výraz.
</p>

<h2><a href="#cast2" id="cast2"><span class="cislo">2.</span> Definice</a></h2>
<ul><li>Řetězec se <b>shoduje</b> s daným regulárním výrazem, pokud patří do množiny řetězců, kterou regulární výraz definuje, tedy pokud odpovídá požadavkům regulárního výrazu jako celek, od začátku do konce. Např. s regulárním výrazem „a.c“ se shoduje řetězec „abc“, protože „a“ v regulárním výrazu přijímá „a“ z řetězce; tečka z regulárního výrazu přijímá jakýkoliv znak, tedy i „b“ v řetězci a „c“ v regulárním výrazu přijme „c“ z řetězce. S tímtéž regulárním výrazem se už ale neshodují řetězce „Abc“ (pokud nevypnete rozlišování velkých a malých písmen), „abb“, „abbc“ či „abcc“ (protože k poslednímu „c“ už v regulárním výrazu není nic, co by ho přijalo).
</li><li><b>Shoda</b> (match) je nejlevější a nejdelší (u tzv. „nehladového prohledávání“ naopak nejkratší) podřetězec prohledávaného řetězce, který se shoduje s daným regulárním výrazem, a totéž rekurzívně pro zbytek řetězce za koncem shody. Takže shody jsou vlastně podřetězce shodující se s regulárním výrazem, ale jen tak, aby se nepřekrývaly. Shodou může být i celý prohledávaný řetězec (protože každý řetězec je sám svým podřetězcem).
</li><li>Řetězec <b>odpovídá</b> danému regulárnímu výrazu, pokud s ním má nějakou shodu. Takže regulárnímu výrazu „a.c“ odpovídají např. řetězce „<i>abc</i>“, „a<i>abc</i>“, „x<i>axc</i>x“, „x<i>axc</i>x<i>axc</i>x“ apod., ale ne „xaxbxc“.
</li><li>Jako <b>atom</b> označuji nejkratší část (podřetězec) regulárního výrazu, která končí na dané pozici a tvořila by syntakticky správný regulární výraz sama o sobě. Atomem je např. „a“, „[abc]“, „(a|b)?“ či „\s+“, ale ne „a|b“, protože „b“ je kratší a samo o sobě tvoří syntakticky správný regulární výraz.
</li><li><b>Kvantifikátor</b> je speciální podřetězec, který se zapisuje za atom a určuje dovolený počet opakování.
</li><li><b>Kotva</b> a <b>hranice</b> jsou speciální atomy k testování pozice, např. „^“ nebo „\&lt;“. Z prohledávaného řetězce přijímají fiktivní prázdný podřetězec na jednoznačné pozici (u kotvy) nebo na všech pozicích splňujících určité podmínky (u hranice). Zvláštním případem hranice je <b>vyhlížení</b>.
</li></ul>
<h2><a href="#cast3" id="cast3"><span class="cislo">3.</span> Zaklínadla</a></h2>

<h3><a href="#cast3x1" id="cast3x1"><span class="cislo">1</span> Jednotlivé znaky</a></h3>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#1 </span><span class="D">⠓</span>konkrétní znak<sup><a href="#kapregularnivyrazyppc1" id="kapregularnivyrazyppcr1" title="Některé znaky musejí být v regulárních výrazech pro zbavení svého speciálního významu escapovány zpětným lomítkem.">(1)</a></sup></div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">znak</i></div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#2 </span><span class="D">⇖</span><b>libovolný znak</b></div><div class="radky">
<div class="radekzaklinadla">.</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#3 </span><span class="D">⣪</span>kterýkoliv <b>z uvedených znaků</b><sup><a href="#kapregularnivyrazyppc2" id="kapregularnivyrazyppcr2" title="Uvnitř těchto hranatých závorek se speciální znaky neescapují zpětným lomítkem, ale uvedením na určitou pozici.">(2)</a></sup></div><div class="radky">
<div class="radekzaklinadla">[<i class="dopln">znaky</i>]</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#4 </span><span class="D">ⴼ</span>libovolný znak <b>kromě uvedených</b></div><div class="radky">
<div class="radekzaklinadla">[^<i class="dopln">znaky</i>]</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#5 </span><span class="D">╈</span>všechny znaky po první výskyt některého z uvedených/případně až do konce řetězce</div><div class="radky">
<div class="radekzaklinadla">[^<i class="dopln">znaky</i>]*[<i class="dopln">znaky</i>]</div>
<div class="radekzaklinadla">[^<i class="dopln">znaky</i>]*</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#6 </span><span class="D">ᔯ</span><b>bílý znak</b>/nebílý znak</div><div class="radky">
<div class="radekzaklinadla">\s</div>
<div class="radekzaklinadla">\S</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#7 </span><span class="D">䷱</span>desítková <b>číslice</b> (rozšířený/základní/Perl)</div><div class="radky">
<div class="radekzaklinadla">[0-9]</div>
<div class="radekzaklinadla">[0-9]</div>
<div class="radekzaklinadla">\d</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#8 </span><span class="D">⋑</span>jiný znak než desítková číslice (rozšířený/základní/Perl)</div><div class="radky">
<div class="radekzaklinadla">[^0-9]</div>
<div class="radekzaklinadla">[^0-9]</div>
<div class="radekzaklinadla">\D</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#9 </span><span class="D">ᚎ</span>závorky „()[]{}“ (rozšířený/ základní)</div><div class="radky">
<div class="radekzaklinadla">[(][)]\[\]\{\}</div>
<div class="radekzaklinadla">[(][)]\[\]{}</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#10 </span><span class="D">⋰</span>libovolný alfanumerický znak, i národní abecedy (rozšířený/základní/Perl)</div><div class="radky">
<div class="radekzaklinadla">[[:alnum:]]</div>
<div class="radekzaklinadla">[[:alnum:]]</div>
<div class="radekzaklinadla">\w</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#11 </span><span class="D">⬁</span>libovolný znak kromě alfanumerických (rozšířený/základní/Perl)</div><div class="radky">
<div class="radekzaklinadla">[^[:alnum:]]</div>
<div class="radekzaklinadla">[^[:alnum:]]</div>
<div class="radekzaklinadla">\W</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#12 </span><span class="D">≳</span>libovolné písmeno, i národní abecedy</div><div class="radky">
<div class="radekzaklinadla">[[:alpha:]]</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#13 </span><span class="D">●</span>libovolné malé/velké písmeno, i národní abecedy</div><div class="radky">
<div class="radekzaklinadla">[[:lower:]]</div>
<div class="radekzaklinadla">[[:upper:]]</div>
</div></div>

<h3><a href="#cast3x2" id="cast3x2"><span class="cislo">2</span> Kvantifikátory (operátory opakování)</a></h3>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#1 </span><span class="D">ꙮ</span><b>jednou nebo vůbec</b> (≤ 1)(rozšířený/základní)</div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">atom</i>?</div>
<div class="radekzaklinadla"><i class="dopln">atom</i>\?</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#2 </span><span class="D">⁖</span><b>libovolněkrát</b> (≥ 0)(rozšířený/základní)</div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">atom</i>*</div>
<div class="radekzaklinadla"><i class="dopln">atom</i>*</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#3 </span><span class="D">ᕹ</span><b>jednou nebo víckrát</b> (≥ 1)(rozšířený/základní)</div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">atom</i>+</div>
<div class="radekzaklinadla"><i class="dopln">atom</i>\+</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#4 </span><span class="D">▢</span>přesně <b>N-krát</b> (= N)(rozšířený/základní)</div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">atom</i>{<i class="dopln">N</i>}</div>
<div class="radekzaklinadla"><i class="dopln">atom</i>\{<i class="dopln">N</i>\}</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#5 </span><span class="D">☪</span>M- až N-krát včetně (M ≤ počet ≤ N)(rozšířený/základní)</div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">atom</i>{<i class="dopln">M</i>,<i class="dopln">N</i>}</div>
<div class="radekzaklinadla"><i class="dopln">atom</i>\{<i class="dopln">M</i>,<i class="dopln">N</i>\}</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#6 </span><span class="D">˕</span><b>minimálně</b> M-krát (≥ M)(rozšířený/základní)</div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">atom</i>{<i class="dopln">M</i>,}</div>
<div class="radekzaklinadla"><i class="dopln">atom</i>\{<i class="dopln">M</i>,\}</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#7 </span><span class="D">⌧</span><b>maximálně</b> N-krát (≤ N)(rozšířený/základní)</div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">atom</i>{,<i class="dopln">N</i>}</div>
<div class="radekzaklinadla"><i class="dopln">atom</i>\{,<i class="dopln">N</i>\}</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#8 </span><span class="D">❮</span>snažit se opakovat co nejméně (<b>nehladové</b> prohledávání)(jen Perl)</div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">atom</i><i class="dopln">kvantifikátor</i>?</div>
</div></div>

<h3><a href="#cast3x3" id="cast3x3"><span class="cislo">3</span> Operátor „nebo“</a></h3>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#1 </span><span class="D">⬎</span>některý z podvýrazů (rozšířený/základní)</div><div class="radky">
<div class="radekzaklinadla"><i class="dopln">výraz 1</i><span class="volznak">[</span>|<i class="dopln">další výraz</i><span class="volznak">]</span><span class="tritecky"></span></div>
<div class="radekzaklinadla"><i class="dopln">výraz 1</i><span class="volznak">[</span>\|<i class="dopln">další výraz</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>

<h3><a href="#cast3x4" id="cast3x4"><span class="cislo">4</span> Kotvy a hranice (pozice)</a></h3>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#1 </span><span class="D">⪑</span>začátek/konec testovaného řetězce (rozšířený i základní, mimo víceřádkový režim)</div><div class="radky">
<div class="radekzaklinadla">^</div>
<div class="radekzaklinadla">$</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#2 </span><span class="D">♫</span>začátek/konec testovaného řetězce (ve víceřádkovém režimu)<sup><a href="#kapregularnivyrazyppc3" id="kapregularnivyrazyppcr3" title="Podpora těchto kotev v programech je omezená, ale gawk, sed i perl je podporují.">(3)</a></sup></div><div class="radky">
<div class="radekzaklinadla">\`</div>
<div class="radekzaklinadla">\'</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#3 </span><span class="D">┼</span>začátek/konec řádku (rozšířený i základní, ve víceřádkovém režimu)</div><div class="radky">
<div class="radekzaklinadla">^</div>
<div class="radekzaklinadla">$</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#4 </span><span class="D">⟧</span>začátek slova (rozšířený a základní/Perl)</div><div class="radky">
<div class="radekzaklinadla">\&lt;</div>
<div class="radekzaklinadla">\b(?=\w)</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#5 </span><span class="D">⋋</span>konec slova (rozšířený a základní/Perl)</div><div class="radky">
<div class="radekzaklinadla">\&gt;</div>
<div class="radekzaklinadla">\b(?&lt;=\w)</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#6 </span><span class="D">ᚄ</span>začátek nebo konec slova (rozšířený/základní/Perl)</div><div class="radky">
<div class="radekzaklinadla">(\&lt;|\&gt;)</div>
<div class="radekzaklinadla">\(\&lt;\|\&gt;\)</div>
<div class="radekzaklinadla">\b</div>
</div></div>

<h3><a href="#cast3x5" id="cast3x5"><span class="cislo">5</span> Seskupení</a></h3>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#1 </span><span class="D">≚</span>seskupení (rozšířený/základní)</div><div class="radky">
<div class="radekzaklinadla">(<i class="dopln">podvýraz</i>)</div>
<div class="radekzaklinadla">\(<i class="dopln">podvýraz</i>\)</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#2 </span><span class="D">⢁</span>seskupení bez zapamatování (jen Perl)</div><div class="radky">
<div class="radekzaklinadla">(?:<i class="dopln">podvýraz</i>)</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#3 </span><span class="D">ᐷ</span>pojmenované seskupení (jen Perl)</div><div class="radky">
<div class="radekzaklinadla">(?&lt;<i class="dopln">název</i>&gt;<i class="dopln">podvýraz</i>)</div>
</div></div>

<h3><a href="#cast3x6" id="cast3x6"><span class="cislo">6</span> Paměť (omezená podpora)</a></h3>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#1 </span><span class="D">Ⴣ</span>původní podřetězec odpovídající celému regulárnímu výrazu (rozšířený a základní/Perl)<sup><a href="#kapregularnivyrazyppc4" id="kapregularnivyrazyppcr4" title="Platí jen v rámci řetězce náhrady, ne v samotném regulárním výrazu.">(4)</a></sup></div><div class="radky">
<div class="radekzaklinadla">&amp;</div>
<div class="radekzaklinadla">$&amp;</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#2 </span><span class="D">✭</span><b>záchyt</b> − podřetězec původního řetězce odpovídající seskupení (varianty)<sup><a href="#kapregularnivyrazyppc5" id="kapregularnivyrazyppcr5" title="Zdvojení zpětného lomítka v GNU awk vyplývá ze skutečnosti, že ho (obvykle) zadáváte jako řetězec v programovacím jazyce. Pokud byste náhodou např. načítali řetězec náhrady ze souboru, bude tam zpětné lomítko patřit pouze jedno!">(5)</a></sup></div><div class="radky">
<div class="radekzaklinadla">\<i class="dopln">pořadové-číslo-1-až-9</i><span class="prikladhodnoty">⊨ v reg. výrazu: GNU sed a Perl; v řetězci náhrady: GNU sed</span></div>
<div class="radekzaklinadla">\\<i class="dopln">pořadové-číslo-1-až-9</i><span class="prikladhodnoty">⊨ v řetězci náhrady: GNU awk (jen funkce gensub())</span></div>
<div class="radekzaklinadla">$<i class="dopln">pořadové-číslo-1-až-9</i><span class="prikladhodnoty">⊨ v řetězci náhrady: Perl</span></div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#3 </span><span class="D">☼</span>totéž, ale první písmeno malé/velké<sup><a href="#kapregularnivyrazyppc6" id="kapregularnivyrazyppcr6" title="Tuto variantu podporuje pravděpodobně jen Perl a sed a smí se vyskytnout pouze v řetězci pro náhradu, nikoliv přímo ve vlastním regulárním výrazu.">(6)</a></sup></div><div class="radky">
<div class="radekzaklinadla">\l\<i class="dopln">pořadové-číslo-1-až-9</i>\E</div>
<div class="radekzaklinadla">\u\<i class="dopln">pořadové-číslo-1-až-9</i>\E</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#4 </span><span class="D">➸</span>totéž, ale celý text malými/velkými písmeny<sup><a href="#kapregularnivyrazyppc7" id="kapregularnivyrazyppcr7" title="Viz poznámku k předchozímu zaklínadlu.">(7)</a></sup></div><div class="radky">
<div class="radekzaklinadla">\L\<i class="dopln">pořadové-číslo-1-až-9</i>\E</div>
<div class="radekzaklinadla">\U\<i class="dopln">pořadové-číslo-1-až-9</i>\E</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#5 </span><span class="D">┋</span>záchyt v Perlu v rámci regulárního výrazu (číslovaný/pojmenovaný)</div><div class="radky">
<div class="radekzaklinadla">\g{<i class="dopln">pořadové-číslo</i>}</div>
<div class="radekzaklinadla">\g{<i class="dopln">název</i>}</div>
</div></div>

<h3><a href="#cast3x7" id="cast3x7"><span class="cislo">7</span> Vyhlížení (jen Perl)</a></h3>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#1 </span><span class="D">⚗</span>ověřit, že za aktuální pozicí <b>následuje</b> shoda s daným regulárním podvýrazem</div><div class="radky">
<div class="radekzaklinadla">(?=<i class="dopln">podvýraz</i>)</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#2 </span><span class="D">䷳</span>ověřit, že za aktuální pozicí <b>nenásleduje</b> shoda s daným regulárním podvýrazem</div><div class="radky">
<div class="radekzaklinadla">(?!<i class="dopln">podvýraz</i>)</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#3 </span><span class="D">╌</span>ověřit, že aktuální pozici <b>předchází</b> shoda s daným regulárním podvýrazem</div><div class="radky">
<div class="radekzaklinadla">(?&lt;=<i class="dopln">podvýraz</i>)</div>
</div></div>
<div class="zaklinadlo"><hr><div class="zahlavi"><span class="cislo">#4 </span><span class="D">ⵢ</span>ověřit, že aktuální pozici <b>nepředchází</b> shoda s daným regulárním podvýrazem</div><div class="radky">
<div class="radekzaklinadla">(?&lt;!<i class="dopln">podvýraz</i>)</div>
</div></div>

<h2><a href="#cast4" id="cast4"><span class="cislo">4.</span> Parametry příkazů</a></h2>

<h3><a href="#cast4x1" id="cast4x1"><span class="cislo">1</span> bash</a></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">[[ <i class="dopln">řetězec</i> =~ <i class="dopln">regulární-výraz</i> ]]</div>
</div></div>
<p>
<i>Poznámka:</i> Protože pravidla escapování regulárního výrazu v této konstrukci jsou neintuitivní a nepraktická,
striktně doporučuji zadávat regulární výraz jako proměnnou, např. takto:
</p>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">if [[ &quot;$1/$2&quot; =~ $regex ]]</div>
</div></div>
<p>
<i>Pozor!</i> Proměnnou s regulárním výrazem v této konstrukci nikdy neuzavírejte do uvozovek!
Pokud to uděláte, bash ji bude interpretovat jako obyčejný řetězec, ne jako regulární výraz!
</p><p>
Existuje ještě druhý přiměřeně funkční způsob:
</p><p>
<b>[[</b> <i class="dopln">řetězec</i> <b>=~ $(printf %s &quot;</b><i class="dopln">regulární výraz</i><b>&quot;) ]]</b>
</p><p>
Ale v tomto případě nesmí regulární výraz končit znakem nového řádku \n, protože ten by se při rozvoji ztratil; pokud tímto znakem končit musí, pomůže uzavřít ho do hranatých závorek („[\n]“).
</p>

<h3><a href="#cast4x2" id="cast4x2"><span class="cislo">2</span> egrep</a></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">egrep <i class="dopln">parametry</i> <span class="volznak">[</span>-e<span class="volznak">]</span> '<i class="dopln">regulární výraz</i>' <span class="volznak">[</span><i class="dopln">soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<table class="parametryprikazu"><tbody><tr><td>-v</td><td>Logická negace; hledat řádky, které nevyhovují výrazu.</td></tr>

<tr><td>-x</td><td>Regulárnímu výrazu musí odpovídat celá řádka (výchozí chování: jakýkoliv podřetězec řádku).</td></tr>

<tr><td>-z</td><td>Řádky vstupních souborů jsou ukončeny nulovým bajtem; znak \n bude považovat za za normální znak.</td></tr>

<tr><td>-C <i class="dopln">počet</i></td><td>„kontext“ Kromě vyhovujícího řádku vypíše zadaný počet předchozích a následujících. (Samostatně lze tyto počty nastavit parametry <b>-A</b> a <b>-B</b>.)</td></tr>

<tr><td>-o</td><td>Místo celých řádků vypisuje jednotlivé podřetězce vyhovující výrazu, každý podřetězec na samostatný řádek.</td></tr>

<tr><td>-h</td><td>Vyhledává-li se ve více souborech, neuvede se jako prefix řádky název souboru.</td></tr>

<tr><td>-H</td><td>Vždy uvede jako prefix řádku název souboru.</td></tr>

<tr><td>-n</td><td>Jako prefix bude vypisovat číslo řádky.</td></tr>

<tr><td>-q</td><td>Žádný normální výstup, jen otestuje, zda by našel alespoň jeden vyhovující řádek. Parametr <b>-s</b> zase potlačí chybová hlášení.</td></tr>

<tr><td>-m <i class="dopln">N</i></td><td>Ukončí hledání po nalezení N vyhovujících řádků.</td></tr>

<tr><td>-i</td><td>Nerozlišovat velká a malá písmena.</td></tr>

</tbody></table>
<p>
Poznámka: příkaz „grep“ má tytéž parametry jako „egrep“, ale pracuje se základními regulárními výrazy.
</p>

<h3><a href="#cast4x3" id="cast4x3"><span class="cislo">3</span> gawk</a></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">gawk <span class="volznak">[</span><i class="dopln">parametry</i><span class="volznak">]</span> '/<i class="dopln">regulární výraz</i>/<span class="volznak">[</span>{<i class="dopln">příkazy</i>}<span class="volznak">]</span>' <i class="dopln">soubor</i><span class="tritecky"></span></div>
</div></div>
<table class="parametryprikazu"><tbody><tr><td>-F <i class="dopln">hodnota</i></td><td>Nastaví systémovou proměnnou „FS“ (field separator) na uvedenou hodnotu.</td></tr>

<tr><td>-v <i class="dopln">proměnná</i><b>=</b><i class="dopln">hodnota</i></td><td>Nastaví proměnnou na uvedenou hodnotu.</td></tr>

<tr><td>-S</td><td>Spustí skript v „bezpečném režimu“, kdy nemůže volat příkazy bashe, spouštět jiné programy ani otevírat další soubory.</td></tr>

</tbody></table>

<h3><a href="#cast4x4" id="cast4x4"><span class="cislo">4</span> perl</a></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">perl -nwe 'if ($_ =~ /<i class="dopln">regulární výraz Perlu</i>/) {print $_}' &lt;<i class="dopln">vstupní-soubor</i></div>
<div class="radekzaklinadla">perl -pwe 's/<i class="dopln">regulární výraz Perlu</i>/<i class="dopln">výraz náhrady</i>/<span class="volznak">[</span>g<span class="volznak">]</span>' &lt;<i class="dopln">vstupní-soubor</i></div>
</div></div>
<table class="parametryprikazu"><tbody><tr><td>-n</td><td>Vykoná program v cyklu pro každý řádek vstupu.</td></tr>

<tr><td>-p</td><td>Vykoná program v cyklu pro každý řádek vstupu a na konci každého cyklu vypíše proměnnou „$_“.</td></tr>

<tr><td>-w</td><td>Zapne užitečná varování. (<b>-W</b> zapne všechna varování.)</td></tr>

<tr><td>-e <i class="dopln">program</i></td><td>Vykoná tento program místo načtení programu ze souboru.</td></tr>

<tr><td>-X</td><td>Vypne všechna varování.</td></tr>

</tbody></table>

<h3><a href="#cast4x5" id="cast4x5"><span class="cislo">5</span> sed</a></h3>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">sed <i class="dopln">parametry</i> <span class="volznak">[</span><span class="volznak">[</span>-e <i class="dopln">příkazy</i><span class="volznak">]</span><span class="tritecky"></span> -e<span class="volznak">]</span> <i class="dopln">příkazy</i> <span class="volznak">[</span><i class="dopln">vstupní-soubor</i><span class="volznak">]</span><span class="tritecky"></span></div>
</div></div>
<table class="parametryprikazu"><tbody><tr><td>-E</td><td>Používá rozšířené regulární výrazy místo základních.</td></tr>

<tr><td>-i</td><td>„in-place“ Výstupem přepíše původní soubor.</td></tr>

<tr><td>-z</td><td>Řádek končí nulovým bajtem, ne znakem \n.</td></tr>

<tr><td>-u</td><td>„unbuffered“ Čte a zapisuje data po jednotlivých řádcích. (Normálně je kvůli výkonu načítá po delších blocích.)</td></tr>

</tbody></table>

<h2><a href="#cast5" id="cast5"><span class="cislo">5.</span> Instalace na Ubuntu</a></h2>
<p class="ponadpisu">
Příkazy „egrep“, „grep“, „perl“ a „sed“ jsou základními součástmi
Ubuntu. Příkaz „gawk“ je nutné doinstalovat, nebo místo něj použít méně
schopný příkaz „awk“, který je základní součástí Ubuntu.
</p>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">sudo apt-get install gawk</div>
</div></div>
<p>
Regulární výrazy jsou používány i v mnoha dalších programech.
</p>

<h2><a href="#cast6" id="cast6"><span class="cislo">6.</span> Tipy a zkušenosti</a></h2>
<ul><li>V Perlu se k označení desítkové číslice běžně používá podvýraz „\d“; v jiných syntaxích regulárních výrazů ovšem není podporován, proto doporučuji zvyknout si na podvýraz „[0-9]“, který je čitelnější a je podporovaný opravdu všude.
</li><li>Parametr -o u příkazu „egrep“ lze efektivně využít při počítání ne-ASCII znaků. Počet znaků č, š a ž v textu zjistíte příkazem „egrep -o '[čšž]' | wc -l“.
</li><li>Regulární výrazy jsou přezdívány „write-only language“, protože bývá výrazně snazší je napsat než přečíst a pochopit. Než začnete rozumět cizím regulárním výrazům, musíte získat značné zkušenosti s psaním svých vlastních.
</li><li>Ve výrazech typu „&quot;[^&quot;]*&quot;“ často zapomínám kvantifikátor + či *.
</li></ul>
<h2><a href="#cast7" id="cast7"><span class="cislo">7.</span> Další zdroje informací</a></h2>
<p class="ponadpisu">
Pro samotné regulární výrazy je k dispozici velké množství webových stránek (viz Odkazy),
ale většinou jsou zbytečné, protože s referenční příručkou (resp. s touto kapitolou)
budete pravděpodobně schopen/a požadovaný regulární výraz vymyslet sám/a.
</p><p>
Pro zmíněné programy:
</p>
<div class="zaklinadlo"><div class="radky">
<div class="radekzaklinadla">egrep --help</div>
<div class="radekzaklinadla">man gawk</div>
<div class="radekzaklinadla">perl --help</div>
</div></div>
<ul class="kompaktni"><li><a href="https://www.regularnivyrazy.info/">Web regularnivyrazy.info</a>
</li><li><a href="https://youtu.be/dOKydwMDYUU">Přednáška Lukáše Bařinky: Bash a regulární výrazy vs shellovské vzory</a>
</li><li><a href="https://www.regularnivyrazy.info/serial-php-pcre-perl-compatible.html">Seriál Regulární výrazy v PHP (Perl-compatible)</a>
</li><li><a href="https://www.root.cz/serialy/regularni-vyrazy/">Seriál článků na Root.cz</a>
</li><li><a href="https://cs.wikipedia.org/wiki/Regul%C3%A1rn%C3%AD_v%C3%BDraz">Článek Regulární výraz na Wikipedii</a>
</li><li>Kniha: GOYVAERTS, Jan a Steven LEVITHAN. <i>Regulární výrazy: kuchařka programátora.</i> Brno: Computer Press, 2010. ISBN 978-80-251-1935-8.
</li><li><a href="http://www.regexp.cz/index.php">Online tester regulárních výrazů</a>
</li><li><a href="https://youtu.be/HHh-U0dZcOc">Přednáška Milana Davídka: Regulární výrazy</a>
</li><li><a href="https://miroslavpecka.cz/blog/regularni-vyrazy-vse-co-jste-o-nich-chteli-vedet/">Článek na blogu Miroslava Pecky</a>
</li><li><a href="https://www.regular-expressions.info/">Web Regular-Expressions.info</a> (anglicky)
</li><li><a href="https://www.rexegg.com/">Web RexEgg</a> (anglicky)
</li><li><a href="https://www.gnu.org/software/gawk/manual/">Online příručka GNU awk</a> (anglicky)
</li><li><a href="https://www.gnu.org/software/sed/manual/">Online příručka GNU sed</a> (anglicky)
</li><li><a href="https://perldoc.perl.org/perlre.html">Online příručka modulu perlre</a> (anglicky)
</li><li><a href="http://manpages.ubuntu.com/manpages/bionic/en/man1/grep.1.html">Manuálová stránka: grep</a> (anglicky)
</li><li><a href="http://manpages.ubuntu.com/manpages/bionic/en/man3/pcrepattern.3.html">Manuálová stránka: pcrepattern</a> (anglicky)
</li><li><a href="https://packages.ubuntu.com/bionic/gawk">Balíček „gawk“</a> (anglicky)
</li><li><a href="https://packages.ubuntu.com/bionic/perl">Balíček „perl“</a> (anglicky)
</li><li><a href="https://packages.ubuntu.com/bionic/sed">Balíček „sed“</a> (anglicky)
</li></ul><div class="ppc"><div id="kapregularnivyrazyppc1"><a href="#kapregularnivyrazyppcr1" class="cislopozn">1</a>&nbsp;Některé znaky musejí být v regulárních výrazech pro zbavení svého speciálního významu escapovány zpětným lomítkem.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapregularnivyrazyppc2"><a href="#kapregularnivyrazyppcr2" class="cislopozn">2</a>&nbsp;Uvnitř těchto hranatých závorek se speciální znaky neescapují zpětným lomítkem, ale uvedením na určitou pozici.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapregularnivyrazyppc3"><a href="#kapregularnivyrazyppcr3" class="cislopozn">3</a>&nbsp;Podpora těchto kotev v programech je omezená, ale gawk, sed i perl je podporují.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapregularnivyrazyppc4"><a href="#kapregularnivyrazyppcr4" class="cislopozn">4</a>&nbsp;Platí jen v rámci řetězce náhrady, ne v samotném regulárním výrazu.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapregularnivyrazyppc5"><a href="#kapregularnivyrazyppcr5" class="cislopozn">5</a>&nbsp;Zdvojení zpětného lomítka v GNU awk vyplývá ze skutečnosti, že ho (obvykle) zadáváte jako řetězec v programovacím jazyce. Pokud byste náhodou např. načítali řetězec náhrady ze souboru, bude tam zpětné lomítko patřit pouze jedno!</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapregularnivyrazyppc6"><a href="#kapregularnivyrazyppcr6" class="cislopozn">6</a>&nbsp;Tuto variantu podporuje pravděpodobně jen Perl a sed a smí se vyskytnout pouze v řetězci pro náhradu, nikoliv přímo ve vlastním regulárním výrazu.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
<div id="kapregularnivyrazyppc7"><a href="#kapregularnivyrazyppcr7" class="cislopozn">7</a>&nbsp;Viz poznámku k předchozímu zaklínadlu.</div>
<script>document.write("<div class=\"zpetdotextu\" onclick=\"window.history.back()\">zpět do textu</div>");</script>
</div>
<div class="odkazydole"><a href="system.htm"><img src="obrazky/ik-vychozi.png" alt="" width="32" height="32">Systém</a><a href="sprava-balicku.htm"><img src="obrazky/ik-vychozi.png" alt="" width="32" height="32">Správa balíčků</a><a href="zpracovani-videa-a-zvuku.htm"><img src="obrazky/ik-vychozi.png" alt="" width="32" height="32">Zpracování videa a zvuku</a></div>

<nav class="spodni"><span class="prev">
<a href="prace-s-archivy.htm" rel="prev" title="10. Práce s archivy">Předchozí&nbsp;kapitola</a>&nbsp;|
</span><a href="index.htm">Přehled</a><span class="next"><!--
-->&nbsp;| <a href="sprava-balicku.htm" rel="next" title="12. Správa balíčků">Následující&nbsp;kapitola</a>
</span>
<a href="#nahore" id="odkaznahoru" title="NAHORU − na začátek stránky">▴<!--⤒--></a>
<a href="#dole" id="odkazdolu" title="DOLŮ − na konec stránky">▾<!--⤓--></a>
</nav>


</article>
<footer id="dole">
<img src="obrazky/by-sa.png" width="88" height="31" alt="[BY-SA]">
<p>Veškerý obsah této stránky (text, obrázky, zdrojový kód) je možno upravovat a šířit pod podmínkami licence
<a href="https://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International</a>.
Upozorňuji, že uvedená licence vyžaduje uvedení seznamu autorů, licence a zdroje a poskytnutí stejné
či kompatibilní licence k provedeným změnám, jsou-li nějaké. Příslušné údaje jsou dostupné
na stránce „<a href="x-autori.htm">Přehled autorů</a>“.
Šíření obsahu bez těchto údajů nebo šíření upravené verze bez poskytnutí adekvátní
licence k provedeným úpravám je pravděpodobně porušení licenčních podmínek a může být postihováno.
Poskytování zdrojového kódu při šíření není touto licencí vyžadováno.</p><p>Pro nové verze, další informace, aktuální zdrojový kód
a možnost se zapojit do projektu „Linux: Kniha kouzel“ navštivte jeho
<a href="https://github.com/singularis-mzf/linux-spellbook">repozitář na GitHubu</a>.
</footer>
</body>
</html>
